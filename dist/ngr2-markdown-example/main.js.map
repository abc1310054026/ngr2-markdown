{"version":3,"sources":["webpack:///./projects/ngr2-markdown/src/lib/core/markdown.ts","webpack:///./projects/ngr2-markdown/src/lib/service/ngr2-markdown.service.ts","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import * as MarkdownIt from 'markdown-it/lib/index';\nimport {Observable, Observer, Subject} from 'rxjs';\nimport * as hljs from 'highlight.js';\n\nexport class MarkdownImpl implements Markdown {\n  markdownIt: MarkdownIt;\n\n  constructor() {\n    this.markdownIt = new MarkdownIt({\n      highlight: (str: string, lang: string) => {\n        if (lang && hljs.getLanguage(lang)) {\n          try {\n            return '<pre class=\"hljs\"><code>' +\n              hljs.highlight(lang, str).value +\n              '</code></pre>';\n          } catch (__) {}\n        }\n        return '<pre class=\"hljs\"><code>' + this.markdownIt.utils.escapeHtml(str) + '</code>';\n      }\n    });\n  }\n\n  /**\n   * render markdown text function\n   * 渲染函数\n   * @param markdown - markdown format text - markdown格式的文本\n   * @param options - use to open or close plugins\n   * @return - return transformation html - 返回渲染后的html\n   */\n  render(markdown: string, options?: MarkdownOption) {\n    this.disable(options);\n    const html = this.markdownIt.render(markdown);\n    this.enable(options);\n    return html;\n  }\n\n  use<T>(fn: (md: MarkdownIt, subject: Observer<T>) => void): Observable<T> {\n    const md = this.markdownIt;\n    const subject = new Subject<T>();\n    const observable = new Observable<T>(function (subscriber) {\n      md.use(fn, subscriber);\n    });\n    return observable;\n  }\n\n  enable(option: MarkdownOption) {\n    if (!option) { return; }\n    const enableRules = Object.keys(option).filter((value => {\n      return !option[value];\n    }));\n    this.markdownIt.enable(enableRules);\n  }\n\n  disable(option: MarkdownOption) {\n    if (!option) { return; }\n    const disableRules = Object.keys(option).filter((value => {\n      return !option[value];\n    }));\n    this.markdownIt.disable(disableRules);\n  }\n}\n\nexport class MarkdownOptionImpl implements MarkdownOption {\n  anchor: boolean;\n}\n\ninterface Markdown {\n  render(markdown: string, options: any);\n  use<T>(fn: (md: MarkdownIt, observer: Observer<T>) => void);\n  enable(option: MarkdownOption);\n  disable(option: MarkdownOption);\n}\n\ninterface MarkdownOption {\n  anchor: boolean;\n}\n","import {Injectable} from '@angular/core';\nimport * as MarkdownIt from 'markdown-it/lib/index';\nimport {BehaviorSubject, Observer} from 'rxjs';\nimport {MarkdownImpl, MarkdownOptionImpl} from '../core/markdown';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class Ngr2MarkdownService {\n  unitMap = {\n    exist: false,\n    child: {\n      'b': {\n        exist: false,\n        child: {\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'c': {\n        exist: false,\n        child: {\n          'i': {\n            exist: true,\n            child: {\n            }\n          },\n          'p': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'h': {\n        exist: false,\n        child: {\n          'c': {\n            exist: true,\n            child: {\n            }\n          },\n          'l': {\n            exist: true,\n            child: {\n              'r': {\n                exist: true,\n                child: {\n                }\n              }\n            }\n          },\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'i': {\n        exist: false,\n        child: {\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'm': {\n        exist: false,\n        child: {\n          'e': {\n            exist: true,\n            child: {\n              'r': {\n                exist: true,\n                child: {\n                }\n              }\n            }\n          },\n          'm': {\n            exist: true,\n            child: {\n            }\n          },\n          'c': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'n': {\n        exist: false,\n        child: {\n          'i': {\n            exist: true,\n            child: {\n              'm': {\n                exist: false,\n                child: {\n                  'v': {\n                    exist: true,\n                    child: {\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      'p': {\n        exist: false,\n        child: {\n          'a': {\n            exist: false,\n            child: {\n              'c': {\n                exist: true,\n                child: {\n                }\n              },\n            }\n          },\n        }\n      },\n      'q': {\n        exist: true,\n        child: {\n        }\n      },\n      't': {\n        exist: false,\n        child: {\n          'p': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'w': {\n        exist: false,\n        child: {\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'x': {\n        exist: false,\n        child: {\n          'a': {\n            exist: false,\n            child: {\n              'm': {\n                exist: false,\n                child: {\n                  'v': {\n                    exist: true,\n                    child: {\n                    }\n                  }\n                }\n              }\n            }\n          },\n          'e': {\n            exist: true,\n            child: {\n            }\n          },\n          'p': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      }\n    }\n  };\n  markdownIt: MarkdownImpl;\n  /**\n   * 当前浏览的标题的Subject, BehaviorSubject可支持多播(在多处订阅)\n   */\n  currentHeading: BehaviorSubject<string> = new BehaviorSubject<string>(null);\n  /**\n   * 发送目录信息的Subject\n   */\n  TOCInfo: BehaviorSubject<TOCItem> = new BehaviorSubject<TOCItem>(null);\n\n  constructor() {\n    this.markdownIt = new MarkdownImpl();\n    this.markdownIt.use(this.anchor)\n      .subscribe((value: Array<any>) => {\n        const infoList = value.map((item) => {\n          return new TOCItem(item.content, item.indentLevel);\n        });\n        const root = new TOCItem('root', 0);\n        let TOCInfo = root;\n        for (let i = 0; i < infoList.length; i++) {\n          while (TOCInfo && TOCInfo.indentLevel >= infoList[i].indentLevel) {\n            TOCInfo = TOCInfo.parent;\n          }\n          infoList[i].parent = TOCInfo;\n          TOCInfo.children.push(infoList[i]);\n          TOCInfo = infoList[i];\n        }\n        this.TOCInfo.next(root);\n      });\n  }\n\n  render(markdown: string, options?: MarkdownOptionImpl): string {\n    if (typeof markdown !== 'string') {\n      markdown = '';\n    }\n    return this.markdownIt.render(markdown, options);\n  }\n\n  /**\n   * Plugin: anchor\n   * 这个方法向类型为heading_open的token添加id, 用于锚点定位\n   * @param md - MarkdownIt instance\n   * @param observer - use to push info\n   */\n  private anchor(md: MarkdownIt, observer: Observer<Array<any>>) {\n    md.core.ruler.push('anchor', (state => {\n      const infoList: Array<any> = new Array<any>();\n      state.tokens.map((token, index, array) => {\n        if (token.type === 'heading_open') {\n          token.attrJoin('id', array[index + 1].content);\n          infoList.push({\n            content: token.attrGet('id'),\n            indentLevel: token.markup.length\n          });\n        }\n      });\n      observer.next(infoList);\n    }));\n  }\n\n  /**\n   * 设置当前浏览的标题\n   * @param heading - 标题标签的id\n   */\n  setCurrentHeading(heading: string): void {\n    if (this.currentHeading.getValue() !== heading) {\n      this.currentHeading.next(heading);\n    }\n  }\n\n  checkUnit(str: string, unitMap: any = this.unitMap, caseSensitive?: boolean): {\n    unit: string,\n    number: number\n  } {\n    if (!unitMap || !str) { return; }\n    if (!caseSensitive) { str = str.toLocaleLowerCase(); }\n    let i: number, isMatch = false;\n    for (i = str.length - 1; i >= 0; i--) {\n      const ascii = str.charCodeAt(i);\n      if (ascii >= 48 && ascii <= 57) {\n        isMatch = unitMap.exist;\n        break;\n      } else {\n        if (!unitMap.child[str[i]]) { break; }\n        unitMap = unitMap.child[str[i]];\n      }\n    }\n    return isMatch ? {\n      unit: str.substr(i + 1),\n      number: Number.parseInt(str.substr(0, i + 1), 10)\n    } : null;\n  }\n}\n\n/**\n * 目录(TOC)生成的位置\n * start: TOC在内容左边\n * end: 右边\n */\ntype tocPos = 'left' | 'right';\n\nexport class MarkdownOption {\n  anchor: boolean;\n  TOC: boolean;\n  direction: tocPos;\n  /**\n   * container height property\n   */\n  height: string;\n  /**\n   * container toc active color property\n   */\n  themeColor: string;\n  bodyClassName: string;\n\n  constructor(anchor: boolean = false,\n              TOC: boolean = false,\n              direction: tocPos = 'left',\n              height: string = '800px',\n              themeColor: string = '#3f51b5',\n              bodyClassName: string = 'markdown-body'\n  ) {\n    this.anchor = anchor;\n    this.TOC = TOC;\n    this.direction = direction;\n    this.height = height;\n    this.themeColor = themeColor;\n    this.bodyClassName = bodyClassName;\n  }\n}\n\nexport class TOCItem {\n  content: string;\n  indentLevel: number;\n  parent: TOCItem;\n  children: Array<TOCItem>;\n\n  constructor(content: string, indentLevel: number) {\n    this.content = content;\n    this.indentLevel = indentLevel;\n    this.children = new Array<TOCItem>();\n  }\n}\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","module.exports = \".main-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100vh;\\n}\\n\\n.toolbar {\\n  display: flex;\\n  align-items: center;\\n  flex: 0 0 40px;\\n  box-sizing: border-box;\\n  padding: 5px;\\n  background-color: lightgray;\\n}\\n\\n.toolbar button {\\n}\\n\\n.markdown {\\n  flex: 1;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsY0FBYztFQUNkLHNCQUFzQjtFQUN0QixZQUFZO0VBQ1osMkJBQTJCO0FBQzdCOztBQUVBO0FBQ0E7O0FBRUE7RUFDRSxPQUFPO0FBQ1QiLCJmaWxlIjoic3JjL2FwcC9hcHAuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYWluLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGhlaWdodDogMTAwdmg7XG59XG5cbi50b29sYmFyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleDogMCAwIDQwcHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBhZGRpbmc6IDVweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmF5O1xufVxuXG4udG9vbGJhciBidXR0b24ge1xufVxuXG4ubWFya2Rvd24ge1xuICBmbGV4OiAxO1xufVxuIl19 */\"","module.exports = \"<!--The content below is only a placeholder and can be replaced.-->\\n<div class=\\\"main-container\\\">\\n  <div class=\\\"toolbar\\\">\\n    <button (click)=\\\"changeContent()\\\">change content</button>\\n    <button (click)=\\\"changeContentToNull()\\\">change content to null</button>\\n  </div>\\n  <nb-ngr2-markdown\\n    [options]=\\\"{TOC: true, direction: 'left', bodyClassName: 'markdown-body', height: 'calc(100vh - 40px)', themeColor: '#3f51a5'}\\\"\\n    [markdown]=\\\"content\\\"\\n    class=\\\"markdown\\\"\\n  ></nb-ngr2-markdown>\\n</div>\\n<router-outlet></router-outlet>\\n\"","import {AfterViewChecked, AfterViewInit, Component} from '@angular/core';\nimport {Ngr2MarkdownService} from '../../projects/ngr2-markdown/src/lib/service/ngr2-markdown.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements AfterViewInit, AfterViewChecked {\n  title = 'ngr2-markdown-example';\n  exampleText1 = `## page类构造函数\n\\`\\`\\`java\npublic Page(int pageId, String pageTitle, String pageAuthor, String pageContent, Timestamp createTime, Timestamp lastModifiedTime) {\n        this.pageId = pageId;\n        this.pageTitle = pageTitle;\n        this.pageAuthor = pageAuthor;\n        this.pageContent = pageContent;\n        this.createTime = createTime;\n        this.lastModifiedTime = lastModifiedTime;\n    }\n\\`\\`\\`\n### test3\n### test4\n## Controller层\n\\`\\`\\`java\n/**\n     * 获取指定页面完整信息\n     * @author Ce\n     * @date 2018/4/25 17:02\n     * @param [pageId]\n     * @return com.alibaba.fastjson.JSONObject\n     */\n    public Page pageInfo (int pageId) {\n\n        Object[] params = new Object[1];\n        params[0] = pageId;\n        List list = queryRepository.executeQuery(\"select new Page(pageId, pageTitle, pageAuthor, pageContent, createTime, lastModifiedTime) from Page where pageId=?0\", params);\n\n        if (list.size() > 1) {\n            try {\n                throw new Exception(\"pageId对应了多个page\");\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n        return (Page) list.get(0);\n    }\n\\`\\`\\`\n### test5\n可以看到在Page类的构造函数中有Timestamp类型的两个参数\\`createTime\\`和\\`lastModifiedTime\\`而导致爆出以下错误的原因是hibernate没有找到对应的构造函数.\n\\`\\`\\`\ncause=org.hibernate.PropertyNotFoundException: no appropriate constructor in class: cn.freedoe.entity.Page\n\\`\\`\\`\n所以应该是hibernate在mysql的timestamp类型和java的Timestamp类型转换的问题.\n但是通过Criteria添加条件,是可以成功执行查询的,所以问题范围缩小到HQL语句的DTO查询对Timestamp类型的转换识别\n`;\n  exampleText2 = `## Controller层\n\\`\\`\\`java\n/**\n     * 获取指定页面完整信息\n     * @author Ce\n     * @date 2018/4/25 17:02\n     * @param [pageId]\n     * @return com.alibaba.fastjson.JSONObject\n     */\n    public Page pageInfo (int pageId) {\n\n        Object[] params = new Object[1];\n        params[0] = pageId;\n        List list = queryRepository.executeQuery(\"select new Page(pageId, pageTitle, pageAuthor, pageContent, createTime, lastModifiedTime) from Page where pageId=?0\", params);\n\n        if (list.size() > 1) {\n            try {\n                throw new Exception(\"pageId对应了多个page\");\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n        return (Page) list.get(0);\n    }\n\\`\\`\\``;\n  content = null;\n\n  constructor(\n    private markdownService: Ngr2MarkdownService\n  ) {\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  ngAfterViewChecked(): void {\n  }\n\n  changeContent() {\n    if (this.content === null || this.content === this.exampleText1) {\n      this.content = this.exampleText2;\n    } else {\n      this.content = this.exampleText1;\n    }\n  }\n\n  changeContentToNull() {\n    this.content = null;\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport {Ngr2MarkdownModule} from 'ngr2-markdown';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    Ngr2MarkdownModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}