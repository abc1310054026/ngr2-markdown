{"version":3,"file":"ngr2-markdown.umd.js.map","sources":["ng://ngr2-markdown/lib/core/markdown/markdown.ts","node_modules/tslib/tslib.es6.js","ng://ngr2-markdown/lib/core/fileOperator.ts","ng://ngr2-markdown/lib/utils/textParser.ts","ng://ngr2-markdown/lib/service/ngr2-markdown.service.ts","ng://ngr2-markdown/lib/core/syncScroll.ts","ng://ngr2-markdown/lib/ngr2-markdown.component.ts","ng://ngr2-markdown/lib/side-toc/side-toc.component.ts","ng://ngr2-markdown/lib/pipe/htmlpipe.pipe.ts","ng://ngr2-markdown/lib/pipe/md.pipe.ts","ng://ngr2-markdown/lib/tool-bar/tool-bar.component.ts","ng://ngr2-markdown/lib/core/markdown/markdownMarker.ts","ng://ngr2-markdown/lib/core/markdown/markdwonRenderer.ts","ng://ngr2-markdown/lib/edit-box/edit-box.component.ts","ng://ngr2-markdown/lib/core/indexedDB/indexedDB.ts","ng://ngr2-markdown/lib/core/tree/tree.ts","ng://ngr2-markdown/lib/file-browser/file-browser.component.ts","ng://ngr2-markdown/lib/status-bar/status-bar.component.ts","ng://ngr2-markdown/lib/control-bar/control-bar.component.ts","ng://ngr2-markdown/lib/menu/menu.component.ts","ng://ngr2-markdown/lib/core/dad/dragAndDropEvent.ts","ng://ngr2-markdown/lib/core/dad/dragAndDrop.ts","ng://ngr2-markdown/lib/core/dad/dragAndDropContainer.ts","ng://ngr2-markdown/lib/drag-and-drop.directive.ts","ng://ngr2-markdown/lib/tree/tree-node-directive/tree-node-def.directive.ts","ng://ngr2-markdown/lib/tree/tree/tree.component.ts","ng://ngr2-markdown/lib/tree/tree-node/tree-node.component.ts","ng://ngr2-markdown/lib/tree/tree-node-directive/tree-node-toggle.directive.ts","ng://ngr2-markdown/lib/sync-scroll/sync-scroll.directive.ts","ng://ngr2-markdown/lib/ngr2-markdown.module.ts"],"sourcesContent":["// import * as MarkdownIt from 'markdown-it';\r\n// å¦ä¸ç¨TSç@typesåè£å¼å¥å¨ie11ä¸­æ æ³å¼å®¹, å¨æååºæ¥çvendor.jsä¸­ä¼æä¸è¡ä½¿ç¨äºç®­å¤´å½æ°çä»£ç æ¥(è¯­æ³éè¯¯)\r\n// ç´æ¥å¼å¥markdown-it.min.jså¯ä»¥é¿å\r\nimport * as MarkdownIt from 'node_modules/markdown-it/dist/markdown-it.min.js';\r\nimport {Observable, Observer} from 'rxjs';\r\nimport * as hljs from 'highlight.js';\r\n\r\nexport class MarkdownImpl implements Markdown {\r\n  markdownIt: MarkdownIt;\r\n\r\n  constructor() {\r\n    this.markdownIt = new MarkdownIt({\r\n      highlight: (str: string, lang: string) => {\r\n        if (lang && hljs.getLanguage(lang)) {\r\n          try {\r\n            return '<pre class=\"hljs\"><code>' +\r\n              hljs.highlight(lang, str).value +\r\n              '</code></pre>';\r\n          } catch (__) {}\r\n        }\r\n        return '<pre class=\"hljs\"><code>' + this.markdownIt.utils.escapeHtml(str) + '</code>';\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * render markdown text function\r\n   * æ¸²æå½æ°\r\n   * @param markdown - markdown format text - markdownæ ¼å¼çææ¬\r\n   * @param options - use to open or close plugins\r\n   * @return - return transformation html - è¿åæ¸²æåçhtml\r\n   */\r\n  render(markdown: string, options?: MarkdownOption) {\r\n    this.disable(options);\r\n    const html = this.markdownIt.render(markdown);\r\n    this.enable(options);\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * fn: ä¼ å¥çæ¹æ³å¯ä»¥å¯¹mdçåå®¹è¿è¡å¤ç, å¤çç»æç±subjectååº\r\n   * fn.md: Markdownå¯¹è±¡åå®¹é½å¨éé¢\r\n   * fm.subject: è§å¯è, å¤çç»æç±æ­¤ä¼ åº\r\n   * @param fn\r\n   */\r\n  use<T>(fn: (md: MarkdownIt, subject: Observer<T>) => void): Observable<T> {\r\n    const md = this.markdownIt;\r\n    const observable = new Observable<T>(function (subscriber) {\r\n      md.use(fn, subscriber);\r\n    });\r\n    return observable;\r\n  }\r\n\r\n  enable(option: MarkdownOption) {\r\n    if (!option) { return; }\r\n    const enableRules = Object.keys(option).filter((value => {\r\n      return !option[value];\r\n    }));\r\n    this.markdownIt.enable(enableRules);\r\n  }\r\n\r\n  disable(option: MarkdownOption) {\r\n    if (!option) { return; }\r\n    const disableRules = Object.keys(option).filter((value => {\r\n      return !option[value];\r\n    }));\r\n    this.markdownIt.disable(disableRules);\r\n  }\r\n}\r\n\r\nexport class MarkdownOptionImpl implements MarkdownOption {\r\n  anchor: boolean;\r\n}\r\n\r\ninterface Markdown {\r\n  render(markdown: string, options: any);\r\n  use<T>(fn: (md: any, observer: Observer<T>) => void);\r\n  enable(option: MarkdownOption);\r\n  disable(option: MarkdownOption);\r\n}\r\n\r\ninterface MarkdownOption {\r\n  anchor: boolean;\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {fromEvent, merge, Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\n\r\nexport class FileOperatorImpl implements FileOperator {\r\n  result: string;\r\n  private fileReader = new FileReader();\r\n  toDataURL(fileOrBlob: File | Blob): Observable<FileProgressEvent> {\r\n    this.fileReader.readAsDataURL(fileOrBlob);\r\n    return this.mergeFileReader(this.fileReader);\r\n  }\r\n\r\n  toText(fileOrBlob: File | Blob, encoding?: string): Observable<FileProgressEvent> {\r\n    this.fileReader.readAsText(fileOrBlob, encoding);\r\n    return this.mergeFileReader(this.fileReader);\r\n  }\r\n\r\n  toArrayBuffer(fileOrBlob: File | Blob): Observable<FileProgressEvent> {\r\n    this.fileReader.readAsArrayBuffer(fileOrBlob);\r\n    return this.mergeFileReader(this.fileReader);\r\n  }\r\n\r\n  toDataURLSync(fileOrBlob: File | Blob): string {\r\n    this.result = window.URL.createObjectURL(fileOrBlob);\r\n    return this.result;\r\n  }\r\n\r\n  revokeDataURLSync(): void {\r\n    window.URL.revokeObjectURL(this.result);\r\n  }\r\n\r\n  private mergeFileReader(fileReader: FileReader): Observable<FileProgressEvent> {\r\n    return merge(...[fromEvent(fileReader, 'load'),\r\n      fromEvent(fileReader, 'loadstart'),\r\n      fromEvent(fileReader, 'loadend'),\r\n      fromEvent(fileReader, 'progress'),\r\n      fromEvent(fileReader, 'error'),\r\n      fromEvent(fileReader, 'abort')])\r\n      .pipe(\r\n        map((value: ProgressEvent): FileProgressEvent => {\r\n          return Object.assign(value, {\r\n            result: fileReader.result || '',\r\n            error: fileReader.error || null\r\n          });\r\n        })\r\n      );\r\n  }\r\n}\r\n\r\nexport interface FileOperator {\r\n  toDataURL(fileOrBlob: File | Blob): Observable<FileProgressEvent>;\r\n  toText(fileOrBlob: File | Blob, encoding?: string): Observable<FileProgressEvent>;\r\n  toArrayBuffer(fileOrBlob: File | Blob): Observable<FileProgressEvent>;\r\n  toDataURLSync(fileOrBlob: File | Blob): string;\r\n  revokeDataURLSync(): void;\r\n}\r\n\r\nexport interface FileProgressEvent extends ProgressEvent {\r\n  result?: string | ArrayBuffer | null;\r\n  error?: DOMException | null;\r\n}\r\n","// @dynamic\r\nexport class TextParser {\r\n\r\n  private static _DIV = document.createElement('DIV');\r\n  static WORDS = new RegExp(/([a-zA-Z]+)|([\\u4e00-\\u9fa5])/g);\r\n\r\n  private static parse(text: string = ''): {\r\n    text: string,\r\n    words: number,\r\n    bytes: number,\r\n    lines: number\r\n  } {\r\n    const words = (text.match(TextParser.WORDS) || []).length;\r\n    let bytes = 0;\r\n    let lines = 0;\r\n    for (let i = 0; i < text.length; i++) {\r\n      if (text.charCodeAt(i) & 0xff00) {\r\n        bytes++;\r\n      } else if (text.charAt(i) === '\\n') {\r\n        lines++;\r\n      }\r\n      bytes++;\r\n    }\r\n    return {\r\n      text: text,\r\n      words: words,\r\n      bytes: bytes,\r\n      lines: lines\r\n    };\r\n  }\r\n\r\n  static parseMD(markdown: string): any {\r\n    return this.parse(markdown);\r\n  }\r\n\r\n  static parseHTML(html: string): any {\r\n    TextParser._DIV.innerHTML = html;\r\n\r\n    const result = this.parse(TextParser._DIV.textContent);\r\n    return {\r\n      text: html,\r\n      characters: result.bytes,\r\n      words: result.words,\r\n      paragraphs: result.lines\r\n    };\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport * as MarkdownIt from 'markdown-it/lib/index';\r\nimport {BehaviorSubject, Observable, Observer} from 'rxjs';\r\nimport {MarkdownImpl, MarkdownOptionImpl} from '../core/markdown/markdown';\r\nimport {FileOperatorImpl} from '../core/fileOperator';\r\nimport {map} from 'rxjs/operators';\r\nimport {TextParser} from '../utils/textParser';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class Ngr2MarkdownService {\r\n\r\n  /**\r\n   * æ¥æ¶Markdownæºææ¬\r\n   */\r\n  originMd: BehaviorSubject<string> = new BehaviorSubject<string>('');\r\n  private resetMd: BehaviorSubject<string> = new BehaviorSubject<string>('');\r\n  /**\r\n   * è§å¯`originMd`éè¿`render`æ¹æ³æ¸²æåºçHTML\r\n   */\r\n  private renderMd: BehaviorSubject<MarkdownContent> = new BehaviorSubject(null);\r\n  private _md: MarkdownImpl;\r\n  /**\r\n   * å½åæµè§çæ é¢çSubject, BehaviorSubjectå¯æ¯æå¤æ­(å¨å¤å¤è®¢é)\r\n   */\r\n  currentHeading: BehaviorSubject<string> = new BehaviorSubject<string>(null);\r\n  /**\r\n   * @deprecated\r\n   */\r\n  currentContent: BehaviorSubject<{md: string, html: string}> = new BehaviorSubject<{md: string, html: string}>({md: '', html: ''});\r\n  /**\r\n   * åéç®å½ä¿¡æ¯çSubject\r\n   */\r\n  TOCInfo: BehaviorSubject<TOCItem> = new BehaviorSubject<TOCItem>(null);\r\n  syncScroll: BehaviorSubject<any> = new BehaviorSubject<any>(null);\r\n  currentFile: BehaviorSubject<any> = new BehaviorSubject<any>(null);\r\n\r\n  constructor() {\r\n    this._md = new MarkdownImpl();\r\n    this._md.use(this.anchor)\r\n      .subscribe((value: Array<any>) => {\r\n        const infoList = value.map((item) => {\r\n          return new TOCItem(item.content, item.indentLevel);\r\n        });\r\n        const root = new TOCItem('root', 0);\r\n        let TOCInfo = root;\r\n        for (let i = 0; i < infoList.length; i++) {\r\n          while (TOCInfo && TOCInfo.indentLevel >= infoList[i].indentLevel) {\r\n            TOCInfo = TOCInfo.parent;\r\n          }\r\n          infoList[i].parent = TOCInfo;\r\n          TOCInfo.children.push(infoList[i]);\r\n          TOCInfo = infoList[i];\r\n        }\r\n        this.TOCInfo.next(root);\r\n      });\r\n\r\n    this.originMd\r\n      .pipe(\r\n        map(mdText => {\r\n          const html = this.render(mdText);\r\n          return {\r\n            md:   mdText || null,\r\n            html,\r\n            Markdown: TextParser.parseMD(mdText),\r\n            HTML: TextParser.parseHTML(html)\r\n          };\r\n        })\r\n      ).subscribe(this.renderMd);\r\n\r\n    this.resetMd\r\n      .subscribe(this.originMd);\r\n  }\r\n\r\n  /**\r\n   * éç½®markdownææ¬\r\n   * @param md\r\n   */\r\n  reinitialization(md: string): void {\r\n    if (!md) { return; }\r\n    this.resetMd.next(md);\r\n  }\r\n\r\n  /**\r\n   * markdownææ¬éç½®å, ååºæ¶æ¯\r\n   */\r\n  observerResetMarkdown(): Observable<string> {\r\n    return this.resetMd;\r\n  }\r\n\r\n  /**\r\n   * æ´æ°markdownææ¬, ç¨äºå®æ¶é¢è§åè½\r\n   * @param md\r\n   */\r\n  updateMarkdown(md: string | Observable<string>): void {\r\n    if (!md) { return; }\r\n\r\n    if (md instanceof Observable) {\r\n      md.subscribe(this.originMd);\r\n    } else {\r\n      this.originMd.next(md);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * markdownææ¬æ´æ°å, ååºæ¶æ¯\r\n   */\r\n  observeMarkdown(): Observable<MarkdownContent> {\r\n    return this.renderMd;\r\n  }\r\n\r\n  /**\r\n   * å°Markdownåå§ææ¬æ¸²ææHTMLæ ¼å¼\r\n   * @param markdown\r\n   * @param options\r\n   */\r\n  render(markdown: string, options?: MarkdownOptionImpl): string {\r\n    if (!markdown) {\r\n      markdown = '';\r\n    }\r\n    const html = this._md.render(markdown, options);\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®å½åæµè§çæ é¢\r\n   * @param heading - æ é¢æ ç­¾çid\r\n   */\r\n  setCurrentHeading(heading: string): void {\r\n    if (this.currentHeading.getValue() !== heading) {\r\n      this.currentHeading.next(heading);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å°å½åæ¾ç¤ºçåå®¹è½¬æ¢æ`data:`url\r\n   * @param type - `markdown`/`html`: è¦è½¬æ¢çåå®¹\r\n   */\r\n  currentContentToDataUrl(type: string): FileOperatorImpl {\r\n    const fileOperator = new FileOperatorImpl();\r\n    // å¼å®¹ie11-10, ie10ä¸æ¯æFileå¯¹è±¡çæé å½æ°, æ æ³æ°å»ºFileå¯¹è±¡, æä½¿ç¨Blob\r\n    let file: Blob | File;\r\n    switch (type) {\r\n      case 'markdown':\r\n        file = new Blob([this.currentContent.getValue().md], {type: 'text/plain'});\r\n        break;\r\n      case `html`:\r\n        file = new Blob([this.currentContent.getValue().html], {type: 'text/html'});\r\n        break;\r\n      default:\r\n        file = new Blob(['null'], {type: 'text/html'});\r\n        break;\r\n    }\r\n    fileOperator.toDataURLSync(file);\r\n    return fileOperator;\r\n  }\r\n\r\n  /**\r\n   * Plugin: anchor\r\n   * è¿ä¸ªæ¹æ³åç±»åä¸ºheading_opençtokenæ·»å id, ç¨äºéç¹å®ä½\r\n   * @param md - MarkdownIt instance\r\n   * @param observer - use to push info\r\n   */\r\n  private anchor(md: MarkdownIt, observer: Observer<Array<any>>) {\r\n    md.core.ruler.push('anchor', (state => {\r\n      const infoList: Array<any> = [];\r\n      let index = 0;\r\n      state.tokens.forEach((token) => {\r\n        if (token.type === 'heading_open') {\r\n          token.attrJoin('id', index++ + '-' + token.markup.length);\r\n          infoList.push({\r\n            content: token.attrGet('id'),\r\n            indentLevel: token.markup.length\r\n          });\r\n        }\r\n      });\r\n      observer.next(infoList);\r\n    }));\r\n  }\r\n}\r\n\r\nexport interface MarkdownContent {\r\n  md: string;\r\n  html?: string;\r\n  Markdown?: {\r\n    text:   string,\r\n    bytes:  number,\r\n    words:  number,\r\n    lines:  number\r\n  };\r\n  HTML?: {\r\n    text:       string,\r\n    characters: number,\r\n    words:      number,\r\n    paragraphs: number\r\n  };\r\n}\r\n/**\r\n * ç®å½(TOC)çæçä½ç½®\r\n * start: TOCå¨åå®¹å·¦è¾¹\r\n * end: å³è¾¹\r\n */\r\ntype TocPos = 'left' | 'right';\r\n/**\r\n * æ¨¡å¼\r\n * preview: é¢è§æ¨¡å¼\r\n * edit: ç¼è¾æ¨¡å¼\r\n */\r\ntype Mode = 'preview' | 'edit';\r\n\r\nexport class EditorOption {\r\n  static MODE: Mode = 'edit';\r\n  static ANCHOR = false;\r\n  static TOc = false;\r\n  static TOOL_BAR = false;\r\n  static DIRECTION: TocPos = 'left';\r\n  static HEIGHT = '800px';\r\n  static THEME_COLOR = '#3f51b5';\r\n  static BODY_CLASS_NAME = 'markdown-body';\r\n\r\n  mode: Mode;\r\n  anchor: boolean;\r\n  TOC: boolean;\r\n  toolBar: boolean;\r\n  direction: TocPos;\r\n  /**\r\n   * container height property\r\n   */\r\n  height: string;\r\n  /**\r\n   * container toc active color property\r\n   */\r\n  themeColor: string;\r\n  bodyClassName: string;\r\n\r\n  constructor(mode: Mode            = EditorOption.MODE,\r\n            anchor: boolean         = EditorOption.ANCHOR,\r\n              TOC: boolean          = EditorOption.TOc,\r\n              toolBar: boolean      = EditorOption.TOOL_BAR,\r\n              direction: TocPos     = EditorOption.DIRECTION,\r\n              height: string        = EditorOption.HEIGHT,\r\n              themeColor: string    = EditorOption.THEME_COLOR,\r\n              bodyClassName: string = EditorOption.BODY_CLASS_NAME\r\n  ) {\r\n    this.mode =           mode;\r\n    this.anchor =         anchor;\r\n    this.TOC =            TOC;\r\n    this.toolBar =        toolBar;\r\n    this.direction =      direction;\r\n    this.height =         height;\r\n    this.themeColor =     themeColor;\r\n    this.bodyClassName =  bodyClassName;\r\n  }\r\n\r\n  static instanceOf(value: EditorOption) {\r\n    return new EditorOption(\r\n      value.mode          || EditorOption.MODE,\r\n      value.anchor        || EditorOption.ANCHOR,\r\n      value.TOC           || EditorOption.TOc,\r\n      value.toolBar       || EditorOption.TOOL_BAR,\r\n      value.direction     || EditorOption.DIRECTION,\r\n      value.height        || EditorOption.HEIGHT,\r\n      value.themeColor    || EditorOption.THEME_COLOR,\r\n      value.bodyClassName || EditorOption.BODY_CLASS_NAME,\r\n    );\r\n  }\r\n}\r\n\r\nexport class TOCItem {\r\n  content: string;\r\n  indentLevel: number;\r\n  parent: TOCItem;\r\n  children: Array<TOCItem>;\r\n\r\n  constructor(content: string, indentLevel: number) {\r\n    this.content      = content;\r\n    this.indentLevel  = indentLevel;\r\n    this.children     = new Array<TOCItem>();\r\n  }\r\n}\r\n","export class SyncScroll {\r\n\r\n  private _el: HTMLElement;\r\n  queryString: string;\r\n  headingsInfo: Array<{\r\n    id: string,\r\n    pairId: string,\r\n    el: HTMLElement,\r\n    offsetTop: number,\r\n    height: number\r\n  }>;\r\n  suffix: string;\r\n\r\n  generateId: (node: Node, index: number, nodeList: NodeListOf<Node>) => string;\r\n\r\n  constructor(el: HTMLElement,\r\n              suffix: string,\r\n              generateIdFun: (node: Node, index: number, nodeList: NodeListOf<Node>) => string = node => (node as HTMLElement).id) {\r\n    this._el          = el;\r\n    this.suffix       = suffix;\r\n    this.generateId   = generateIdFun;\r\n\r\n    this.headingsInfo = [];\r\n  }\r\n\r\n  syncScrollByHeading(headingElType: 'tag' | 'class' = 'tag',\r\n                      headingKeys: Array<string> = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']) {\r\n\r\n    switch (headingElType) {\r\n      case 'class':\r\n        this.queryString = headingKeys.map(value => '.' + value).join(',');\r\n        break;\r\n      case 'tag':\r\n      default:\r\n        this.queryString = headingKeys.join(',');\r\n    }\r\n\r\n    this._update(this.queryString);\r\n  }\r\n\r\n  updateHeadingsInfo() {\r\n    this._update(this.queryString);\r\n  }\r\n\r\n  currentHeading(scrollTop: number = this._el.scrollTop): {\r\n    headingInfo: {\r\n      id: string,\r\n      pairId: string,\r\n      el: HTMLElement,\r\n      offsetTop: number,\r\n      height: number\r\n    },\r\n    scrollTop: number\r\n  } {\r\n    if (this.headingsInfo) { return this._curHeading(scrollTop); }\r\n    return null;\r\n  }\r\n\r\n  getPairHeading(pairId: string): {\r\n    headingInfo: {\r\n      id: string,\r\n      pairId: string,\r\n      el: HTMLElement,\r\n      offsetTop: number,\r\n      height: number\r\n    },\r\n    scrollTop: number\r\n  } {\r\n    for (let i = 0; i < this.headingsInfo.length; i++) {\r\n      if (this.headingsInfo[i].pairId === pairId) {\r\n        return {\r\n          headingInfo: this.headingsInfo[i],\r\n          scrollTop: this._el.scrollTop\r\n        };\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private _curHeading(scrollTop: number): {\r\n    headingInfo: {\r\n      id: string,\r\n      pairId: string,\r\n      el: HTMLElement,\r\n      offsetTop: number,\r\n      height: number\r\n    },\r\n    scrollTop: number\r\n  } {\r\n    if (this.headingsInfo.length <= 0) { return null; }\r\n\r\n    const el = this.headingsInfo.reduce((previousValue, currentValue) => {\r\n      if (currentValue.offsetTop > scrollTop) {\r\n        return previousValue;\r\n      }\r\n      if ((scrollTop - previousValue.offsetTop) > (scrollTop - currentValue.offsetTop)) {\r\n        return currentValue;\r\n      } else {\r\n        return previousValue;\r\n      }\r\n    });\r\n\r\n    return {\r\n      headingInfo: el,\r\n      scrollTop: scrollTop\r\n    };\r\n  }\r\n\r\n  private _update(queryString: string) {\r\n    const nodeList = this._el.querySelectorAll(queryString);\r\n\r\n    if (!nodeList || nodeList.length <= 0) { return; }\r\n\r\n    this.headingsInfo = [];\r\n\r\n    for (let i = 0; i < nodeList.length; i++) {\r\n      const curNode = nodeList[i] as HTMLElement;\r\n      const nextNodeOffset = (i + 1) >= nodeList.length ? this._el.scrollHeight : (nodeList[i + 1] as HTMLElement).offsetTop;\r\n\r\n      const pairId = this.generateId(curNode, i, nodeList);\r\n\r\n      this.headingsInfo.push({\r\n        id: pairId + '-' + this.suffix,\r\n        pairId: pairId,\r\n        el: curNode,\r\n        offsetTop: curNode.offsetTop,\r\n        height: nextNodeOffset - curNode.offsetTop\r\n      });\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Component, ElementRef,\r\n  Input, OnInit, ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport {EditorOption, Ngr2MarkdownService} from './service/ngr2-markdown.service';\r\nimport {fromEvent} from 'rxjs';\r\nimport {distinctUntilChanged, filter, map} from 'rxjs/operators';\r\nimport {SyncScroll} from './core/syncScroll';\r\n\r\n@Component({\r\n  selector: 'nb-ngr2-markdown',\r\n  templateUrl: './ngr2-markdown.component.html',\r\n  styleUrls: [\r\n    './ngr2-markdown.component.css',\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class Ngr2MarkdownComponent implements OnInit {\r\n  @ViewChild('markdownBody', {\r\n    read: ElementRef\r\n  }) markdownBody: ElementRef;\r\n  /**\r\n   * markdownè½¬æ¢åçhtmlææ¬\r\n   */\r\n  _html: string;\r\n  /**\r\n   * éç½®åæ°\r\n   */\r\n  _options: EditorOption;\r\n\r\n  syncScroll: SyncScroll;\r\n\r\n  @Input()\r\n  set markdown(value: string) {\r\n    this.markdownService.updateMarkdown(value);\r\n  }\r\n  @Input()\r\n  set options(value: EditorOption) {\r\n    this._options = EditorOption.instanceOf(value);\r\n  }\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.syncScroll = new SyncScroll(\r\n      this.markdownBody.nativeElement,\r\n      'pre',\r\n      (node, index) => index + '-' + ((node as HTMLElement).tagName.charCodeAt(1) - 48)\r\n    );\r\n    this.syncScroll.syncScrollByHeading();\r\n\r\n    this.markdownService.observeMarkdown()\r\n      .subscribe(value => {\r\n        // æ´æ°innerHTML\r\n        this._html = value.html;\r\n        // this.updateHeadingsInfo();\r\n        // éæ°åå§åä¸äºéè¦è§å¾æ¸²æç»ææè½è·åçå¯¹è±¡çå¼\r\n        // this.reinitialization();\r\n        setTimeout(() => {\r\n          this.syncScroll.updateHeadingsInfo();\r\n        });\r\n      });\r\n\r\n    fromEvent(this.markdownBody.nativeElement, 'scroll')\r\n      .pipe(\r\n        filter(() => this.syncScroll.headingsInfo && this.syncScroll.headingsInfo.length > 0),\r\n        map(() => this.syncScroll.currentHeading()),\r\n        distinctUntilChanged()\r\n      )\r\n      .subscribe(value => {\r\n      });\r\n  }\r\n}\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {Ngr2MarkdownService, TOCItem} from '../service/ngr2-markdown.service';\r\n\r\n@Component({\r\n  selector: 'nb-side-toc',\r\n  templateUrl: './side-toc.component.html',\r\n  styleUrls: ['./side-toc.component.css']\r\n})\r\nexport class SideTocComponent implements OnInit {\r\n  @Input() currentHeading: string;\r\n  @Input() themeColor = '#3f51b5';\r\n  TOCInfo: TOCItem;\r\n  constructor(\r\n    private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markdownService.currentHeading.subscribe({\r\n      next: (value => {\r\n        this.currentHeading = value;\r\n      })\r\n    });\r\n    this.markdownService.TOCInfo.subscribe({\r\n      next: (value => {\r\n        this.TOCInfo = value;\r\n      })\r\n    });\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport {DomSanitizer, SafeHtml, SafeUrl} from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'safe'\r\n})\r\nexport class HTMLPipePipe implements PipeTransform {\r\n\r\n  constructor(private domSanitizer: DomSanitizer) {\r\n  }\r\n\r\n  /**\r\n   * use DomSanitizer allow insert outside HTML\r\n   * ä½¿ç¨DomSanitizeråè®¸æå¥å¤é¨çHTML\r\n   * @param value - html content htmlåå®¹\r\n   * @param args = ç¬¬ä¸ä¸ªåæ°æ¯åå®¹ç±»å`html/url` é»è®¤ä¸º `html`\r\n   * @return - transformed html content htmlåæ¢åçåå®¹\r\n   */\r\n  transform(value: any, ...args: any[]): SafeHtml | SafeUrl {\r\n    const type = args[0];\r\n    switch (type) {\r\n      case 'html':\r\n        return this.domSanitizer.bypassSecurityTrustHtml(value);\r\n      case 'url':\r\n        return this.domSanitizer.bypassSecurityTrustUrl(value);\r\n      default:\r\n        return this.domSanitizer.bypassSecurityTrustHtml(value);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\n\r\n@Pipe({\r\n  name: 'md'\r\n})\r\nexport class MdPipe implements PipeTransform {\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService) {\r\n  }\r\n\r\n  transform(value: string, args?: any): any {\r\n    return this.markdownService.render(value, {anchor: false});\r\n  }\r\n\r\n}\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {FileOperatorImpl} from '../core/fileOperator';\r\n\r\n@Component({\r\n  selector: 'nb-tool-bar',\r\n  templateUrl: './tool-bar.component.html',\r\n  styleUrls: ['./tool-bar.component.css']\r\n})\r\nexport class ToolBarComponent implements OnInit, OnDestroy {\r\n\r\n  mdHref: string;\r\n  htmlHref: string;\r\n  title: string;\r\n  titleSubscribe: Subscription;\r\n  hrefSubscribe: Subscription;\r\n  constructor(\r\n    private markdownService: Ngr2MarkdownService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.titleSubscribe = this.markdownService.TOCInfo\r\n      .subscribe(value => this.title = value.content);\r\n    let MdFileOperator: FileOperatorImpl;\r\n    let HTMLFileOperator: FileOperatorImpl;\r\n    this.hrefSubscribe = this.markdownService.currentContent\r\n      .subscribe(value => {\r\n        if (MdFileOperator) { MdFileOperator.revokeDataURLSync(); }\r\n        if (HTMLFileOperator) { HTMLFileOperator.revokeDataURLSync(); }\r\n        MdFileOperator = this.markdownService.currentContentToDataUrl('markdown');\r\n        HTMLFileOperator = this.markdownService.currentContentToDataUrl('html');\r\n        this.mdHref = MdFileOperator.result;\r\n        this.htmlHref = HTMLFileOperator.result;\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.titleSubscribe.unsubscribe();\r\n    this.hrefSubscribe.unsubscribe();\r\n  }\r\n}\r\n","import {ExtRenderInfo} from './markdwonRenderer';\r\n\r\n// @dynamic\r\nexport class MarkdownMarker {\r\n\r\n  static headingRegExp = new RegExp(/^\\s*(#{1,6})\\s+.*\\s*$/);\r\n  static blockQuoteRegExp = new RegExp(/^\\s*>.*/);\r\n  static listItemRegExp = new RegExp(/^(\\d+|[*+\\-])\\s.*/);\r\n  static codeBlockRegExp = new RegExp(/^`{1,3}\\w*$/);\r\n\r\n  constructor() {\r\n  }\r\n\r\n  /**\r\n   * å¤æ­æ¯å¦ç¬¦åMarkdownè§å\r\n   * @param text - è¦å¤æ­çå­ç¬¦ä¸²\r\n   */\r\n  testMarks(text: string): MarkType {\r\n    if (MarkdownMarker.headingRegExp.test(text)) {\r\n      return MarkType.HEADING;\r\n    } else if (MarkdownMarker.blockQuoteRegExp.test(text)) {\r\n      return MarkType.BLOCK_QUOTE;\r\n    } else if (MarkdownMarker.listItemRegExp.test(text)) {\r\n      return MarkType.LIST_ITEM;\r\n    } else if (MarkdownMarker.codeBlockRegExp.test(text)) {\r\n      return MarkType.CODE_BLOCK;\r\n    } else {\r\n      return MarkType.DEFAULT;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ä¼ å¥ç¬¦åheadingçå­ç¬¦ä¸²ï¼è¿åè§£æçæ°æ®(`#`å·ä¸ªæ°)\r\n   * @param text - headingå­ç¬¦ä¸²\r\n   */\r\n  parseHeading(text: string): ExtRenderInfo {\r\n    if (!text) { return; }\r\n    let length;\r\n    length = MarkdownMarker.headingRegExp[Symbol.match](text)[1].length;\r\n\r\n    return {\r\n      headingLevel: length\r\n    };\r\n  }\r\n}\r\n\r\nexport enum MarkType {\r\n  HEADING     = 'heading',\r\n  BLOCK_QUOTE = 'block quote',\r\n  LIST_ITEM   = 'list item',\r\n  CODE_BLOCK  = 'code block',\r\n  CODE_INLINE = 'code inline',\r\n  NOTHING     = 'nothing',\r\n  DEFAULT     = 'default'\r\n}\r\n","import {MarkType} from './markdownMarker';\r\n\r\nexport class MarkdownRenderer {\r\n\r\n  curEl: HTMLElement;\r\n  curRange: Range;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  /**\r\n   * æ¸²æ`Range`\r\n   * @param range - è¦æ¸²æç`Range`\r\n   * @param type - æ¸²æçç±»å\r\n   * @param extra - é¢å¤ä¿¡æ¯\r\n   */\r\n  renderRange(range: Range, type: MarkType, extra?: ExtRenderInfo) {\r\n    this.curRange = range;\r\n    return this.renderEl(this._getRangeEl(range), type, extra);\r\n  }\r\n\r\n  /**\r\n   * æ¸²æ`HTMLElement`\r\n   * @param el - è¦æ¸²æç`HTMLElement`\r\n   * @param type - æ¸²æç±»å\r\n   * @param extra - é¢å¤ä¿¡æ¯\r\n   */\r\n  renderEl(el: HTMLElement, type: MarkType, extra?: ExtRenderInfo) {\r\n    this.curEl = el;\r\n    switch (type) {\r\n      case MarkType.HEADING:\r\n        this._heading(extra);\r\n        break;\r\n      // case MarkType.BLOCK_QUOTE:\r\n      //   this._blockQuote(extra);\r\n      //   break;\r\n      // case MarkType.LIST_ITEM:\r\n      //   this._listItem(extra);\r\n      //   break;\r\n      // case MarkType.CODE_BLOCK:\r\n      //   this._codeBlock(extra);\r\n      //   break;\r\n      // case MarkType.CODE_INLINE:\r\n      //   this._codeInline(extra);\r\n      //   break;\r\n      case MarkType.DEFAULT:\r\n      default:\r\n        this._default(extra);\r\n        break;\r\n    }\r\n  }\r\n\r\n  private _heading(extra?: ExtRenderInfo) {\r\n    const level = extra && extra.headingLevel || 1;\r\n    if (this.curEl.className === 'h' + level) { return; }\r\n    this.curEl.className = 'h' + level;\r\n  }\r\n\r\n  private _blockQuote(extra?: ExtRenderInfo) {\r\n    if (this.curEl.className === 'blockquote') { return; }\r\n    this.curEl.className = 'blockquote';\r\n  }\r\n\r\n  private _listItem(extra?: ExtRenderInfo) {\r\n    if (this.curEl.className === 'li') { return; }\r\n    this.curEl.className = 'li';\r\n  }\r\n\r\n  private _codeBlock(extra?: ExtRenderInfo) {\r\n    if (this.curEl.className === 'code') { return; }\r\n\r\n    if (this.curEl.parentElement.className !== 'pre') {\r\n      this.curEl.className = 'pre';\r\n      const offset = this.curRange.startOffset;\r\n      const parEl = document.createElement('DIV');\r\n      parEl.appendChild(this.curRange.startContainer);\r\n      parEl.className = 'code';\r\n\r\n      this.curEl.appendChild(parEl);\r\n      this.curRange.setStart(parEl, offset);\r\n    } else {\r\n      this.curEl.className = 'code';\r\n    }\r\n  }\r\n\r\n  private _codeInline(extra?: ExtRenderInfo) {\r\n  }\r\n\r\n  private _default(extra?: ExtRenderInfo) {\r\n    if (this.curEl.className !== 'p') {\r\n      this.curEl.className = 'p';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åRangeçæå¨çåç´ èç¹(éææ¬èç¹)\r\n   * @param range - range\r\n   */\r\n  private _getRangeEl(range: Range): HTMLElement {\r\n    const startEl = range.startContainer;\r\n    let el: HTMLElement;\r\n\r\n    if (startEl.nodeType === Node.TEXT_NODE) {\r\n      el = startEl.parentElement;\r\n    } else if (startEl.nodeType === Node.ELEMENT_NODE) {\r\n      el = startEl as HTMLElement;\r\n    }\r\n\r\n    return el;\r\n  }\r\n}\r\n\r\nexport interface ExtRenderInfo {\r\n  headingLevel?: number;\r\n  [key: string]: any;\r\n}\r\n","import {Component, ElementRef, OnInit, ViewChild, ViewEncapsulation} from '@angular/core';\r\nimport {Observable, Subject} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged} from 'rxjs/operators';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {MarkdownMarker, MarkType} from '../core/markdown/markdownMarker';\r\nimport {MarkdownRenderer} from '../core/markdown/markdwonRenderer';\r\nimport {SyncScroll} from '../core/syncScroll';\r\n\r\n@Component({\r\n  selector: 'nb-edit-box',\r\n  templateUrl: './edit-box.component.html',\r\n  styleUrls: ['./edit-box.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class EditBoxComponent implements OnInit {\r\n\r\n  @ViewChild('editArea', {read: ElementRef}) editAreaRef: ElementRef;\r\n  @ViewChild('editWindow', {read: ElementRef}) editWindowRef: ElementRef;\r\n\r\n  private _editArea: HTMLElement;\r\n  private _selection: Selection;\r\n  private contentChange: Subject<string> = new Subject<string>();\r\n  private marker: MarkdownMarker;\r\n  private renderer: MarkdownRenderer;\r\n\r\n  private get _range() { return this._selection.getRangeAt(0); }\r\n\r\n  syncScroll: SyncScroll;\r\n\r\n  set content(value: string) {\r\n    if (!value || value.length <= 0) {\r\n      this._editArea.innerHTML = '<div><br></div>';\r\n    } else {\r\n      this._editArea.innerText = value;\r\n    }\r\n  }\r\n  get content(): string {\r\n    console.log({\r\n      before: this._editArea.innerText,\r\n      after: this._editArea.innerText.replace(/\\n\\n/g, '\\n')\r\n    });\r\n    return this._editArea.innerText.replace(/\\n\\n/g, '\\n');\r\n  }\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._editArea  = this.editAreaRef.nativeElement;\r\n    this._editArea.focus();\r\n    this._selection = document.getSelection();\r\n\r\n    this.syncScroll = new SyncScroll(\r\n      this.editWindowRef.nativeElement,\r\n      'edit',\r\n      (node, index) => index + '-' + ((node as HTMLElement).className.charCodeAt(1) - 48)\r\n    );\r\n    this.syncScroll.syncScrollByHeading('class');\r\n    // const sk = new ShortcutKey(this._editArea);\r\n\r\n    this.marker   = new MarkdownMarker();\r\n    this.renderer = new MarkdownRenderer();\r\n\r\n    this.bindMdService();\r\n    this.bindMutationObserver();\r\n  }\r\n\r\n  keyUp(event: KeyboardEvent) {\r\n    const text = this._range.startContainer.textContent;\r\n    const type = this.marker.testMarks(text);\r\n\r\n    switch (type) {\r\n      case MarkType.HEADING:\r\n        this.renderer.renderRange(this._range, type, this.marker.parseHeading(text));\r\n        break;\r\n      default:\r\n        this.renderer.renderRange(this._range, type);\r\n        break;\r\n    }\r\n  }\r\n\r\n  paste(event: ClipboardEvent) {\r\n    const text = event.clipboardData.getData('text');\r\n    document.execCommand('insertText', false, text);\r\n    const children = this._editArea.children;\r\n    for (let i = 0; i < children.length; i++) {\r\n      const type = this.marker.testMarks(children[i].textContent);\r\n\r\n      switch (type) {\r\n        case MarkType.HEADING:\r\n          this.renderer.renderEl(children[i] as HTMLElement, type, this.marker.parseHeading(children[i].textContent));\r\n          break;\r\n        default:\r\n          this.renderer.renderEl(children[i] as HTMLElement, type);\r\n          break;\r\n      }\r\n    }\r\n    this.syncScroll.updateHeadingsInfo();\r\n    event.preventDefault();\r\n  }\r\n  /**\r\n   * è®¢éMarkdownServiceçä¸äºSubject/Observable\r\n   */\r\n  private bindMdService(): void {\r\n    // è®¢ééç½®äºä»¶\r\n    this.markdownService.observerResetMarkdown()\r\n      .subscribe(md => {\r\n        this._editArea.innerHTML = '<div><br></div>';\r\n        this._editArea.focus();\r\n\r\n        document.execCommand('insertText', false, md);\r\n        const children = this._editArea.children;\r\n        for (let i = 0; i < children.length; i++) {\r\n          const type = this.marker.testMarks(children[i].textContent);\r\n\r\n          switch (type) {\r\n            case MarkType.HEADING:\r\n              this.renderer.renderEl(children[i] as HTMLElement, type, this.marker.parseHeading(children[i].textContent));\r\n              break;\r\n            default:\r\n              this.renderer.renderEl(children[i] as HTMLElement, type);\r\n              break;\r\n          }\r\n        }\r\n        this.syncScroll.updateHeadingsInfo();\r\n        // this.content = md;\r\n      });\r\n\r\n    this.markdownService\r\n      .updateMarkdown(this.observeText(200));\r\n  }\r\n\r\n  /**\r\n   * è§å¯ææ¬çåå\r\n   * @param time - å»¶è¿ååºçæ¶é´\r\n   */\r\n  private observeText(time?: number): Observable<string> {\r\n    if (!time) {\r\n      return this.contentChange.asObservable();\r\n    }\r\n    return this.contentChange\r\n      .pipe(\r\n        distinctUntilChanged(),\r\n        debounceTime(time)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * ç»å®å¹¶å¼å¯MutationObserver, è§¦åæ¶å°markdownææ¬åéå°`mdChange`\r\n   */\r\n  private bindMutationObserver() {\r\n    const _observer = new MutationObserver((mutations: Array<MutationRecord>, observer: MutationObserver) => {\r\n      this.syncScroll.updateHeadingsInfo();\r\n      this.contentChange.next(this.content);\r\n    });\r\n\r\n    _observer.observe(this._editArea, {\r\n      subtree: true,\r\n      childList: true,\r\n      characterData: true,\r\n      attributes: true\r\n    });\r\n  }\r\n}\r\n","import {concat, from, Observable, Subscriber} from 'rxjs';\r\nimport {mergeMap, scan} from 'rxjs/operators';\r\nimport {el} from '@angular/platform-browser/testing/src/browser_util';\r\n\r\n// @dynamic\r\nexport class IndexedDB {\r\n  static O_S_STRUCT = [\r\n    {\r\n      name: 'testStore',\r\n      optionalParameters: {\r\n        keyPath: 'id'\r\n      },\r\n      indexes: [\r\n        {\r\n          name: 'storeName',\r\n          keyPath: 'storeName',\r\n          options: {\r\n            unique: false\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  private _db: IDBDatabase;\r\n  private objectStoreStructs: Array<IndexedDBStruct>;\r\n\r\n  private constructor(dbName: string = 'testDB',\r\n                      objectStoreStructs: Array<IndexedDBStruct> = IndexedDB.O_S_STRUCT,\r\n                      subscriber: Subscriber<IndexedDB>\r\n  ) {\r\n    this.objectStoreStructs = objectStoreStructs;\r\n\r\n    const request = window.indexedDB.open(dbName);\r\n    request.onerror = (event: Event) => {\r\n      alert('Database error: ' + (<IDBOpenDBRequest> event.target).error);\r\n    };\r\n\r\n    request.onsuccess  = (event: Event): any => {\r\n      console.log(`IndexedDB open success`);\r\n      this._db = request.result;\r\n      subscriber.next(this);\r\n    };\r\n\r\n    /**\r\n     * use to initial database\r\n     * @param event\r\n     */\r\n    request.onupgradeneeded = (event: IDBVersionChangeEvent) => {\r\n      console.log(`IndexedDB upgrade need`);\r\n      this._db = request.result;\r\n\r\n      this.objectStoreStructs.forEach(store => {\r\n        const objectStore: IDBObjectStore = this._db.createObjectStore(store.name, store.optionalParameters);\r\n        if (store.indexes) {\r\n          store.indexes.forEach(index => {\r\n            objectStore.createIndex(\r\n              index.name,\r\n              index.keyPath || index.name,\r\n              index.options);\r\n          });\r\n        }\r\n      });\r\n    };\r\n  }\r\n\r\n  static instenceof(dbName: string = 'testDB',\r\n                    objectStoreStructs: Array<IndexedDBStruct> = IndexedDB.O_S_STRUCT\r\n  ): Observable<IndexedDB> {\r\n    return new Observable(subscriber => {\r\n      const indexedDB = new IndexedDB(dbName, objectStoreStructs, subscriber);\r\n    });\r\n  }\r\n  /**\r\n   * get object store specify name and mode\r\n   * @param storeName\r\n   * @param mode\r\n   */\r\n  getObjectStore(storeName: string, mode: IDBTransactionMode): IndexedDBStore {\r\n    return new IndexedDBStore(this._db.transaction(storeName, mode).objectStore(storeName));\r\n  }\r\n}\r\n\r\nexport class IndexedDBStore {\r\n  /**\r\n   * IndexedDB ObjectStore represent a object store (like table in sql database)\r\n   */\r\n  objectStore: IDBObjectStore;\r\n\r\n  constructor(objectStore: IDBObjectStore) {\r\n    this.objectStore = objectStore;\r\n  }\r\n\r\n  add<T>(data: T): Observable<IndexedDBEvent<IDBValidKey>> {\r\n    return new Observable<IndexedDBEvent<IDBValidKey>>((subscriber: Subscriber<IndexedDBEvent<IDBValidKey>>) => {\r\n      const request: IDBRequest<IDBValidKey> = this.objectStore.add(data);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * return Observable object send IndexedDBEvent multiple time\r\n   * @param data - add to store object array\r\n   */\r\n  addAll<T>(data: T[]): Observable<IndexedDBEvent<Array<IDBValidKey>>> {\r\n    const addObservables: Array<Observable<IndexedDBEvent<IDBValidKey>>> = data.map(\r\n      (item: T): Observable<IndexedDBEvent<IDBValidKey>> => this.add(item));\r\n    return this._concat_scan<IDBValidKey>(...addObservables);\r\n  }\r\n\r\n  /**\r\n   * return Observable object send IndexedDBEvent\r\n   * if IndexedDBEvent.type is IndexedDBEventType.SUCCESS then get data from IndexedDBEvent.data\r\n   * @param key\r\n   */\r\n  getById<T>(key: IDBValidKey): Observable<IndexedDBEvent<T>> {\r\n    return new Observable<IndexedDBEvent<T>>((subscriber: Subscriber<IndexedDBEvent<T>>) => {\r\n      const request: IDBRequest<T> = this.objectStore.get(key);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * å¼å®¹ie11-10, ie10ä¸æ¯æIndexedDB.getAll()æ¹æ³, ç¨openCursoræ¿ä»£\r\n   * [IndexedDB.IDBObjectStore]{@link https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore}\r\n   */\r\n  getAll<T>(): Observable<IndexedDBEvent<Array<T>>> {\r\n    const observable = new Observable<IndexedDBEvent<T>>((subscriber: Subscriber<IndexedDBEvent<T>>) => {\r\n      const request: IDBRequest<IDBCursorWithValue> = this.objectStore.openCursor();\r\n\r\n      request.onsuccess = (event: Event) => {\r\n        const cursor = request.result;\r\n        if (cursor) {\r\n          subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.COMPLETE, 1, 1, cursor.value));\r\n          cursor.continue();\r\n        } else {\r\n          subscriber.complete();\r\n        }\r\n      };\r\n      request.onerror = (event: Event) => {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.ERROR, 0, 0));\r\n        subscriber.complete();\r\n      };\r\n      // this.initRequest<Array<T>>(request, subscriber);\r\n    });\r\n    return this.getCount()\r\n      .pipe(\r\n        mergeMap((value: IndexedDBEvent<number>) => this._from_scan(observable, value.data))\r\n      );\r\n  }\r\n  /**\r\n   * return Observable object will send IndexedDBEvent multiple time\r\n   * will add T to IndexedDBEvent.data every time\r\n   * @param keys - ids\r\n   */\r\n  getAllById<T>(...keys: Array<IDBValidKey>): Observable<IndexedDBEvent<Array<T>>> {\r\n    const getObservables: Array<Observable<IndexedDBEvent<T>>> = keys.map(\r\n      (item: IDBValidKey): Observable<IndexedDBEvent<T>> => this.getById(item));\r\n    return this._concat_scan(...getObservables);\r\n  }\r\n\r\n  /**\r\n   * like getAllById but parameter type is IDBIndex\r\n   * @param indexName - index name\r\n   */\r\n  getAllByIndex<T>(indexName: string): Observable<IndexedDBEvent<Array<T>>> {\r\n    const index = this.objectStore.index(indexName);\r\n    const observable = new Observable<IndexedDBEvent<T>>((subscriber: Subscriber<IndexedDBEvent<T>>) => {\r\n      const request: IDBRequest<IDBCursorWithValue> = index.openCursor();\r\n      request.onsuccess = (event: Event) => {\r\n        const cursor: IDBCursorWithValue = request.result;\r\n        if (cursor) {\r\n          subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.COMPLETE, 1, 1, <T> cursor.value));\r\n          cursor.continue();\r\n        } else {\r\n          subscriber.complete();\r\n        }\r\n      };\r\n      request.onerror = (event: Event) => {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.ERROR, 0, 0));\r\n        subscriber.complete();\r\n      };\r\n    });\r\n\r\n    return this.getCount(index)\r\n      .pipe(\r\n        mergeMap((value: IndexedDBEvent<number>) => this._from_scan(observable, value.data))\r\n      );\r\n  }\r\n\r\n  /**\r\n   * return observable object send IndexedDBEvent\r\n   * if success IndexedDBEvent.data is updated object primary key\r\n   * @param data\r\n   */\r\n  update<T>(data: T): Observable<IndexedDBEvent<IDBValidKey>> {\r\n    return new Observable<IndexedDBEvent<IDBValidKey>>((subscriber: Subscriber<IndexedDBEvent<IDBValidKey>>) => {\r\n      const request: IDBRequest<IDBValidKey> = this.objectStore.put(data);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * return observable object send IndexedDBEvent multiple time\r\n   * every time will add success updated object primary key to IndexedDBEvent.data\r\n   * @param data\r\n   */\r\n  updateAll<T>(data: T[]): Observable<IndexedDBEvent<Array<IDBValidKey>>> {\r\n    const updateObservables: Array<Observable<IndexedDBEvent<IDBValidKey>>> = data.map(\r\n      (item: T): Observable<IndexedDBEvent<IDBValidKey>> => this.update(item));\r\n    return this._concat_scan<IDBValidKey>(...updateObservables);\r\n  }\r\n\r\n  /**\r\n   * delete\r\n   * if success return IndexedDBEvent.data type is undefined\r\n   * @param key\r\n   */\r\n  delete(key: IDBValidKey | IDBKeyRange): Observable<IndexedDBEvent<undefined>> {\r\n    return new Observable<IndexedDBEvent<undefined>>((subscriber: Subscriber<IndexedDBEvent<undefined>>) => {\r\n      const request: IDBRequest<undefined> = this.objectStore.delete(key);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  deleteAll(...keys: (IDBValidKey | IDBKeyRange)[]): Observable<IndexedDBEvent<Array<IDBValidKey>>> {\r\n    const deleteObservables: Array<Observable<IndexedDBEvent<IDBValidKey>>> = keys.map(\r\n      (item: IDBValidKey | IDBKeyRange): Observable<IndexedDBEvent<IDBValidKey>> => this.delete(item));\r\n    return this._concat_scan<IDBValidKey>(...deleteObservables);\r\n  }\r\n\r\n  /**\r\n   * return observable object send IndexedDBEvent, IndexedDBEvent.data is IDBObjectStore or IDBIndex contain element's count\r\n   * @param object\r\n   * @param key\r\n   */\r\n  getCount(object?: IDBIndex, key?: IDBValidKey | IDBKeyRange): Observable<IndexedDBEvent<number>> {\r\n    return new Observable((subscriber: Subscriber<IndexedDBEvent<number>>) => {\r\n      const request: IDBRequest<number> = object === undefined ? this.objectStore.count() : object.count();\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  private initRequest<T>(request: IDBRequest<T>, subscriber: Subscriber<IndexedDBEvent<T | DOMException>>): void {\r\n    request.onsuccess = () => {\r\n      if (request.result !== undefined) {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.COMPLETE, 1, 1, request.result));\r\n      } else {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.ERROR, 0, 0));\r\n      }\r\n      subscriber.complete();\r\n    };\r\n    // requeståºéè¿åéè¯¯ä¿¡æ¯\r\n    request.onerror = (event: Event) => {\r\n      subscriber.next(new IndexedDBEvent<DOMException>(IndexedDBEventType.ERROR, 0, 0, request.error));\r\n      subscriber.complete();\r\n    };\r\n  }\r\n\r\n  /**\r\n   * create observable use rxjs from function then use scan operator\r\n   * return custom event(IndexedDBEvent)\r\n   * @param observable\r\n   * @param total\r\n   */\r\n  private _from_scan<T>(observable: Observable<IndexedDBEvent<T>>, total: number): Observable<IndexedDBEvent<Array<T>>> {\r\n    return observable\r\n      .pipe(\r\n        scan<IndexedDBEvent<T>, IndexedDBEvent<Array<T>>>(\r\n          (acc: IndexedDBEvent<Array<T>>, value: IndexedDBEvent<T>): IndexedDBEvent<Array<T>> => {\r\n            if (value.type !== IndexedDBEventType.ERROR) {\r\n              acc.loaded++;\r\n              acc.data.push(value.data);\r\n              if (acc.loaded === acc.total) { acc.type = IndexedDBEventType.COMPLETE; }\r\n            } else {\r\n              acc.type = IndexedDBEventType.ERROR;\r\n              acc.loaded = 0;\r\n            }\r\n            return acc;\r\n          },\r\n          new IndexedDBEvent<Array<T>>(IndexedDBEventType.PENDING, 0, total, new Array<T>()))\r\n      );\r\n  }\r\n\r\n  /**\r\n   * connect observable use rxjs concat function(not Operator) then use scan operator\r\n   * return custom event(event: IndexedDBEvent)\r\n   * @param observables\r\n   */\r\n  private _concat_scan<T>(...observables: Array<Observable<IndexedDBEvent<T>>>): Observable<IndexedDBEvent<Array<T>>> {\r\n    const total = observables.length;\r\n    return concat(...observables)\r\n      .pipe(\r\n        scan<IndexedDBEvent<T>, IndexedDBEvent<Array<T>>>(\r\n          (acc: IndexedDBEvent<Array<T>>, value: IndexedDBEvent<T>): IndexedDBEvent<Array<T>> => {\r\n            if (value.type !== IndexedDBEventType.ERROR) {\r\n              acc.loaded++;\r\n              acc.data.push(value.data);\r\n              if (acc.loaded === acc.total) { acc.type = IndexedDBEventType.COMPLETE; }\r\n            } else {\r\n              acc.type = IndexedDBEventType.ERROR;\r\n              acc.loaded = 0;\r\n            }\r\n            return acc;\r\n          },\r\n          new IndexedDBEvent<Array<T>>(IndexedDBEventType.PENDING, 0, total, new Array<T>()))\r\n      );\r\n  }\r\n}\r\n\r\nexport interface IndexedDBStruct {\r\n  name: string;\r\n  optionalParameters: IDBObjectStoreParameters;\r\n  indexes: Array<{\r\n    name: string,\r\n    keyPath?: string,\r\n    options: IDBIndexParameters\r\n  }>;\r\n}\r\n/**\r\n * IndexedDB function return value\r\n * use to flag IndexedDB event status and loaded status\r\n */\r\nexport class IndexedDBEvent<T> {\r\n  type: IndexedDBEventType;\r\n  loaded: number;\r\n  total: number;\r\n  data: T;\r\n\r\n  constructor(type: IndexedDBEventType, loaded: number, total: number, data?: T) {\r\n    this.type = type;\r\n    this.loaded = loaded;\r\n    this.total = total;\r\n    this.data = data === undefined ? undefined : data;\r\n  }\r\n}\r\n\r\nexport enum IndexedDBEventType {\r\n  PENDING = 'Pending',\r\n  SUCCESS = 'Success',\r\n  ERROR = 'Error',\r\n  COMPLETE = 'Complete'\r\n}\r\n","export class Tree<T extends TreeableNode> {\r\n\r\n  private nodeMap: { [key: number]: Array<T> };\r\n  private nodes: Array<T>;\r\n  rootNode: TreeNode<T>;\r\n\r\n  constructor(nodes: Array<T>\r\n  ) {\r\n    this.nodes = nodes;\r\n\r\n    this.nodeMap = {};\r\n    this.initMap();\r\n    this.rootNode = this.generateTree();\r\n  }\r\n\r\n  /**\r\n   * çækey: ç¶èç¹id, value: ç¶èç¹idä¸ºkeyçèç¹çMap\r\n   */\r\n  private initMap(): void {\r\n    for (let i = 0; i < this.nodes.length; i++) {\r\n      const node = this.nodes[i];\r\n\r\n      if (!this.nodeMap[node.parentId]) { this.nodeMap[node.parentId] = []; }\r\n      this.nodeMap[node.parentId].push(node);\r\n    }\r\n  }\r\n\r\n  private generateTree(id: number = -1, data?: T, parentId: number = -1, type: string = 'root'): TreeNode<T> {\r\n    const node = new TreeNode<T>();\r\n    node.id       = id;\r\n    node.data     = data;\r\n    node.parentId = parentId;\r\n    node.type     = type;\r\n    node.children = [];\r\n\r\n    const children = this.nodeMap[id];\r\n    if (!children) { return node; }\r\n\r\n    for (let i = 0; i < children.length; i++) {\r\n      node.push(this.generateTree(children[i].id, children[i], id, children[i].type));\r\n    }\r\n    return node;\r\n  }\r\n\r\n  recursionChildNodes(parentId: number): Array<T> {\r\n    if (!this.nodeMap[parentId]) { return []; }\r\n    const arr = [];\r\n    for (let i = 0; i < this.nodeMap[parentId].length; i++) {\r\n      const node = this.nodeMap[parentId][i];\r\n      arr.push(node);\r\n      arr.push(...this.recursionChildNodes(node.id));\r\n    }\r\n    return arr;\r\n  }\r\n}\r\n\r\nexport class TreeNode<T extends TreeableNode> implements TreeableNode {\r\n\r\n  id: number;\r\n  parentId: number;\r\n  type: string;\r\n  children: Array<TreeNode<T>>;\r\n  data: T;\r\n\r\n  constructor(id?: number,\r\n              parentId?: number,\r\n              type?: string,\r\n              data?: T\r\n  ) {\r\n    this.id       = id;\r\n    this.parentId = parentId;\r\n    this.type     = type;\r\n    this.data     = data;\r\n  }\r\n\r\n  push(node: TreeNode<T>): TreeNode<T> {\r\n    this.children.push(node);\r\n    return node;\r\n  }\r\n}\r\n\r\nexport interface TreeableNode {\r\n  id: number;\r\n  parentId: number;\r\n  type: string;\r\n  [key: string]: any;\r\n}\r\n","import {Component, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {IndexedDB, IndexedDBEvent, IndexedDBEventType, IndexedDBStruct} from '../core/indexedDB/indexedDB';\r\nimport {Tree, TreeableNode} from '../core/tree/tree';\r\nimport {concatMap} from 'rxjs/operators';\r\nimport {of} from 'rxjs';\r\nimport {TreeNodeComponent} from '../tree/tree-node/tree-node.component';\r\n\r\n@Component({\r\n  selector: 'nb-file-browser',\r\n  templateUrl: './file-browser.component.html',\r\n  styleUrls: [\r\n    './file-browser.component.css'\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class FileBrowserComponent implements OnInit {\r\n\r\n  /**\r\n   * è¾å¥æ¡æ¨¡æ¿\r\n   */\r\n  private inputArea: HTMLInputElement;\r\n  /**\r\n   * ç¨äºåå§åçIndexedDBæ°æ®åºç»æ\r\n   */\r\n  private indexedDBStructs: Array<IndexedDBStruct> = [\r\n    {\r\n      name: 'markdown_article',\r\n      optionalParameters: {\r\n        keyPath: 'id',\r\n        autoIncrement: true\r\n      },\r\n      indexes: [\r\n        {\r\n          name: 'parentId',\r\n          keyPath: 'parentId',\r\n          options: {\r\n            unique: false\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n  private indexedDB: IndexedDB;\r\n  /**\r\n   * è¢«éæ©çèç¹\r\n   */\r\n  private selectedNode: {el: Element, data: TreeableNode};\r\n  fileTree: Tree<TreeableNode>;\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService,\r\n              private renderer: Renderer2\r\n  ) {\r\n    // åå»ºè¾å¥æ¡æ¨¡æ¿\r\n    const inputAreaLi: HTMLInputElement = renderer.createElement('LI');\r\n    this.renderer.addClass(inputAreaLi, 'fb-li');\r\n    this.renderer.addClass(inputAreaLi, 'fb-li_create');\r\n    const inputAreaI: HTMLElement = renderer.createElement('I');\r\n    this.renderer.addClass(inputAreaI, 'material-icons');\r\n    this.renderer.addClass(inputAreaI, 'md-18');\r\n    this.renderer.addClass(inputAreaI, 'md-dark');\r\n    this.renderer.appendChild(inputAreaI, this.renderer.createText('edit'));\r\n    const inputAreaInput: HTMLElement = renderer.createElement('INPUT');\r\n    this.renderer.addClass(inputAreaInput, 'fb-li_create-input');\r\n    this.renderer.appendChild(inputAreaLi, inputAreaI);\r\n    this.renderer.appendChild(inputAreaLi, inputAreaInput);\r\n\r\n    this.inputArea = inputAreaLi;\r\n  }\r\n\r\n  ngOnInit() {\r\n    // è·åæ°æ®åºå®ä¾\r\n    IndexedDB.instenceof('ngr2-markdown-db', this.indexedDBStructs)\r\n      .subscribe(db => {\r\n        this.indexedDB = db;\r\n\r\n        const store = this.indexedDB.getObjectStore('markdown_article', 'readwrite');\r\n        // æ°æ®åºä¸ºç©ºé»è®¤æå¥ä¸¤æ¡æ°æ®\r\n        store.getCount()\r\n          .pipe(\r\n            concatMap(value => {\r\n              if (value.data === 0) {\r\n                return store.addAll([new Folder(), new Article()]);\r\n              }\r\n              return of(new IndexedDBEvent(IndexedDBEventType.COMPLETE, 1, 1));\r\n            })\r\n          )\r\n          .subscribe(value => {\r\n            // è·åæ°æ®åºä¸­çæææä»¶\r\n            this.refreshArticles().then(() => {\r\n              // æ¾å°æè¿ä¿®æ¹çArticle\r\n              const currentFile = this.fileTree.recursionChildNodes(-1)\r\n                .filter((file: TreeableNode) => file.type !== 'folder')\r\n                .reduce(\r\n                  (previousValue: Article, currentValue: Article) =>\r\n                    previousValue.lastModifiedTime > currentValue.lastModifiedTime ? previousValue : currentValue\r\n                );\r\n\r\n              // åéå½åçArticle\r\n              this.markdownService.currentFile.next(currentFile);\r\n              this.markdownService.reinitialization((currentFile as Article).content);\r\n            });\r\n          });\r\n      });\r\n  }\r\n\r\n  createFile(): void {\r\n    const prtId = this.selectedNode &&\r\n      (this.selectedNode.data.type === 'folder' ? this.selectedNode.data.id : this.selectedNode.data.parentId) ||\r\n      null;\r\n    const parent = this.selectedNode &&\r\n      (this.selectedNode.data.type === 'folder' ?\r\n        this.selectedNode.el.parentElement.querySelector('ul') : this.selectedNode.el.parentElement.parentElement) ||\r\n      null;\r\n\r\n    const cloneEl = this.inputArea.cloneNode(true);\r\n\r\n    if (!parent || !prtId || !cloneEl) { console.error('unable create file'); }\r\n\r\n    this.renderer.listen(cloneEl, 'keyup', (ev: KeyboardEvent) => {\r\n      switch (ev.code) {\r\n        case 'Enter':\r\n          this.indexedDB\r\n            .getObjectStore('markdown_article', 'readwrite')\r\n            .add(new Article(prtId, 'article', 'ce', (<HTMLInputElement> ev.target).value))\r\n            .subscribe(value => {\r\n              this.refreshArticles();\r\n              this.renderer.removeChild(parent, cloneEl);\r\n            });\r\n      }\r\n    });\r\n    this.renderer.appendChild(parent, cloneEl);\r\n    (<HTMLElement> cloneEl).querySelector('input').focus();\r\n  }\r\n\r\n  createFolder(): void {\r\n    if (this.selectedNode.data.type !== 'folder') { return; }\r\n\r\n    const prtId = this.selectedNode &&\r\n      this.selectedNode.data.id ||\r\n      null;\r\n    const parent = this.selectedNode &&\r\n      this.selectedNode.el.parentElement.querySelector('ul') ||\r\n      null;\r\n\r\n    const cloneEl = this.inputArea.cloneNode(true);\r\n\r\n    if (!parent || !prtId || !cloneEl) { console.error('unable create folder'); }\r\n\r\n    this.renderer.listen(cloneEl, 'keyup', (ev: KeyboardEvent) => {\r\n      switch (ev.code) {\r\n        case 'Enter':\r\n          this.indexedDB\r\n            .getObjectStore('markdown_article', 'readwrite')\r\n            .add(new Folder(prtId, 'folder', (<HTMLInputElement> ev.target).value))\r\n            .subscribe(value => {\r\n              this.refreshArticles();\r\n              this.renderer.removeChild(parent, cloneEl);\r\n            });\r\n      }\r\n    });\r\n    this.renderer.appendChild(parent, cloneEl);\r\n    (<HTMLElement> cloneEl).querySelector('input').focus();\r\n  }\r\n\r\n  rename(): void {\r\n    const parent = (this.selectedNode && this.selectedNode.el.parentElement) ||\r\n      null;\r\n\r\n    const type = this.selectedNode.data.type;\r\n\r\n    const cloneEl = this.inputArea.cloneNode(true);\r\n\r\n    this.renderer.listen(cloneEl, 'keyup', (ev: KeyboardEvent) => {\r\n      switch (ev.code) {\r\n        case 'Enter':\r\n          const value = (<HTMLInputElement> ev.target).value;\r\n          this.selectedNode.data[type === 'folder' ? 'name' : 'title'] = value;\r\n          this.indexedDB\r\n            .getObjectStore('markdown_article', 'readwrite')\r\n            .update(this.selectedNode.data)\r\n            .subscribe(() => {\r\n              this.refreshArticles();\r\n              this.renderer.removeChild(parent, cloneEl);\r\n              this.selectedNode = null;\r\n            });\r\n      }\r\n    });\r\n    parent.replaceChild(cloneEl, this.selectedNode.el);\r\n    (<HTMLElement> cloneEl.lastChild).focus();\r\n  }\r\n\r\n  delete(): void {\r\n    const children = this.fileTree.recursionChildNodes(this.selectedNode.data.id);\r\n    this.indexedDB.getObjectStore('markdown_article', 'readwrite')\r\n      .deleteAll(...children.map(value => value.id), this.selectedNode.data.id)\r\n      .subscribe(value => this.refreshArticles());\r\n  }\r\n\r\n  close(): void {\r\n    console.log('close');\r\n  }\r\n\r\n  select(el: HTMLElement, node: TreeableNode): void {\r\n\r\n    if (this.selectedNode) {\r\n      if (this.selectedNode.el === el) {\r\n        this.selectedNode.el.classList.remove('fb-li_selected');\r\n        this.selectedNode = null;\r\n      } else {\r\n        el.classList.add('fb-li_selected');\r\n        this.selectedNode.el.classList.remove('fb-li_selected');\r\n        this.selectedNode = {el, data: node};\r\n      }\r\n    } else {\r\n      el.classList.add('fb-li_selected');\r\n      this.selectedNode = {el, data: node};\r\n    }\r\n    console.log(this.selectedNode);\r\n  }\r\n\r\n  open(el: HTMLElement, node: TreeableNode): void {\r\n    this._save(this.markdownService.currentFile.value);\r\n    this.markdownService.reinitialization(node.content);\r\n    this.markdownService.currentFile.next(node);\r\n  }\r\n\r\n  expanded(treeNode: TreeNodeComponent) {\r\n    const data = <Folder> treeNode.data.data;\r\n    data.isExpanded = treeNode.isExpanded;\r\n    this.indexedDB.getObjectStore('markdown_article', 'readwrite')\r\n      .update(data)\r\n      .subscribe(value => console.log(value));\r\n  }\r\n\r\n  private _save(data: TreeableNode) {\r\n    (data as Article).content = this.markdownService.originMd.value;\r\n    this.indexedDB\r\n      .getObjectStore('markdown_article', 'readwrite')\r\n      .update(data)\r\n      .subscribe(() => {\r\n        this.refreshArticles();\r\n        console.log('save success');\r\n      });\r\n  }\r\n  private refreshArticles(): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.indexedDB.getObjectStore('markdown_article', 'readwrite')\r\n        .getAll<any>()\r\n        .subscribe(value => {\r\n          if (value.type === IndexedDBEventType.COMPLETE) {\r\n            console.log(value);\r\n            this.fileTree = new Tree(value.data);\r\n            resolve(value);\r\n          }\r\n        }, error => reject(error));\r\n    });\r\n  }\r\n}\r\n\r\nexport class Article implements TreeableNode {\r\n  static AUTHOR   = 'Author';\r\n  static TITLE    = 'Default Title';\r\n  static CONTENT  = '# Default Title';\r\n\r\n  id: number;\r\n  parentId: number;\r\n  type: string;\r\n  author: string;\r\n  title: string;\r\n  content: string;\r\n  createTime: Date;\r\n  lastModifiedTime: Date;\r\n\r\n  constructor(parentId: number  = -1,\r\n              type: string      = 'article',\r\n              author: string    = Article.AUTHOR,\r\n              title: string     = Article.TITLE,\r\n              content: string   = Article.CONTENT,\r\n  ) {\r\n    this.parentId         = parentId;\r\n    this.type             = type;\r\n    this.author           = author;\r\n    this.title            = title;\r\n    this.content          = content;\r\n    this.createTime       = new Date();\r\n    this.lastModifiedTime = this.createTime;\r\n  }\r\n}\r\n\r\nexport class Folder implements TreeableNode {\r\n  static NAME = 'folderName';\r\n\r\n  id: number;\r\n  parentId: number;\r\n  type: string;\r\n  name: string;\r\n  isExpanded: boolean;\r\n\r\n  constructor(parentId: number    = -1,\r\n              type: string        = 'folder',\r\n              name: string        = Folder.NAME,\r\n              isExpanded: boolean = true\r\n  ) {\r\n    this.parentId   = parentId;\r\n    this.type       = type;\r\n    this.name       = name;\r\n    this.isExpanded = isExpanded;\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {filter} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'nb-status-bar',\r\n  templateUrl: './status-bar.component.html',\r\n  styleUrls: ['./status-bar.component.css']\r\n})\r\nexport class StatusBarComponent implements OnInit {\r\n\r\n  mdInfo;\r\n  htmlInfo;\r\n  fileInfo;\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markdownService.observeMarkdown()\r\n      .subscribe(allinfo => {\r\n        this.mdInfo   = allinfo.Markdown;\r\n        this.htmlInfo = allinfo.HTML;\r\n      });\r\n\r\n    this.markdownService.currentFile\r\n      .subscribe(info => this.fileInfo = info);\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'nb-control-bar',\r\n  templateUrl: './control-bar.component.html',\r\n  styleUrls: ['./control-bar.component.css']\r\n})\r\nexport class ControlBarComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {FileOperatorImpl} from '../core/fileOperator';\r\n\r\n@Component({\r\n  selector: 'nb-menu',\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.css']\r\n})\r\nexport class MenuComponent implements OnInit {\r\n\r\n  private fileOperator: FileOperatorImpl;\r\n  constructor(private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fileOperator = new FileOperatorImpl();\r\n  }\r\n\r\n  downloadMarkdown() {\r\n    const unsubscribe = this.markdownService.observeMarkdown()\r\n      .subscribe(value => {\r\n        console.log(value);\r\n        const file = new Blob([value.Markdown.text], {type: 'text/plain'});\r\n        const dataUrl = this.fileOperator.toDataURLSync(file);\r\n        const anchor: HTMLAnchorElement = <HTMLAnchorElement> document.createElement('A');\r\n        anchor.download = 'Markdown.md';\r\n        anchor.href = dataUrl;\r\n        anchor.click();\r\n      });\r\n    unsubscribe.unsubscribe();\r\n  }\r\n\r\n  downloadHTML() {\r\n    const unsubscribe = this.markdownService.observeMarkdown()\r\n      .subscribe(value => {\r\n        const htmlWindow = window.open('', '');\r\n        document.head.querySelectorAll('meta, style').forEach(el => {\r\n          htmlWindow.document.head.innerHTML += el.outerHTML;\r\n        });\r\n        htmlWindow.document.body.innerHTML = `<article class=\"markdown-body\" style=\"font-size: 14px;height: auto;overflow: visible;\">`\r\n          + value.HTML.text\r\n          + `</article>`;\r\n        const html = htmlWindow.document.documentElement.innerHTML;\r\n        htmlWindow.close();\r\n\r\n        const file = new Blob([html], {type: 'text/html'});\r\n        const dataUrl = this.fileOperator.toDataURLSync(file);\r\n        const anchor: HTMLAnchorElement = <HTMLAnchorElement> document.createElement('A');\r\n        anchor.download = 'HTML.html';\r\n        anchor.href = dataUrl;\r\n        anchor.click();\r\n      });\r\n    unsubscribe.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   */\r\n  downloadPDF() {\r\n    const unsubscribe = this.markdownService.observeMarkdown()\r\n      .subscribe(value => {\r\n        const htmlWindow = window.open('', '');\r\n        document.head.querySelectorAll('meta, style').forEach(el => {\r\n          htmlWindow.document.head.innerHTML += el.outerHTML;\r\n        });\r\n        htmlWindow.document.body.innerHTML = `<article class=\"markdown-body\" style=\"font-size: 14px;height: auto;overflow: visible;\">`\r\n          + value.HTML.text\r\n          + `</article>`;\r\n        htmlWindow.print();\r\n        htmlWindow.close();\r\n      });\r\n    unsubscribe.unsubscribe();\r\n  }\r\n}\r\n","import {fromEvent, merge, Observable} from 'rxjs';\r\nimport {filter, map, tap, throttleTime} from 'rxjs/operators';\r\n\r\nexport enum DragAndDropEventType {\r\n  DRAG_START = 'dragstart',\r\n  DRAG = 'drag',\r\n  DRAG_END = 'dragend',\r\n  DRAG_ENTER = 'dragenter',\r\n  DRAG_OVER = 'dragover',\r\n  DRAG_LEAVE = 'dragleave',\r\n  DROP = 'drop'\r\n}\r\n\r\nexport interface DragAndDropEventOptions {\r\n  eventType: DragAndDropEventType;\r\n  listener?: (event: DragEvent) => void | boolean;\r\n  preventDefault?: boolean;\r\n  stopPropagation?: boolean;\r\n  operatorOptions?: {\r\n    throttleTime?: number,\r\n    filter?: (event: DragEvent) => boolean\r\n  };\r\n  eventOptions?: EventListenerOptions;\r\n}\r\n\r\n// @dynamic\r\nexport class DragAndDropEvent {\r\n\r\n  /* tslint:disable */\r\n  static defaultFun = event => { console.group('on ' + event.type); console.groupEnd(); };\r\n  static ALL_OPTIONS: { [key: string]: DragAndDropEventOptions } = {\r\n    'dragstart': {\r\n      eventType: DragAndDropEventType.DRAG_START,\r\n      listener: DragAndDropEvent.defaultFun\r\n    },\r\n    'drag': {\r\n      eventType: DragAndDropEventType.DRAG,\r\n      listener: DragAndDropEvent.defaultFun,\r\n      operatorOptions: {\r\n        throttleTime: 1000\r\n      }\r\n    },\r\n    'dragend': {\r\n      eventType: DragAndDropEventType.DRAG_END,\r\n      listener: DragAndDropEvent.defaultFun,\r\n    },\r\n    'dragenter': {\r\n      eventType: DragAndDropEventType.DRAG_ENTER,\r\n      listener: DragAndDropEvent.defaultFun,\r\n      preventDefault: true\r\n    },\r\n    'dragover': {\r\n      eventType: DragAndDropEventType.DRAG_OVER,\r\n      listener: DragAndDropEvent.defaultFun,\r\n      operatorOptions: {\r\n        throttleTime: 100\r\n      },\r\n      preventDefault: true\r\n    },\r\n    'drop': {\r\n      eventType: DragAndDropEventType.DROP,\r\n      listener: DragAndDropEvent.defaultFun\r\n    }\r\n  };\r\n\r\n  el: Element;\r\n  observable: Observable<DragEvent>;\r\n  options: { [key: string]: DragAndDropEventOptions };\r\n  /*tslint:enable*/\r\n\r\n  // listeners: { [key: string]: (event: DragEvent) => void | boolean };\r\n  // ondragstart:  (event: DragEvent) => void | boolean;\r\n  // ondrag:       (event: DragEvent) => void | boolean;\r\n  // ondragend:    (event: DragEvent) => void | boolean;\r\n  // ondragenter:  (event: DragEvent) => void | boolean;\r\n  // ondragover:   (event: DragEvent) => void | boolean;\r\n  // ondragleave:  (event: DragEvent) => void | boolean;\r\n  // ondrop:       (event: DragEvent) => void | boolean;\r\n\r\n  constructor(el: Element,\r\n              eventOptions: { [key: string]: DragAndDropEventOptions } = DragAndDropEvent.ALL_OPTIONS,\r\n              interceptor?: (event: DragEvent) => boolean\r\n  ) {\r\n    this.el       = el;\r\n    this.options  = eventOptions;\r\n\r\n    this.observable = this.initEvent(interceptor);\r\n  }\r\n\r\n  private initEvent(interceptor?: (event: DragEvent) => boolean): Observable<DragEvent> {\r\n    const observables = Object.getOwnPropertyNames(this.options)\r\n      .reduce<Array<Observable<DragEvent>>>((previousValue, currentValue) => {\r\n        const option = this.options[currentValue];\r\n\r\n        let eventObservable = this.addEventListener(this.el, option);\r\n\r\n        eventObservable = this.addListenFunction(eventObservable, option);\r\n\r\n        previousValue.push(eventObservable);\r\n\r\n        return previousValue;\r\n      }, []);\r\n\r\n    return merge(...observables);\r\n  }\r\n\r\n  private addEventListener(el: Element,\r\n                           option: DragAndDropEventOptions,\r\n                           resultSelector: ((...args: any[]) => any) = (args => args)\r\n  ): Observable<DragEvent> {\r\n    let observable = fromEvent(el, option.eventType, option.eventOptions, resultSelector);\r\n\r\n    observable = this.eventOptions(observable, option);\r\n    observable = this.streamOperator(observable, option);\r\n\r\n    return observable;\r\n  }\r\n\r\n  private addListenFunction(observable: Observable<DragEvent>, option: DragAndDropEventOptions): Observable<DragEvent> {\r\n    if (!option.listener) {\r\n      return observable;\r\n    }\r\n    return observable.pipe(\r\n      tap(option.listener)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®optionè®¾ç½®Eventå¯¹è±¡ä¸çæ¹æ³æå±æ§\r\n   * @param observable\r\n   * @param option\r\n   */\r\n  private eventOptions(observable: Observable<DragEvent>, option: DragAndDropEventOptions): Observable<DragEvent> {\r\n    return observable\r\n      .pipe(\r\n        map((event: DragEvent) => {\r\n          if (option.preventDefault) { event.preventDefault(); }\r\n          if (option.stopPropagation) { event.stopPropagation(); event.cancelBubble = true; }\r\n          return event;\r\n        })\r\n      );\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®optionå¯¹äºä»¶æµè¿è¡optionä¸­è®¾ç½®æä½\r\n   * @param observable\r\n   * @param option\r\n   */\r\n  private streamOperator(observable: Observable<DragEvent>, option: DragAndDropEventOptions): Observable<DragEvent> {\r\n    if (!option.operatorOptions) { return observable; }\r\n    const operator = option.operatorOptions;\r\n\r\n    if (operator.throttleTime && operator.throttleTime > 0) {\r\n      observable = observable\r\n        .pipe(throttleTime(operator.throttleTime));\r\n    }\r\n    if (operator.filter) {\r\n      observable = observable\r\n        .pipe(filter(operator.filter));\r\n    }\r\n\r\n    return observable;\r\n  }\r\n}\r\n","import {DragAndDropContainer} from './dragAndDropContainer';\r\nimport {DragAndDropEvent, DragAndDropEventType} from './dragAndDropEvent';\r\n\r\nexport class DragAndDropElement {\r\n\r\n  static ELEMENT_STYLE: CSSStyle = {\r\n    // cursor: 'grab'\r\n  };\r\n  static DEMO_STYLE: CSSStyle = {\r\n    opacity: '0.5'\r\n  };\r\n\r\n  // å³ä¸, å·¦ä¸, å·¦ä¸, å³ä¸åå«å¯¹åºçè§åº¦å¼\r\n  diagonal: {\r\n    RT_ANGLE,\r\n    LT_ANGLE,\r\n    LB_ANGLE,\r\n    RB_ANGLE\r\n  } = {\r\n    RT_ANGLE: Math.PI / 4,\r\n    LT_ANGLE: Math.PI / 4 * 3,\r\n    LB_ANGLE: Math.PI / 4 * 3 * -1,\r\n    RB_ANGLE: Math.PI / 4 * -1\r\n  };\r\n\r\n  private _el: HTMLElement;\r\n  private _parent: HTMLElement;\r\n  private _dadEvent: DragAndDropEvent;\r\n  parentContainer: DragAndDropContainer;\r\n  status: DragAndDropStatus;\r\n  clone: HTMLElement;\r\n  centerPoint: Point;\r\n  get clientRect(): ClientRect | DOMRect {\r\n    return this._el.getBoundingClientRect();\r\n  }\r\n\r\n  constructor (element: HTMLElement,\r\n               parentContainer: DragAndDropContainer,\r\n               elementStyle: CSSStyle = DragAndDropElement.ELEMENT_STYLE,\r\n               demoStyle: CSSStyle = DragAndDropElement.DEMO_STYLE,\r\n  ) {\r\n    this._el =                element               || null;\r\n    this.parentContainer =    parentContainer       || null;\r\n\r\n    this._parent  = this._el && this._el.parentElement                          || null;\r\n    this.clone    = this._el && (<HTMLElement> this._el.cloneNode(true))  || null;\r\n    Object.getOwnPropertyNames(elementStyle)\r\n      .forEach(value => {\r\n        this._el.style[value] = elementStyle[value];\r\n      });\r\n    Object.getOwnPropertyNames(demoStyle)\r\n      .forEach(value => {\r\n        this.clone.style[value] = demoStyle[value];\r\n      });\r\n\r\n    // set draggable property\r\n    this._el.draggable = true;\r\n    // add drag and drop event handler\r\n    this._dadEvent = new DragAndDropEvent(this._el,\r\n      {\r\n        'dragstart': {\r\n          eventType: DragAndDropEventType.DRAG_START,\r\n          stopPropagation: true,\r\n          listener: this.ondragstart.bind(this)\r\n        },\r\n        'drag': {\r\n          eventType: DragAndDropEventType.DRAG,\r\n          stopPropagation: true,\r\n          listener: this.ondrag.bind(this),\r\n          operatorOptions: {\r\n            throttleTime: 1000\r\n          }\r\n        },\r\n        'dragend': {\r\n          eventType: DragAndDropEventType.DRAG_END,\r\n          stopPropagation: true,\r\n          listener: this.ondragend.bind(this),\r\n        },\r\n        'dragenter': {\r\n          eventType: DragAndDropEventType.DRAG_ENTER,\r\n          listener: this.ondragenter.bind(this),\r\n          preventDefault: true,\r\n          operatorOptions: {\r\n            filter: (event) => {\r\n              if (!this.parentContainer.equals(event)) {\r\n                return false;\r\n              }\r\n              return this._el !== this.parentContainer.getDragElement()._el && this._el === event.target;\r\n            }\r\n          }\r\n        },\r\n        'dragover': {\r\n          eventType: DragAndDropEventType.DRAG_OVER,\r\n          listener: this.ondragover.bind(this),\r\n          operatorOptions: {\r\n            throttleTime: 100,\r\n            filter: (event) => {\r\n              if (!this.parentContainer.equals(event)) {\r\n                return false;\r\n              }\r\n              return this._el !== this.parentContainer.getDragElement()._el;\r\n            }\r\n          },\r\n          preventDefault: true\r\n        },\r\n        'drop': {\r\n          eventType: DragAndDropEventType.DROP,\r\n          stopPropagation: true,\r\n          listener: this.ondrop.bind(this)\r\n        }\r\n      });\r\n    this._dadEvent.observable\r\n      .subscribe(value => {});\r\n\r\n    // initial\r\n    this.status = 'none';\r\n    const rect = this.clientRect;\r\n    this.centerPoint = new Point((rect.left + rect.width / 2),\r\n      (rect.top + rect.height / 2));\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   */\r\n  reset(): void {\r\n    this.transitDemonstrationFinish(this.parentContainer.getDragElement());\r\n  }\r\n\r\n  /**\r\n   * drag start\r\n   * ç¨æ·å¼å§æå¨æ¬åç´ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragstart(ev: DragEvent) {\r\n    console.group('on drop start');\r\n    this.status = 'drag';\r\n    this.parentContainer.setDragElement(this, ev);\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag\r\n   * ç¨æ·æ­£å¨æå¨æ¬åç´ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondrag(ev: DragEvent) {\r\n    console.group('on drag');\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag end\r\n   * ç¨æ·ç»ææå¨æ¬åç´ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragend(ev: DragEvent) {\r\n    console.group('on drag end');\r\n    this.status = 'none';\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag enter\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , è¿å¥æ¬åç´ çå®¹å¨èå´æ¶è§¦å\r\n   * [ç®æ æ¾ç½®è¯´æ]{@link https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#droptargets}\r\n   * @param ev - emit event\r\n   */\r\n  private ondragenter(ev: DragEvent) {\r\n    if (!(this.parentContainer.getDragElement()._parent === this._parent && this._el === ev.target)) { return; }\r\n    if (this._el === this.parentContainer.getDragElement()._el) { return; }\r\n    console.group('on drag enter');\r\n    this.status = 'drop';\r\n    this.parentContainer.setDropElement(this);\r\n    const rect = this.clientRect;\r\n    this.diagonal.RT_ANGLE = Math.atan2(rect.height / 2, rect.width / 2);\r\n    this.diagonal.LT_ANGLE = Math.PI - this.diagonal.RT_ANGLE;\r\n    this.diagonal.LB_ANGLE = -this.diagonal.LT_ANGLE;\r\n    this.diagonal.RB_ANGLE = -this.diagonal.RT_ANGLE;\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag over\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , å¨æ¬åç´ çå®¹å¨èå´åæ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragover(ev: DragEvent) {\r\n    console.group('on drag over');\r\n    this.transitDemonstration(this.parentContainer.getDragElement(), new Point(ev.clientX, ev.clientY));\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   * drag leave\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , ç¦»å¼æ¬åç´ çå®¹å¨èå´æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragleave(ev: DragEvent) {\r\n    console.group('on drag leave');\r\n    this.status = 'none';\r\n    this.transitDemonstrationFinish(this.parentContainer.getDragElement());\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag exit\r\n   * å½æ¬åç´ åå¾ä¸åå¯æå¨æ¶è§¦å\r\n   * @deprecated\r\n   * [æªè¢«ä»»ä½æµè§å¨å®ç°]{@link https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragexit_event}\r\n   * @param ev - emit event\r\n   */\r\n  private ondragexit(ev: DragEvent) {\r\n    console.group('on drag exit');\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drop\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , å¨æ¬åç´ çå®¹å¨èå´åéæ¾é¼ æ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondrop(ev: DragEvent) {\r\n    console.group('on drop');\r\n    this.status = 'drop';\r\n    this.replaceElement(this.parentContainer.getDragElement()._el, this.parentContainer.getDragElement().clone);\r\n    console.groupEnd();\r\n  }\r\n\r\n  private insertBefore(el: Element): Element {\r\n    return this._parent.insertBefore(el, this._el);\r\n  }\r\n\r\n  /**\r\n   * `nextElementSibling`: ie8,ie9,safariä¸å¼å®¹\r\n   * è§: https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\r\n   * @param el - insert element\r\n   * @return - return inserted element\r\n   */\r\n  private insertAfter(el: Element): Element {\r\n    if (!this._el.nextElementSibling) {\r\n      return this._parent.appendChild(el);\r\n    }\r\n    return this._parent.insertBefore(el, this._el.nextElementSibling);\r\n  }\r\n\r\n  private computeDirection(point: Point): DragAndDropDirection {\r\n    this.centerPoint = new Point((this.clientRect.left + this.clientRect.width / 2),\r\n      (this.clientRect.top + this.clientRect.height / 2));\r\n    point.relaitiveTo(this.centerPoint);\r\n    const angle = Math.atan2(point.Y, point.X);\r\n    if (angle >= this.diagonal.RT_ANGLE && angle < this.diagonal.LT_ANGLE) {\r\n      return 'top';\r\n    } else if (angle >= this.diagonal.LT_ANGLE || angle < this.diagonal.LB_ANGLE) {\r\n      return 'left';\r\n    } else if (angle >= this.diagonal.LB_ANGLE && angle < this.diagonal.RB_ANGLE) {\r\n      return 'bottom';\r\n    } else {\r\n      return 'right';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¼ç¤ºé¼ æ æå¨åç´ éæ¾åçç¶æ\r\n   */\r\n  private transitDemonstration(draggedEl: DragAndDropElement, point: Point) {\r\n    const dir = this.computeDirection(point);\r\n    if ( dir === 'top' || dir === 'left') {\r\n      this.insertBefore(draggedEl._el);\r\n    } else if (dir === 'bottom' || dir === 'right') {\r\n      this.insertAfter(draggedEl._el);\r\n    }\r\n    console.log(dir);\r\n  }\r\n\r\n  /**\r\n   * æ¼ç¤ºç»æ, ç§»é¤åç´ \r\n   */\r\n  private transitDemonstrationFinish(dragElement: DragAndDropElement) {\r\n    this.removeElement(dragElement._el);\r\n  }\r\n\r\n  private removeElement(el: Element): Element {\r\n    for (let i = 0; i < this._parent.children.length; i++) {\r\n      if (this._parent.children[i] === el) {\r\n        this._parent.removeChild(el);\r\n        return el;\r\n      }\r\n    }\r\n  }\r\n\r\n  private replaceElement(newEl: Element, oldEl: Element): Element {\r\n    for (let i = 0; i < this._parent.children.length; i++) {\r\n      if (this._parent.children[i] === oldEl) {\r\n        this._parent.replaceChild(newEl, oldEl);\r\n        return oldEl;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass Point {\r\n  X: number;\r\n  Y: number;\r\n\r\n  constructor(X: number,\r\n              Y: number\r\n  ) {\r\n    this.X = X || null;\r\n    this.Y = Y || null;\r\n  }\r\n\r\n  relaitiveTo(relato: Point) {\r\n    this.X -= relato.X;\r\n    this.Y = relato.Y - this.Y;\r\n  }\r\n}\r\n\r\ntype DragAndDropStatus = 'none' | 'drag' | 'dragOver' | 'drop';\r\ntype DragAndDropDirection = 'top' | 'bottom' | 'left' | 'right' | 'center';\r\ntype CSSStyle = {\r\n  [P in keyof CSSStyleDeclaration]?: CSSStyleDeclaration[P];\r\n};\r\n","import {DragAndDropElement} from './dragAndDrop';\r\nimport {DragAndDropEvent, DragAndDropEventType} from './dragAndDropEvent';\r\nimport {assertNumber} from '@angular/core/src/render3/assert';\r\n\r\nexport class DragAndDropContainer {\r\n\r\n  private _el: HTMLElement;\r\n  private _children: HTMLCollection;\r\n  private _dragEl: DragAndDropElement;\r\n  private _dropEl: DragAndDropElement;\r\n  private _dadEvent: DragAndDropEvent;\r\n  private id: number;\r\n  DADChildren: Array<DragAndDropElement>;\r\n\r\n  constructor(element: HTMLElement\r\n  ) {\r\n    this._el =        element           || null;\r\n    this._children =  element.children  || null;\r\n\r\n    this.DADChildren = [];\r\n    for (let i = 0; i < this._children.length; i++) {\r\n      const el = new DragAndDropElement(\r\n        (<HTMLElement> this._children[i]),\r\n        this\r\n      );\r\n      this.DADChildren.push(el);\r\n    }\r\n  }\r\n\r\n  setDragElement(dragEl: DragAndDropElement, ev: DragEvent): void {\r\n    this._dragEl = dragEl;\r\n    this.id = new Date().getTime();\r\n    ev.dataTransfer.setData('text/containerid:' + this.id.toString(10), this.id.toString(10));\r\n  }\r\n\r\n  getDragElement(): DragAndDropElement {\r\n    return this._dragEl;\r\n  }\r\n\r\n  setDropElement(dropEl: DragAndDropElement): void {\r\n    this._dropEl = dropEl;\r\n  }\r\n\r\n  getDropElement(): DragAndDropElement {\r\n    return this._dropEl;\r\n  }\r\n\r\n  equals(ev: DragEvent): boolean {\r\n    let id = ev.dataTransfer.types[ev.dataTransfer.types.length - 1];\r\n\r\n    if (!id) { return false; }\r\n\r\n    id = id.split(':')[1];\r\n    return this.id === Number.parseInt(id, 10);\r\n  }\r\n}\r\n","import {AfterViewInit, Directive, ElementRef, OnInit} from '@angular/core';\r\nimport {DragAndDropContainer} from './core/dad/dragAndDropContainer';\r\n\r\n@Directive({\r\n  selector: '[nbDragAndDrop]'\r\n})\r\nexport class DragAndDropDirective implements OnInit, AfterViewInit {\r\n\r\n  private DADContainer: DragAndDropContainer;\r\n\r\n  constructor(\r\n    private el: ElementRef\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.DADContainer = new DragAndDropContainer(this.el.nativeElement);\r\n  }\r\n}\r\n","import {\n  Directive, HostListener, TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\nimport {TreeNodeComponent} from '../tree-node/tree-node.component';\n\n\n@Directive({\n  selector: '[nbTreeNodeOutlet]'\n})\nexport class TreeNodeOutletDirective {\n\n  constructor(public viewContainer: ViewContainerRef\n  ) {\n  }\n}\n\n@Directive({\n  selector: '[nbTreeNodeDef]'\n})\nexport class TreeNodeDefDirective {\n\n  constructor(\n    public templateRef: TemplateRef<any>\n  ) {\n    // view.createEmbeddedView(template);\n  }\n}\n","import {\n  Component,\n  ContentChildren,\n  Input, IterableDiffer, IterableDiffers,\n  OnInit, QueryList,\n  ViewChild, ViewContainerRef\n} from '@angular/core';\nimport {Tree, TreeableNode, TreeNode} from '../../core/tree/tree';\nimport {Article} from '../../file-browser/file-browser.component';\nimport {TreeNodeDefDirective, TreeNodeOutletDirective} from '../tree-node-directive/tree-node-def.directive';\nimport {TreeNodeComponent} from '../tree-node/tree-node.component';\n\n@Component({\n  selector: 'nb-tree',\n  templateUrl: './tree.component.html',\n  styleUrls: ['./tree.component.css']\n})\nexport class TreeComponent implements OnInit {\n\n  @ViewChild(TreeNodeOutletDirective) outlet: TreeNodeOutletDirective;\n  @ContentChildren(TreeNodeDefDirective) def: QueryList<TreeNodeDefDirective>;\n\n  private _ds: Tree<Article>;\n  private _dataDiffer: IterableDiffer<TreeNode<TreeableNode>>;\n\n  @Input()\n  set dataSource(ds: Tree<Article>) {\n    if (!ds) { return; }\n    this._ds = ds;\n    this.renderNodeChanges(this._ds.rootNode.children, this._dataDiffer, this.outlet.viewContainer);\n  }\n  get dataSource() {\n    return this._ds;\n  }\n\n  constructor(private differs: IterableDiffers) {\n    this._dataDiffer = differs.find([])\n      .create((index, item) => item);\n  }\n\n  ngOnInit() {\n  }\n\n  renderNodeChanges(data: Array<TreeNode<TreeableNode>>,\n                    dataDiffer: IterableDiffer<TreeNode<TreeableNode>> = this._dataDiffer,\n                    viewContainer: ViewContainerRef = this.outlet.viewContainer) {\n    const changes = dataDiffer.diff(data);\n    if (!changes) { return; }\n\n    changes.forEachOperation((record, previousIndex, currentIndex) => {\n      // console.log(record.previousIndex, previousIndex, record.currentIndex, currentIndex);\n      if (record.previousIndex === null) {\n        viewContainer.createEmbeddedView(this.def.first.templateRef, record.item, currentIndex);\n        TreeControl.mostRecentTreeNode.data = record.item;\n      } else if (currentIndex === null) {\n        viewContainer.remove(previousIndex);\n      } else {\n        const view = viewContainer.get(previousIndex);\n        viewContainer.move(view, currentIndex);\n      }\n    });\n  }\n}\n\nexport class TreeControl {\n  static mostRecentTreeNode: TreeNodeComponent | null = null;\n}\n","import {\n  AfterContentInit,\n  Component,\n  ContentChild,\n  Input,\n  IterableDiffer,\n  IterableDiffers,\n  OnInit\n} from '@angular/core';\nimport {TreeableNode, TreeNode} from '../../core/tree/tree';\nimport {TreeNodeOutletDirective} from '../tree-node-directive/tree-node-def.directive';\nimport {TreeComponent, TreeControl} from '../tree/tree.component';\n\n@Component({\n  selector: 'nb-tree-node',\n  templateUrl: './tree-node.component.html',\n  styleUrls: ['./tree-node.component.css']\n})\nexport class TreeNodeComponent implements OnInit, AfterContentInit {\n\n  private _dataDiffer: IterableDiffer<TreeNode<TreeableNode>>;\n\n  @Input()\n  get isExpanded() { return this._isExpanded; }\n  set isExpanded(value: boolean) {\n    console.log('isExpanded');\n    this._isExpanded = value;\n    if (this.isExpanded) {\n      this.updateChildrenNodes();\n    } else {\n      this.outlet.viewContainer.clear();\n      this._dataDiffer.diff([]);\n    }\n  }\n  private _isExpanded: boolean;\n\n  /**\n   * æ èç¹çæ°æ®\n   */\n  get data(): TreeNode<TreeableNode> { return this._data; }\n  set data(value: TreeNode<TreeableNode>) {\n    this._data = value;\n  }\n  private _data: TreeNode<TreeableNode>;\n\n  @ContentChild(TreeNodeOutletDirective) outlet: TreeNodeOutletDirective;\n\n  constructor(private _tree: TreeComponent,\n              private _differs: IterableDiffers\n  ) {\n    TreeControl.mostRecentTreeNode = this;\n    this._dataDiffer = this._differs.find([]).create();\n  }\n\n  ngOnInit() {\n    // this._tree.renderNodeChanges(this.data.children, this._dataDiffer, this.outlet.viewContainer);\n  }\n\n  ngAfterContentInit(): void {\n  }\n\n  updateChildrenNodes() {\n    this._tree.renderNodeChanges(this.data.children, this._dataDiffer, this.outlet.viewContainer);\n  }\n}\n","import {Directive, EventEmitter, HostListener, Input, Output} from '@angular/core';\nimport {TreeNodeComponent} from '../tree-node/tree-node.component';\n\n@Directive({\n  selector: '[nbTreeNodeToggle]'\n})\nexport class TreeNodeToggleDirective {\n\n  @HostListener('dblclick', ['$event'])\n  toggle(event: Event) {\n    this.treeNode.isExpanded = !this.treeNode.isExpanded;\n    event.preventDefault();\n    this.callbackFn.emit(this.treeNode);\n  }\n\n  @Output() callbackFn = new EventEmitter<TreeNodeComponent>();\n\n  constructor(private treeNode: TreeNodeComponent) {\n    console.log(treeNode);\n  }\n\n}\n","import {Directive, ElementRef, HostListener, Input, OnDestroy, OnInit} from '@angular/core';\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\nimport {SyncScroll} from '../core/syncScroll';\nimport {Subscription} from 'rxjs';\n\n@Directive({\n  selector: '[nbSyncScroll]'\n})\nexport class SyncScrollDirective implements OnInit, OnDestroy {\n\n  static mutexLock = false;\n\n  @HostListener('scroll', ['$event']) scroll = this.onScroll;\n\n  @Input() syncScrollInfo: SyncScroll;\n\n  private _el: HTMLElement;\n  private subscription: Subscription;\n\n  constructor(private markdownService: Ngr2MarkdownService,\n              el: ElementRef\n  ) {\n    this._el = el.nativeElement;\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.markdownService.syncScroll\n      .subscribe((value) => {\n        if (!value || value.headingInfo.el === this._el) { return; }\n\n        const curHeading = this.syncScrollInfo.getPairHeading(value.headingInfo.pairId);\n        const deltaHeight = value.scrollTop - value.headingInfo.offsetTop;\n        this._el.scrollTop = curHeading.headingInfo.offsetTop + (curHeading.headingInfo.height / value.headingInfo.height) * deltaHeight;\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  onScroll(event: Event) {\n    if (SyncScrollDirective.mutexLock) {\n      SyncScrollDirective.mutexLock = false;\n    } else {\n    this.markdownService.syncScroll.next(this.syncScrollInfo.currentHeading());\n      SyncScrollDirective.mutexLock = true;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\r\nimport { Ngr2MarkdownComponent } from './ngr2-markdown.component';\r\nimport { SideTocComponent } from './side-toc/side-toc.component';\r\nimport { HTMLPipePipe } from './pipe/htmlpipe.pipe';\r\nimport {BrowserModule} from '@angular/platform-browser';\r\nimport { MdPipe } from './pipe/md.pipe';\r\nimport { ToolBarComponent } from './tool-bar/tool-bar.component';\r\nimport { EditBoxComponent } from './edit-box/edit-box.component';\r\nimport { FileBrowserComponent } from './file-browser/file-browser.component';\r\nimport { StatusBarComponent } from './status-bar/status-bar.component';\r\nimport { ControlBarComponent } from './control-bar/control-bar.component';\r\nimport { MenuComponent } from './menu/menu.component';\r\nimport { DragAndDropDirective } from './drag-and-drop.directive';\r\nimport { TreeComponent } from './tree/tree/tree.component';\r\nimport { TreeNodeComponent } from './tree/tree-node/tree-node.component';\r\nimport { TreeNodeDefDirective, TreeNodeOutletDirective } from './tree/tree-node-directive/tree-node-def.directive';\r\nimport {TreeNodeToggleDirective} from './tree/tree-node-directive/tree-node-toggle.directive';\r\nimport { SyncScrollDirective } from './sync-scroll/sync-scroll.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Ngr2MarkdownComponent,\r\n    SideTocComponent,\r\n    HTMLPipePipe,\r\n    MdPipe,\r\n    ToolBarComponent,\r\n    EditBoxComponent,\r\n    FileBrowserComponent,\r\n    StatusBarComponent,\r\n    ControlBarComponent,\r\n    MenuComponent,\r\n    DragAndDropDirective,\r\n    TreeComponent,\r\n    TreeNodeComponent,\r\n    TreeNodeDefDirective,\r\n    TreeNodeOutletDirective,\r\n    TreeNodeToggleDirective,\r\n    SyncScrollDirective\r\n  ],\r\n  imports: [\r\n    BrowserModule\r\n  ],\r\n  exports: [\r\n    Ngr2MarkdownComponent,\r\n    SideTocComponent,\r\n    MdPipe\r\n  ]\r\n})\r\nexport class Ngr2MarkdownModule { }\r\n"],"names":["hljs.getLanguage","hljs.highlight","Observable","merge","fromEvent","map","BehaviorSubject","Injectable","filter","distinctUntilChanged","Component","ViewEncapsulation","ViewChild","ElementRef","Input","Pipe","DomSanitizer","Subject","debounceTime","mergeMap","scan","concat","concatMap","of","Renderer2","tap","throttleTime","Directive","ViewContainerRef","TemplateRef","IterableDiffers","ContentChildren","ContentChild","EventEmitter","HostListener","Output","NgModule","BrowserModule"],"mappings":"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"}
