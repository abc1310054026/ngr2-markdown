{"version":3,"file":"ngr2-markdown.js.map","sources":["ng://ngr2-markdown/lib/ngr2-markdown.service.ts","ng://ngr2-markdown/lib/ngr2-markdown.component.ts","ng://ngr2-markdown/lib/side-toc/side-toc.component.ts","ng://ngr2-markdown/lib/htmlpipe.pipe.ts","ng://ngr2-markdown/lib/ngr2-markdown.module.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport * as MarkdownIt from 'markdown-it/lib/index';\nimport * as hljs from 'highlight.js';\nimport {BehaviorSubject} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class Ngr2MarkdownService {\n  unitMap = {\n    exist: false,\n    child: {\n      'b': {\n        exist: false,\n        child: {\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'c': {\n        exist: false,\n        child: {\n          'i': {\n            exist: true,\n            child: {\n            }\n          },\n          'p': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'h': {\n        exist: false,\n        child: {\n          'c': {\n            exist: true,\n            child: {\n            }\n          },\n          'l': {\n            exist: true,\n            child: {\n              'r': {\n                exist: true,\n                child: {\n                }\n              }\n            }\n          },\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'i': {\n        exist: false,\n        child: {\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'm': {\n        exist: false,\n        child: {\n          'e': {\n            exist: true,\n            child: {\n              'r': {\n                exist: true,\n                child: {\n                }\n              }\n            }\n          },\n          'm': {\n            exist: true,\n            child: {\n            }\n          },\n          'c': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'n': {\n        exist: false,\n        child: {\n          'i': {\n            exist: true,\n            child: {\n              'm': {\n                exist: false,\n                child: {\n                  'v': {\n                    exist: true,\n                    child: {\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      'p': {\n        exist: false,\n        child: {\n          'a': {\n            exist: false,\n            child: {\n              'c': {\n                exist: true,\n                child: {\n                }\n              },\n            }\n          },\n        }\n      },\n      'q': {\n        exist: true,\n        child: {\n        }\n      },\n      't': {\n        exist: false,\n        child: {\n          'p': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'w': {\n        exist: false,\n        child: {\n          'v': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      },\n      'x': {\n        exist: false,\n        child: {\n          'a': {\n            exist: false,\n            child: {\n              'm': {\n                exist: false,\n                child: {\n                  'v': {\n                    exist: true,\n                    child: {\n                    }\n                  }\n                }\n              }\n            }\n          },\n          'e': {\n            exist: true,\n            child: {\n            }\n          },\n          'p': {\n            exist: true,\n            child: {\n            }\n          }\n        }\n      }\n    }\n  };\n  MarkdownIt: MarkdownIt;\n  /**\n   * å½åæµè§çæ é¢çSubject, BehaviorSubjectå¯æ¯æå¤æ­(å¨å¤å¤è®¢é)\n   */\n  currentHeading: BehaviorSubject<string> = new BehaviorSubject<string>(null);\n  /**\n   * åéç®å½ä¿¡æ¯çSubject\n   */\n  TOCInfo: BehaviorSubject<TOCItem> = new BehaviorSubject<TOCItem>(null);\n\n  constructor() {\n    this.MarkdownIt = new MarkdownIt({\n      highlight: (str: string, lang: string) => {\n        if (lang && hljs.getLanguage(lang)) {\n          try {\n            return '<pre class=\"hljs\"><code>' +\n              hljs.highlight(lang, str).value +\n              '</code></pre>';\n          } catch (__) {}\n        }\n        return '<pre class=\"hljs\"><code>' + this.MarkdownIt.utils.escapeHtml(str) + '</code>';\n      }\n    });\n    this.MarkdownIt.use(this.anchor, (value) => this.TOCInfo.next(value));\n  }\n\n  toggle(options: MarkdownOption) {\n    options.anchor ? this.MarkdownIt.enable('anchor') : this.MarkdownIt.disable('anchor');\n    options.TOC ? this.MarkdownIt.enable('anchor') : this.MarkdownIt.disable('anchor');\n  }\n\n  /**\n   * render markdown text function\n   * æ¸²æå½æ°\n   * @param markdown - markdown format text - markdownæ ¼å¼çææ¬\n   * @return - return transformation html - è¿åæ¸²æåçhtml\n   */\n  render(markdown: string): string {\n    if (typeof markdown !== 'string') {\n      markdown = '';\n    }\n    return this.MarkdownIt.render(markdown);\n  }\n\n  /**\n   * è¿ä¸ªæ¹æ³åç±»åä¸ºheading_opençtokenæ·»å id, ç¨äºéç¹å®ä½\n   * å¹¶æåidåæ é¢ç­çº§\n   * ä½¿ç¨æ¹æ³è§this.init()\n   * @param md - MarkdownIt instance\n   * @param callBack - callBack function look this.init()\n   */\n  private anchor(md: MarkdownIt, callBack: (value: TOCItem) => void) {\n    let rootTOCInfo = new TOCItem('root', 0);\n    md.core.ruler.push('anchor', (state) => {\n      const infoList: Array<TOCItem> = new Array<TOCItem>();\n      state.tokens.map((token, index, array) => {\n        if (token.type === 'heading_open') {\n          token.attrJoin('id', array[index + 1].content);\n          infoList.push(new TOCItem(token.attrGet('id'), token.markup.length));\n        }\n      });\n\n      rootTOCInfo = new TOCItem('root', 0);\n      let TOCInfo = rootTOCInfo;\n      for (let i = 0; i < infoList.length; i++) {\n        while (TOCInfo && TOCInfo.indentLevel >= infoList[i].indentLevel) {\n          TOCInfo = TOCInfo.parent;\n        }\n        infoList[i].parent = TOCInfo;\n        TOCInfo.children.push(infoList[i]);\n        TOCInfo = infoList[i];\n      }\n      callBack(rootTOCInfo);\n    });\n  }\n\n  /**\n   * è®¾ç½®å½åæµè§çæ é¢\n   * @param heading - æ é¢æ ç­¾çid\n   */\n  setCurrentHeading(heading: string): void {\n    if (this.currentHeading.getValue() !== heading) {\n      this.currentHeading.next(heading);\n    }\n  }\n\n  checkUnit(unitMap: any, str: string, caseSensitive?: boolean): {\n    unit: string,\n    number: number\n  } {\n    if (!unitMap || !str) { return; }\n    if (!caseSensitive) { str = str.toLocaleLowerCase(); }\n    let i: number, isMatch = false;\n    for (i = str.length - 1; i >= 0; i--) {\n      const ascii = str.charCodeAt(i);\n      if (ascii >= 48 && ascii <= 57) {\n        isMatch = unitMap.exist;\n        break;\n      } else {\n        if (!unitMap.child[str[i]]) { break; }\n        unitMap = unitMap.child[str[i]];\n      }\n    }\n    return isMatch ? {\n      unit: str.substr(i + 1),\n      number: Number.parseInt(str.substr(0, i + 1), 10)\n    } : null;\n  }\n}\n\nexport class MarkdownOption {\n  anchor: boolean;\n  TOC: boolean;\n}\n\nexport class TOCItem {\n  content: string;\n  indentLevel: number;\n  parent: TOCItem;\n  children: Array<TOCItem>;\n\n  constructor(content: string, indentLevel: number) {\n    this.content = content;\n    this.indentLevel = indentLevel;\n    this.children = new Array<TOCItem>();\n  }\n}\n","/*\n* æµç¨å¾\n* change `markdown` --> render `markdown` --> change `_html'\n*                                       --> change `headingInfo`\n*                                       --> init `headingElementRef`, `headingElementMarginTop`\n*                                       --> view changed `ngAfterViewChecked()` --> change `headingElementRef`\n*                                                        --> change `headingElementMarginTop`\n*                                                        --> wait view scroll --> `markdownScroll()`\n*                                                                             --> `markdownService.setCurrentBrowseHeading`\n* */\n\nimport {\n  Component,\n  ElementRef,\n  Input, OnInit, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {MarkdownOption, Ngr2MarkdownService, TOCItem} from './ngr2-markdown.service';\n\n@Component({\n  selector: 'nb-ngr2-markdown',\n  templateUrl: './ngr2-markdown.component.html',\n  styleUrls: [\n    './ngr2-markdown.component.css',\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class Ngr2MarkdownComponent implements OnInit {\n  @ViewChild('markdownBody', {\n    read: ElementRef\n  }) markdownBody: ElementRef;\n  /**\n   * markdownè½¬æ¢åçhtmlææ¬\n   */\n  _html: string;\n  /**\n   * éç½®åæ°\n   */\n  _options: MarkdownOption;\n  /**\n   * æ é¢æ ç­¾å¼ç¨çæ°ç»\n   */\n  headingElementRef: Array<HTMLElement>;\n  /**\n   * æ é¢æ ç­¾margin-topå±æ§çé®å¼å¯¹\n   * key: id, value: margin-topçpxå¼\n   */\n  headingElementMarginTop: {\n    [key: string]: number\n  };\n  @Input()\n  set markdown(value: string) {\n    // æ¸²æåºhtml\n    this._html = this.markdownService.render(value);\n    // éæ°åå§åä¸äºéè¦è§å¾æ¸²æç»ææè½è·åçå¯¹è±¡çå¼\n    this.reinitialization();\n    setTimeout(() => {\n      this.updateHeadingInfo();\n    });\n  }\n\n  @Input()\n  set options(value: MarkdownOption) {\n    this._options = value;\n    this.markdownService.toggle(this._options);\n  }\n  @Input() bodyClassName = 'markdown-body';\n  /**\n   * container height property\n   */\n  @Input() height = '800px';\n  /**\n   * container toc active color property\n   */\n  @Input() themeColor = '#3f51b5';\n\n  constructor(private markdownService: Ngr2MarkdownService\n  ) {\n  }\n\n  ngOnInit() {\n  }\n\n  reinitialization() {\n    this.headingElementMarginTop = {};\n    // åå§åæ é¢åç´ çæ°ç»\n    this.headingElementRef = new Array<HTMLElement>();\n    // é¡µé¢æ»å¨å°é¡¶é¨\n    this.markdownBody.nativeElement.scrollTop = 0;\n    // éç½®å½åæ é¢\n    this.markdownService.setCurrentHeading(null);\n  }\n\n  /**\n   * @description <b>åç´ çä½ç½®ç¨\n   * [getBoundingClientRect()]{@link https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect}è·å,\n   * è¿ä¸ªæ¹æ³å¾å°çç©å½¢ä¸ä¼åæ¬åç´ çå¤è¾¹è·(margin)</b>\n   * å¦ææ³è¦å¨æ£æµæ¶åæ¬å¤è¾¹è·, éè¦åè·åå°å¤è¾¹è·\n   * markdownåå®¹æ»å¨æ¶è§¦å\n   * åºäºç¶åç´ çé¡¶é¨ä½ç½®, å¤æ­å½åæµè§çæ é¢åå®¹\n   * éåºæ é¢åç´ (h1 ~ h6)çé¡¶é¨å¨ç¶åç´ (class=markdown)é¡¶é¨ä¹ä¸æç¸ç­çåç´ , ä½ä¸ºå½åæµè§çæ é¢\n   */\n  markdownScroll() {\n    if (this.headingElementRef === undefined\n      || this.headingElementRef === null\n      || this.headingElementRef.length <= 0) {\n      return;\n    }\n    // ç¶åç´ é¡¶é¨çåæ \n    const baseOffsetTop = (<HTMLElement> this.markdownBody.nativeElement).getBoundingClientRect().top;\n    let preRect: ClientRect;\n    let curRect: ClientRect;\n    let preMarginTop: number;\n    let curMarginTop: number;\n    const elem =  this.headingElementRef.reduce((previousValue, currentValue) => {\n      preRect = previousValue.getBoundingClientRect();\n      curRect = currentValue.getBoundingClientRect();\n      preMarginTop = this.headingElementMarginTop[previousValue.id];\n      curMarginTop = this.headingElementMarginTop[currentValue.id];\n      // è¿æ»¤å¨é¡¶é¨ä¹ä¸çæ é¢\n      if (curRect.top - baseOffsetTop - curMarginTop > 0) {\n        return previousValue;\n      }\n      // æ¾å°è·ç¦»é¡¶é¨æè¿çæ é¢\n      if ((curRect.top - baseOffsetTop - curMarginTop) > (preRect.top - baseOffsetTop - preMarginTop)) {\n        return currentValue;\n      } else {\n        return previousValue;\n      }\n    });\n    this.markdownService.setCurrentHeading(elem.id);\n  }\n\n  /**\n   * æ´æ°æ¸²æåçhtmlåå®¹ä¸­çæ é¢é¨å(h1 ~ h6)å°headingElementRef\n   */\n  updateHeadingInfo() {\n    const nodeList = this.markdownBody.nativeElement.querySelectorAll('h1, h2, h3, h4, h5, h6');\n    if (nodeList === undefined || nodeList === null) {\n      return;\n    }\n    this.headingElementRef.splice(0);\n    // Element.style.xxxåªè½è¯»åè¡åæ ·å¼\n    nodeList.forEach((value: HTMLElement) => {\n      // æåelementçæ ·å¼\n      const marginTop = this.getComputedStyle(value, 'margin-top');\n      // å»é¤px\n      marginTop.slice(0, marginTop.length - 2);\n      this.headingElementMarginTop[value.id] = Number.parseInt(marginTop, 10);\n    });\n    this.headingElementRef.push(...nodeList);\n  }\n\n  getComputedStyle(element: Element, property: string, pseudoElt?: string): string {\n    return window.getComputedStyle(element, null).getPropertyValue(property);\n  }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {Ngr2MarkdownService, TOCItem} from '../ngr2-markdown.service';\n\n@Component({\n  selector: 'nb-side-toc',\n  templateUrl: './side-toc.component.html',\n  styleUrls: ['./side-toc.component.css']\n})\nexport class SideTocComponent implements OnInit {\n  @Input() currentHeading: string;\n  @Input() themeColor = '#3f51b5';\n  TOCInfo: TOCItem;\n  constructor(\n    private markdownService: Ngr2MarkdownService\n  ) {\n  }\n\n  ngOnInit() {\n    this.markdownService.currentHeading.subscribe({\n      next: (value => {\n        this.currentHeading = value;\n      })\n    });\n    this.markdownService.TOCInfo.subscribe({\n      next: (value => {\n        this.TOCInfo = value;\n      })\n    });\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport {DomSanitizer, SafeHtml} from '@angular/platform-browser';\n\n@Pipe({\n  name: 'hTMLPipe'\n})\nexport class HTMLPipePipe implements PipeTransform {\n\n  constructor(private domSanitizer: DomSanitizer) {\n  }\n\n  /**\n   * use DomSanitizer preventing XSS\n   * ä½¿ç¨DomSanitizeré²æ­¢XSS\n   * @param value - html content htmlåå®¹\n   * @return - transformed html content htmlåæ¢åçåå®¹\n   */\n  transform(value: any): SafeHtml {\n    return this.domSanitizer.bypassSecurityTrustHtml(value);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Ngr2MarkdownComponent } from './ngr2-markdown.component';\nimport { SideTocComponent } from './side-toc/side-toc.component';\nimport { HTMLPipePipe } from './htmlpipe.pipe';\nimport {BrowserModule} from '@angular/platform-browser';\n\n@NgModule({\n  declarations: [Ngr2MarkdownComponent, SideTocComponent, HTMLPipePipe],\n  imports: [\n    BrowserModule\n  ],\n  exports: [Ngr2MarkdownComponent]\n})\nexport class Ngr2MarkdownModule { }\n"],"names":["hljs.getLanguage","hljs.highlight"],"mappings":"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"}
