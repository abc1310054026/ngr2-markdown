{"version":3,"file":"ngr2-markdown.js.map","sources":["ng://ngr2-markdown/lib/core/markdown/markdown.ts","ng://ngr2-markdown/lib/core/fileOperator.ts","ng://ngr2-markdown/lib/utils/textParser.ts","ng://ngr2-markdown/lib/service/ngr2-markdown.service.ts","ng://ngr2-markdown/lib/utils/parseUnit.ts","ng://ngr2-markdown/lib/ngr2-markdown.component.ts","ng://ngr2-markdown/lib/side-toc/side-toc.component.ts","ng://ngr2-markdown/lib/pipe/htmlpipe.pipe.ts","ng://ngr2-markdown/lib/pipe/md.pipe.ts","ng://ngr2-markdown/lib/tool-bar/tool-bar.component.ts","ng://ngr2-markdown/lib/core/shortcutKey/shortcutKeyEvent.ts","ng://ngr2-markdown/lib/core/shortcutKey/shortcutKey.ts","ng://ngr2-markdown/lib/edit-box/edit-box.component.ts","ng://ngr2-markdown/lib/core/indexedDB/indexedDB.ts","ng://ngr2-markdown/lib/file-browser/file-browser.component.ts","ng://ngr2-markdown/lib/status-bar/status-bar.component.ts","ng://ngr2-markdown/lib/control-bar/control-bar.component.ts","ng://ngr2-markdown/lib/menu/menu.component.ts","ng://ngr2-markdown/lib/core/dad/dragAndDropEvent.ts","ng://ngr2-markdown/lib/core/dad/dragAndDrop.ts","ng://ngr2-markdown/lib/core/dad/dragAndDropContainer.ts","ng://ngr2-markdown/lib/drag-and-drop.directive.ts","ng://ngr2-markdown/lib/ngr2-markdown.module.ts"],"sourcesContent":["// import * as MarkdownIt from 'markdown-it';\r\n// å¦ä¸ç¨TSç@typesåè£å¼å¥å¨ie11ä¸­æ æ³å¼å®¹, å¨æååºæ¥çvendor.jsä¸­ä¼æä¸è¡ä½¿ç¨äºç®­å¤´å½æ°çä»£ç æ¥(è¯­æ³éè¯¯)\r\n// ç´æ¥å¼å¥markdown-it.min.jså¯ä»¥é¿å\r\nimport * as MarkdownIt from 'node_modules/markdown-it/dist/markdown-it.min.js';\r\nimport {Observable, Observer} from 'rxjs';\r\nimport * as hljs from 'highlight.js';\r\n\r\nexport class MarkdownImpl implements Markdown {\r\n  markdownIt: MarkdownIt;\r\n\r\n  constructor() {\r\n    this.markdownIt = new MarkdownIt({\r\n      highlight: (str: string, lang: string) => {\r\n        if (lang && hljs.getLanguage(lang)) {\r\n          try {\r\n            return '<pre class=\"hljs\"><code>' +\r\n              hljs.highlight(lang, str).value +\r\n              '</code></pre>';\r\n          } catch (__) {}\r\n        }\r\n        return '<pre class=\"hljs\"><code>' + this.markdownIt.utils.escapeHtml(str) + '</code>';\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * render markdown text function\r\n   * æ¸²æå½æ°\r\n   * @param markdown - markdown format text - markdownæ ¼å¼çææ¬\r\n   * @param options - use to open or close plugins\r\n   * @return - return transformation html - è¿åæ¸²æåçhtml\r\n   */\r\n  render(markdown: string, options?: MarkdownOption) {\r\n    this.disable(options);\r\n    const html = this.markdownIt.render(markdown);\r\n    this.enable(options);\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * fn: ä¼ å¥çæ¹æ³å¯ä»¥å¯¹mdçåå®¹è¿è¡å¤ç, å¤çç»æç±subjectååº\r\n   * fn.md: Markdownå¯¹è±¡åå®¹é½å¨éé¢\r\n   * fm.subject: è§å¯è, å¤çç»æç±æ­¤ä¼ åº\r\n   * @param fn\r\n   */\r\n  use<T>(fn: (md: MarkdownIt, subject: Observer<T>) => void): Observable<T> {\r\n    const md = this.markdownIt;\r\n    const observable = new Observable<T>(function (subscriber) {\r\n      md.use(fn, subscriber);\r\n    });\r\n    return observable;\r\n  }\r\n\r\n  enable(option: MarkdownOption) {\r\n    if (!option) { return; }\r\n    const enableRules = Object.keys(option).filter((value => {\r\n      return !option[value];\r\n    }));\r\n    this.markdownIt.enable(enableRules);\r\n  }\r\n\r\n  disable(option: MarkdownOption) {\r\n    if (!option) { return; }\r\n    const disableRules = Object.keys(option).filter((value => {\r\n      return !option[value];\r\n    }));\r\n    this.markdownIt.disable(disableRules);\r\n  }\r\n}\r\n\r\nexport class MarkdownOptionImpl implements MarkdownOption {\r\n  anchor: boolean;\r\n}\r\n\r\ninterface Markdown {\r\n  render(markdown: string, options: any);\r\n  use<T>(fn: (md: any, observer: Observer<T>) => void);\r\n  enable(option: MarkdownOption);\r\n  disable(option: MarkdownOption);\r\n}\r\n\r\ninterface MarkdownOption {\r\n  anchor: boolean;\r\n}\r\n","import {fromEvent, merge, Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\n\r\nexport class FileOperatorImpl implements FileOperator {\r\n  result: string;\r\n  private fileReader = new FileReader();\r\n  toDataURL(fileOrBlob: File | Blob): Observable<FileProgressEvent> {\r\n    this.fileReader.readAsDataURL(fileOrBlob);\r\n    return this.mergeFileReader(this.fileReader);\r\n  }\r\n\r\n  toText(fileOrBlob: File | Blob, encoding?: string): Observable<FileProgressEvent> {\r\n    this.fileReader.readAsText(fileOrBlob, encoding);\r\n    return this.mergeFileReader(this.fileReader);\r\n  }\r\n\r\n  toArrayBuffer(fileOrBlob: File | Blob): Observable<FileProgressEvent> {\r\n    this.fileReader.readAsArrayBuffer(fileOrBlob);\r\n    return this.mergeFileReader(this.fileReader);\r\n  }\r\n\r\n  toDataURLSync(fileOrBlob: File | Blob): string {\r\n    this.result = window.URL.createObjectURL(fileOrBlob);\r\n    return this.result;\r\n  }\r\n\r\n  revokeDataURLSync(): void {\r\n    window.URL.revokeObjectURL(this.result);\r\n  }\r\n\r\n  private mergeFileReader(fileReader: FileReader): Observable<FileProgressEvent> {\r\n    return merge(...[fromEvent(fileReader, 'load'),\r\n      fromEvent(fileReader, 'loadstart'),\r\n      fromEvent(fileReader, 'loadend'),\r\n      fromEvent(fileReader, 'progress'),\r\n      fromEvent(fileReader, 'error'),\r\n      fromEvent(fileReader, 'abort')])\r\n      .pipe(\r\n        map((value: ProgressEvent): FileProgressEvent => {\r\n          return Object.assign(value, {\r\n            result: fileReader.result || '',\r\n            error: fileReader.error || null\r\n          });\r\n        })\r\n      );\r\n  }\r\n}\r\n\r\nexport interface FileOperator {\r\n  toDataURL(fileOrBlob: File | Blob): Observable<FileProgressEvent>;\r\n  toText(fileOrBlob: File | Blob, encoding?: string): Observable<FileProgressEvent>;\r\n  toArrayBuffer(fileOrBlob: File | Blob): Observable<FileProgressEvent>;\r\n  toDataURLSync(fileOrBlob: File | Blob): string;\r\n  revokeDataURLSync(): void;\r\n}\r\n\r\nexport interface FileProgressEvent extends ProgressEvent {\r\n  result?: string | ArrayBuffer | null;\r\n  error?: DOMException | null;\r\n}\r\n","// @dynamic\r\nexport class TextParser {\r\n\r\n  private static _DIV = document.createElement('DIV');\r\n  static WORDS = new RegExp(/([a-zA-Z]+)|([\\u4e00-\\u9fa5])/g);\r\n\r\n  private static parse(text: string = ''): {\r\n    text: string,\r\n    words: number,\r\n    bytes: number,\r\n    lines: number\r\n  } {\r\n    const words = (text.match(TextParser.WORDS) || []).length;\r\n    let bytes = 0;\r\n    let lines = 0;\r\n    for (let i = 0; i < text.length; i++) {\r\n      if (text.charCodeAt(i) & 0xff00) {\r\n        bytes++;\r\n      } else if (text.charAt(i) === '\\n') {\r\n        lines++;\r\n      }\r\n      bytes++;\r\n    }\r\n    return {\r\n      text: text,\r\n      words: words,\r\n      bytes: bytes,\r\n      lines: lines\r\n    };\r\n  }\r\n\r\n  static parseMD(markdown: string): any {\r\n    return this.parse(markdown);\r\n  }\r\n\r\n  static parseHTML(html: string): any {\r\n    TextParser._DIV.innerHTML = html;\r\n\r\n    const result = this.parse(TextParser._DIV.textContent);\r\n    return {\r\n      text: result.text,\r\n      character: result.bytes,\r\n      words: result.words,\r\n      paragraphs: result.lines\r\n    };\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport * as MarkdownIt from 'markdown-it/lib/index';\r\nimport {BehaviorSubject, Observable, Observer} from 'rxjs';\r\nimport {MarkdownImpl, MarkdownOptionImpl} from '../core/markdown/markdown';\r\nimport {FileOperatorImpl} from '../core/fileOperator';\r\nimport {map} from 'rxjs/operators';\r\nimport {TextParser} from '../utils/textParser';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class Ngr2MarkdownService {\r\n\r\n  /**\r\n   * æ¥æ¶Markdownæºææ¬\r\n   */\r\n  private originMd: BehaviorSubject<string> = new BehaviorSubject<string>(null);\r\n  private resetMd: BehaviorSubject<string> = new BehaviorSubject<string>(null);\r\n  /**\r\n   * è§å¯`originMd`éè¿`render`æ¹æ³æ¸²æåºçHTML\r\n   */\r\n  private renderMd: Observable<MarkdownContent>;\r\n  private _md: MarkdownImpl;\r\n  /**\r\n   * å½åæµè§çæ é¢çSubject, BehaviorSubjectå¯æ¯æå¤æ­(å¨å¤å¤è®¢é)\r\n   */\r\n  currentHeading: BehaviorSubject<string> = new BehaviorSubject<string>(null);\r\n  /**\r\n   * @deprecated\r\n   */\r\n  currentContent: BehaviorSubject<{md: string, html: string}> = new BehaviorSubject<{md: string, html: string}>({md: '', html: ''});\r\n  /**\r\n   * åéç®å½ä¿¡æ¯çSubject\r\n   */\r\n  TOCInfo: BehaviorSubject<TOCItem> = new BehaviorSubject<TOCItem>(null);\r\n\r\n  constructor() {\r\n    this._md = new MarkdownImpl();\r\n    this._md.use(this.anchor)\r\n      .subscribe((value: Array<any>) => {\r\n        const infoList = value.map((item) => {\r\n          return new TOCItem(item.content, item.indentLevel);\r\n        });\r\n        const root = new TOCItem('root', 0);\r\n        let TOCInfo = root;\r\n        for (let i = 0; i < infoList.length; i++) {\r\n          while (TOCInfo && TOCInfo.indentLevel >= infoList[i].indentLevel) {\r\n            TOCInfo = TOCInfo.parent;\r\n          }\r\n          infoList[i].parent = TOCInfo;\r\n          TOCInfo.children.push(infoList[i]);\r\n          TOCInfo = infoList[i];\r\n        }\r\n        this.TOCInfo.next(root);\r\n      });\r\n\r\n    this.renderMd = this.originMd\r\n      .pipe(\r\n        map(mdText => {\r\n          const html = this.render(mdText);\r\n          return {\r\n            md:   mdText || null,\r\n            html,\r\n            Markdown: TextParser.parseMD(mdText),\r\n            HTML: TextParser.parseHTML(html)\r\n          };\r\n        })\r\n      );\r\n\r\n    this.resetMd\r\n      .subscribe(this.originMd);\r\n  }\r\n\r\n  /**\r\n   * éç½®markdownææ¬\r\n   * @param md\r\n   */\r\n  reinitialization(md: string): void {\r\n    if (!md) { return; }\r\n    this.resetMd.next(md);\r\n  }\r\n\r\n  /**\r\n   * markdownææ¬éç½®å, ååºæ¶æ¯\r\n   */\r\n  observerResetMarkdown(): Observable<string> {\r\n    return this.resetMd;\r\n  }\r\n\r\n  /**\r\n   * æ´æ°markdownææ¬, ç¨äºå®æ¶é¢è§åè½\r\n   * @param md\r\n   */\r\n  updateMarkdown(md: string | Observable<string>): void {\r\n    if (!md) { return; }\r\n\r\n    if (md instanceof Observable) {\r\n      md.subscribe(this.originMd);\r\n    } else {\r\n      this.originMd.next(md);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * markdownææ¬æ´æ°å, ååºæ¶æ¯\r\n   */\r\n  observeMarkdown(): Observable<MarkdownContent> {\r\n    return this.renderMd;\r\n  }\r\n\r\n  /**\r\n   * å°Markdownåå§ææ¬æ¸²ææHTMLæ ¼å¼\r\n   * @param markdown\r\n   * @param options\r\n   */\r\n  render(markdown: string, options?: MarkdownOptionImpl): string {\r\n    if (!markdown) {\r\n      markdown = '';\r\n    }\r\n    const html = this._md.render(markdown, options);\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®å½åæµè§çæ é¢\r\n   * @param heading - æ é¢æ ç­¾çid\r\n   */\r\n  setCurrentHeading(heading: string): void {\r\n    if (this.currentHeading.getValue() !== heading) {\r\n      this.currentHeading.next(heading);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å°å½åæ¾ç¤ºçåå®¹è½¬æ¢æ`data:`url\r\n   * @param type - `markdown`/`html`: è¦è½¬æ¢çåå®¹\r\n   */\r\n  currentContentToDataUrl(type: string): FileOperatorImpl {\r\n    const fileOperator = new FileOperatorImpl();\r\n    // å¼å®¹ie11-10, ie10ä¸æ¯æFileå¯¹è±¡çæé å½æ°, æ æ³æ°å»ºFileå¯¹è±¡, æä½¿ç¨Blob\r\n    let file: Blob | File;\r\n    switch (type) {\r\n      case 'markdown':\r\n        file = new Blob([this.currentContent.getValue().md], {type: 'text/plain'});\r\n        break;\r\n      case `html`:\r\n        file = new Blob([this.currentContent.getValue().html], {type: 'text/html'});\r\n        break;\r\n      default:\r\n        file = new Blob(['null'], {type: 'text/html'});\r\n        break;\r\n    }\r\n    fileOperator.toDataURLSync(file);\r\n    return fileOperator;\r\n  }\r\n\r\n  /**\r\n   * Plugin: anchor\r\n   * è¿ä¸ªæ¹æ³åç±»åä¸ºheading_opençtokenæ·»å id, ç¨äºéç¹å®ä½\r\n   * @param md - MarkdownIt instance\r\n   * @param observer - use to push info\r\n   */\r\n  private anchor(md: MarkdownIt, observer: Observer<Array<any>>) {\r\n    md.core.ruler.push('anchor', (state => {\r\n      const infoList: Array<any> = [];\r\n      state.tokens.map((token, index, array) => {\r\n        if (token.type === 'heading_open') {\r\n          token.attrJoin('id', array[index + 1].content);\r\n          infoList.push({\r\n            content: token.attrGet('id'),\r\n            indentLevel: token.markup.length\r\n          });\r\n        }\r\n      });\r\n      observer.next(infoList);\r\n    }));\r\n  }\r\n}\r\n\r\nexport interface MarkdownContent {\r\n  md: string;\r\n  html?: string;\r\n  Markdown?: {\r\n    text:   string,\r\n    bytes:  number,\r\n    words:  number,\r\n    lines:  number\r\n  };\r\n  HTML?: {\r\n    text:       string,\r\n    characters: number,\r\n    words:      number,\r\n    paragraphs: number\r\n  };\r\n}\r\n/**\r\n * ç®å½(TOC)çæçä½ç½®\r\n * start: TOCå¨åå®¹å·¦è¾¹\r\n * end: å³è¾¹\r\n */\r\ntype TocPos = 'left' | 'right';\r\n/**\r\n * æ¨¡å¼\r\n * preview: é¢è§æ¨¡å¼\r\n * edit: ç¼è¾æ¨¡å¼\r\n */\r\ntype Mode = 'preview' | 'edit';\r\n\r\nexport class EditorOption {\r\n  static MODE: Mode = 'edit';\r\n  static ANCHOR = false;\r\n  static TOc = false;\r\n  static TOOL_BAR = false;\r\n  static DIRECTION: TocPos = 'left';\r\n  static HEIGHT = '800px';\r\n  static THEME_COLOR = '#3f51b5';\r\n  static BODY_CLASS_NAME = 'markdown-body';\r\n\r\n  mode: Mode;\r\n  anchor: boolean;\r\n  TOC: boolean;\r\n  toolBar: boolean;\r\n  direction: TocPos;\r\n  /**\r\n   * container height property\r\n   */\r\n  height: string;\r\n  /**\r\n   * container toc active color property\r\n   */\r\n  themeColor: string;\r\n  bodyClassName: string;\r\n\r\n  constructor(mode: Mode            = EditorOption.MODE,\r\n            anchor: boolean         = EditorOption.ANCHOR,\r\n              TOC: boolean          = EditorOption.TOc,\r\n              toolBar: boolean      = EditorOption.TOOL_BAR,\r\n              direction: TocPos     = EditorOption.DIRECTION,\r\n              height: string        = EditorOption.HEIGHT,\r\n              themeColor: string    = EditorOption.THEME_COLOR,\r\n              bodyClassName: string = EditorOption.BODY_CLASS_NAME\r\n  ) {\r\n    this.mode =           mode;\r\n    this.anchor =         anchor;\r\n    this.TOC =            TOC;\r\n    this.toolBar =        toolBar;\r\n    this.direction =      direction;\r\n    this.height =         height;\r\n    this.themeColor =     themeColor;\r\n    this.bodyClassName =  bodyClassName;\r\n  }\r\n\r\n  static instanceOf(value: EditorOption) {\r\n    return new EditorOption(\r\n      value.mode          || EditorOption.MODE,\r\n      value.anchor        || EditorOption.ANCHOR,\r\n      value.TOC           || EditorOption.TOc,\r\n      value.toolBar       || EditorOption.TOOL_BAR,\r\n      value.direction     || EditorOption.DIRECTION,\r\n      value.height        || EditorOption.HEIGHT,\r\n      value.themeColor    || EditorOption.THEME_COLOR,\r\n      value.bodyClassName || EditorOption.BODY_CLASS_NAME,\r\n    );\r\n  }\r\n}\r\n\r\nexport class TOCItem {\r\n  content: string;\r\n  indentLevel: number;\r\n  parent: TOCItem;\r\n  children: Array<TOCItem>;\r\n\r\n  constructor(content: string, indentLevel: number) {\r\n    this.content      = content;\r\n    this.indentLevel  = indentLevel;\r\n    this.children     = new Array<TOCItem>();\r\n  }\r\n}\r\n","export class ParseUnit {\r\n  static UNIT_MAP = {\r\n    exist: false,\r\n    child: {\r\n      'b': {\r\n        exist: false,\r\n        child: {\r\n          'v': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'c': {\r\n        exist: false,\r\n        child: {\r\n          'i': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          },\r\n          'p': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'h': {\r\n        exist: false,\r\n        child: {\r\n          'c': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          },\r\n          'l': {\r\n            exist: true,\r\n            child: {\r\n              'r': {\r\n                exist: true,\r\n                child: {\r\n                }\r\n              }\r\n            }\r\n          },\r\n          'v': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'i': {\r\n        exist: false,\r\n        child: {\r\n          'v': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'm': {\r\n        exist: false,\r\n        child: {\r\n          'e': {\r\n            exist: true,\r\n            child: {\r\n              'r': {\r\n                exist: true,\r\n                child: {\r\n                }\r\n              }\r\n            }\r\n          },\r\n          'm': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          },\r\n          'c': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'n': {\r\n        exist: false,\r\n        child: {\r\n          'i': {\r\n            exist: true,\r\n            child: {\r\n              'm': {\r\n                exist: false,\r\n                child: {\r\n                  'v': {\r\n                    exist: true,\r\n                    child: {\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'p': {\r\n        exist: false,\r\n        child: {\r\n          'a': {\r\n            exist: false,\r\n            child: {\r\n              'c': {\r\n                exist: true,\r\n                child: {\r\n                }\r\n              },\r\n            }\r\n          },\r\n        }\r\n      },\r\n      'q': {\r\n        exist: true,\r\n        child: {\r\n        }\r\n      },\r\n      't': {\r\n        exist: false,\r\n        child: {\r\n          'p': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'w': {\r\n        exist: false,\r\n        child: {\r\n          'v': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      },\r\n      'x': {\r\n        exist: false,\r\n        child: {\r\n          'a': {\r\n            exist: false,\r\n            child: {\r\n              'm': {\r\n                exist: false,\r\n                child: {\r\n                  'v': {\r\n                    exist: true,\r\n                    child: {\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          },\r\n          'e': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          },\r\n          'p': {\r\n            exist: true,\r\n            child: {\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  static checkUnit(str: string, unitMap: any = ParseUnit.UNIT_MAP, caseSensitive?: boolean): {\r\n    unit: string,\r\n    number: number\r\n  } {\r\n    if (!unitMap || !str) { return; }\r\n    if (!caseSensitive) { str = str.toLocaleLowerCase(); }\r\n    let i: number, isMatch = false;\r\n    for (i = str.length - 1; i >= 0; i--) {\r\n      const ascii = str.charCodeAt(i);\r\n      if (ascii >= 48 && ascii <= 57) {\r\n        isMatch = unitMap.exist;\r\n        break;\r\n      } else {\r\n        if (!unitMap.child[str[i]]) { break; }\r\n        unitMap = unitMap.child[str[i]];\r\n      }\r\n    }\r\n    return isMatch ? {\r\n      unit: str.substr(i + 1),\r\n      number: Number.parseInt(str.substr(0, i + 1), 10)\r\n    } : null;\r\n  }\r\n}\r\n","/*\r\n* æµç¨å¾\r\n* change `markdown` --> render `markdown` --> change `_html'\r\n*                                       --> change `headingInfo`\r\n*                                       --> init `headingElementRef`, `headingElementMarginTop`\r\n*                                       --> view changed `ngAfterViewChecked()` --> change `headingElementRef`\r\n*                                                        --> change `headingElementMarginTop`\r\n*                                                        --> wait view scroll --> `markdownScroll()`\r\n*                                                                             --> `markdownService.setCurrentBrowseHeading`\r\n* */\r\n\r\nimport {\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnInit,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport {EditorOption, Ngr2MarkdownService} from './service/ngr2-markdown.service';\r\nimport {fromEvent} from 'rxjs';\r\nimport {distinctUntilChanged, filter, map} from 'rxjs/operators';\r\nimport {ParseUnit} from './utils/parseUnit';\r\n\r\n@Component({\r\n  selector: 'nb-ngr2-markdown',\r\n  templateUrl: './ngr2-markdown.component.html',\r\n  styleUrls: [\r\n    './ngr2-markdown.component.css',\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class Ngr2MarkdownComponent implements OnInit {\r\n  @ViewChild('markdownBody', {\r\n    read: ElementRef\r\n  }) markdownBody: ElementRef;\r\n  /**\r\n   * markdownè½¬æ¢åçhtmlææ¬\r\n   */\r\n  _html: string;\r\n  /**\r\n   * éç½®åæ°\r\n   */\r\n  _options: EditorOption;\r\n  /**\r\n   * æ é¢æ ç­¾å¼ç¨çæ°ç»\r\n   */\r\n  headingElementRef: Array<HTMLElement>;\r\n  /**\r\n   * æ é¢æ ç­¾margin-topå±æ§çé®å¼å¯¹\r\n   * key: id, value: margin-topçpxå¼\r\n   */\r\n  headingElementMarginTop: {\r\n    [key: string]: number\r\n  };\r\n  @Input()\r\n  set markdown(value: string) {\r\n    this.markdownService.updateMarkdown(value);\r\n  }\r\n  @Input()\r\n  set options(value: EditorOption) {\r\n    this._options = EditorOption.instanceOf(value);\r\n  }\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markdownService.observeMarkdown()\r\n      .subscribe(value => {\r\n        // æ´æ°innerHTML\r\n        this._html = value.html;\r\n        // éæ°åå§åä¸äºéè¦è§å¾æ¸²æç»ææè½è·åçå¯¹è±¡çå¼\r\n        this.reinitialization();\r\n        setTimeout(() => {\r\n          this.updateHeadingInfo();\r\n        });\r\n      });\r\n    fromEvent(this.markdownBody.nativeElement, 'scroll')\r\n      .pipe(\r\n        filter(() => this.headingElementRef && this.headingElementRef.length > 0),\r\n        map(() => this.markdownScroll()),\r\n        distinctUntilChanged()\r\n      )\r\n      .subscribe(this.markdownService.currentHeading);\r\n  }\r\n\r\n  reinitialization() {\r\n    this.headingElementMarginTop = {};\r\n    // åå§åæ é¢åç´ çæ°ç»\r\n    this.headingElementRef = [];\r\n    // é¡µé¢æ»å¨å°é¡¶é¨\r\n    this.markdownBody.nativeElement.scrollTop = 0;\r\n    // éç½®å½åæ é¢\r\n    this.markdownService.setCurrentHeading(null);\r\n  }\r\n\r\n  /**\r\n   * @description <b>åç´ çä½ç½®ç¨\r\n   * [getBoundingClientRect()]{@link https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect}è·å,\r\n   * è¿ä¸ªæ¹æ³å¾å°çç©å½¢ä¸ä¼åæ¬åç´ çå¤è¾¹è·(margin)</b>\r\n   * å¦ææ³è¦å¨æ£æµæ¶åæ¬å¤è¾¹è·, éè¦åè·åå°å¤è¾¹è·\r\n   * markdownåå®¹æ»å¨æ¶è§¦å\r\n   * åºäºç¶åç´ çé¡¶é¨ä½ç½®, å¤æ­å½åæµè§çæ é¢åå®¹\r\n   * éåºæ é¢åç´ (h1 ~ h6)çé¡¶é¨å¨ç¶åç´ (class=markdown)é¡¶é¨ä¹ä¸æç¸ç­çåç´ , ä½ä¸ºå½åæµè§çæ é¢\r\n   */\r\n  markdownScroll(): string {\r\n    // ç¶åç´ é¡¶é¨çåæ \r\n    const baseOffsetTop = (<HTMLElement> this.markdownBody.nativeElement).getBoundingClientRect().top;\r\n    let preRect: ClientRect;\r\n    let curRect: ClientRect;\r\n    let preMarginTop: number;\r\n    let curMarginTop: number;\r\n    const elem =  this.headingElementRef.reduce((previousValue, currentValue) => {\r\n      preRect = previousValue.getBoundingClientRect();\r\n      curRect = currentValue.getBoundingClientRect();\r\n      preMarginTop = this.headingElementMarginTop[previousValue.id];\r\n      curMarginTop = this.headingElementMarginTop[currentValue.id];\r\n      // è¿æ»¤å¨é¡¶é¨ä¹ä¸çæ é¢\r\n      if (curRect.top - baseOffsetTop - curMarginTop > 0) {\r\n        return previousValue;\r\n      }\r\n      // æ¾å°è·ç¦»é¡¶é¨æè¿çæ é¢\r\n      if ((curRect.top - baseOffsetTop - curMarginTop) > (preRect.top - baseOffsetTop - preMarginTop)) {\r\n        return currentValue;\r\n      } else {\r\n        return previousValue;\r\n      }\r\n    });\r\n    return elem.id;\r\n  }\r\n\r\n  /**\r\n   * æ´æ°æ¸²æåçhtmlåå®¹ä¸­çæ é¢é¨å(h1 ~ h6)å°headingElementRef\r\n   */\r\n  updateHeadingInfo() {\r\n    const nodeList = (<Element> this.markdownBody.nativeElement).querySelectorAll('h1, h2');\r\n    if (nodeList === undefined || nodeList === null) {\r\n      return;\r\n    }\r\n\r\n    this.headingElementRef.splice(0);\r\n    const nodes: Array<HTMLElement> = [];\r\n    for (let i = 0; i < nodeList.length; i++) {\r\n      const value = <HTMLElement> nodeList[i];\r\n      // æåelementçæ ·å¼\r\n      const marginTop = this.getComputedStyle(value, 'margin-top');\r\n      this.headingElementMarginTop[value.id] = ParseUnit.checkUnit(marginTop).number;\r\n      nodes.push(value);\r\n    }\r\n    // Element.style.xxxåªè½è¯»åè¡åæ ·å¼\r\n    this.headingElementRef.push(...nodes);\r\n  }\r\n\r\n  getComputedStyle(element: Element, property: string, pseudoElt?: string): string {\r\n    return window.getComputedStyle(element, null).getPropertyValue(property);\r\n  }\r\n}\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {Ngr2MarkdownService, TOCItem} from '../service/ngr2-markdown.service';\r\n\r\n@Component({\r\n  selector: 'nb-side-toc',\r\n  templateUrl: './side-toc.component.html',\r\n  styleUrls: ['./side-toc.component.css']\r\n})\r\nexport class SideTocComponent implements OnInit {\r\n  @Input() currentHeading: string;\r\n  @Input() themeColor = '#3f51b5';\r\n  TOCInfo: TOCItem;\r\n  constructor(\r\n    private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markdownService.currentHeading.subscribe({\r\n      next: (value => {\r\n        this.currentHeading = value;\r\n      })\r\n    });\r\n    this.markdownService.TOCInfo.subscribe({\r\n      next: (value => {\r\n        this.TOCInfo = value;\r\n      })\r\n    });\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport {DomSanitizer, SafeHtml, SafeUrl} from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'safe'\r\n})\r\nexport class HTMLPipePipe implements PipeTransform {\r\n\r\n  constructor(private domSanitizer: DomSanitizer) {\r\n  }\r\n\r\n  /**\r\n   * use DomSanitizer allow insert outside HTML\r\n   * ä½¿ç¨DomSanitizeråè®¸æå¥å¤é¨çHTML\r\n   * @param value - html content htmlåå®¹\r\n   * @param args = ç¬¬ä¸ä¸ªåæ°æ¯åå®¹ç±»å`html/url` é»è®¤ä¸º `html`\r\n   * @return - transformed html content htmlåæ¢åçåå®¹\r\n   */\r\n  transform(value: any, ...args: any[]): SafeHtml | SafeUrl {\r\n    const type = args[0];\r\n    switch (type) {\r\n      case 'html':\r\n        return this.domSanitizer.bypassSecurityTrustHtml(value);\r\n      case 'url':\r\n        return this.domSanitizer.bypassSecurityTrustUrl(value);\r\n      default:\r\n        return this.domSanitizer.bypassSecurityTrustHtml(value);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\n\r\n@Pipe({\r\n  name: 'md'\r\n})\r\nexport class MdPipe implements PipeTransform {\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService) {\r\n  }\r\n\r\n  transform(value: string, args?: any): any {\r\n    return this.markdownService.render(value, {anchor: false});\r\n  }\r\n\r\n}\r\n","import {Component, ElementRef, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {FileOperatorImpl} from '../core/fileOperator';\r\n\r\n@Component({\r\n  selector: 'nb-tool-bar',\r\n  templateUrl: './tool-bar.component.html',\r\n  styleUrls: ['./tool-bar.component.css']\r\n})\r\nexport class ToolBarComponent implements OnInit, OnDestroy {\r\n  @ViewChild('download', {read: ElementRef}) download: ElementRef;\r\n  mdHref: string;\r\n  htmlHref: string;\r\n  title: string;\r\n  titleSubscribe: Subscription;\r\n  hrefSubscribe: Subscription;\r\n  constructor(\r\n    private markdownService: Ngr2MarkdownService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.titleSubscribe = this.markdownService.TOCInfo\r\n      .subscribe(value => this.title = value.content);\r\n    let MdFileOperator: FileOperatorImpl;\r\n    let HTMLFileOperator: FileOperatorImpl;\r\n    this.hrefSubscribe = this.markdownService.currentContent\r\n      .subscribe(value => {\r\n        if (MdFileOperator) { MdFileOperator.revokeDataURLSync(); }\r\n        if (HTMLFileOperator) { HTMLFileOperator.revokeDataURLSync(); }\r\n        MdFileOperator = this.markdownService.currentContentToDataUrl('markdown');\r\n        HTMLFileOperator = this.markdownService.currentContentToDataUrl('html');\r\n        this.mdHref = MdFileOperator.result;\r\n        this.htmlHref = HTMLFileOperator.result;\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.titleSubscribe.unsubscribe();\r\n    this.hrefSubscribe.unsubscribe();\r\n  }\r\n}\r\n","import {fromEvent, Observable} from 'rxjs';\r\nimport {filter, map} from 'rxjs/operators';\r\n\r\ntype ShortcutKeyEventType = 'keydown' | 'keypress' | 'keyup';\r\n\r\n// @dynamic\r\nexport class ShortcutKeyEvent {\r\n\r\n  static SHORTCUT_KEY_OPTIONS: { [key: string]: ShortcutKeyOption} = {\r\n    'Select All': {\r\n      operateType: 'Select All',\r\n      shortcutKey: {\r\n        ctrl: true,\r\n        key: 'a'\r\n      },\r\n    },\r\n    'Copy': {\r\n      operateType: 'Copy',\r\n      shortcutKey: {\r\n        ctrl: true,\r\n        key: 'c'\r\n      },\r\n      preventDefault: true\r\n    },\r\n    'Paste': {\r\n      operateType: 'Paste',\r\n      shortcutKey: {\r\n        ctrl: true,\r\n        key: 'v'\r\n      }\r\n    },\r\n    'Cut': {\r\n      operateType: 'Cut',\r\n      shortcutKey: {\r\n        ctrl: true,\r\n        key: 'x'\r\n      },\r\n      preventDefault: true\r\n    },\r\n    'Undo': {\r\n      operateType: 'Undo',\r\n      shortcutKey: {\r\n        ctrl: true,\r\n        key: 'z'\r\n      }\r\n    },\r\n    'Redo': {\r\n      operateType: 'Redo',\r\n      shortcutKey: {\r\n        ctrl: true,\r\n        shift: true,\r\n        key: 'z'\r\n      }\r\n    }\r\n  };\r\n\r\n  private _el: Element;\r\n  private sKOpts: { [key: string]: ShortcutKeyOption};\r\n  observable: Observable<KeyboardEvent>;\r\n\r\n  constructor(el: Element,\r\n              sKOpts: { [key: string]: ShortcutKeyOption} = ShortcutKeyEvent.SHORTCUT_KEY_OPTIONS\r\n  ) {\r\n    this._el    = el;\r\n    this.sKOpts = sKOpts;\r\n\r\n    this.observable = this.listenEvent('keydown');\r\n  }\r\n\r\n  /**\r\n   * çå¬æºäºä»¶\r\n   * @param eventType\r\n   * @param options\r\n   */\r\n  private listenEvent(eventType: ShortcutKeyEventType, options?: EventListenerOptions): Observable<KeyboardEvent> {\r\n    const observable = fromEvent(this._el, eventType, options, args => args);\r\n    return observable;\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®`option`è¿æ»¤æ°æ®æµ, ç¶åååç»å·ä½çæä½å¦: `Copy`, `Paste`ç­ç­\r\n   * @param option\r\n   */\r\n   private dispatch(option: ShortcutKeyOption): Observable<KeyboardEvent> {\r\n    if (!option) { return null; }\r\n\r\n    return this.observable\r\n      .pipe(\r\n        filter(event => event.shiftKey  === (option.shortcutKey.shift || false) &&\r\n          event.ctrlKey   === (option.shortcutKey.ctrl  || false) &&\r\n          event.altKey    === (option.shortcutKey.alt   || false) &&\r\n          event.key       === (option.shortcutKey.key   || false)\r\n        ),\r\n        map(event => {\r\n          if (option.preventDefault) { event.preventDefault(); }\r\n          if (option.stopPropagation) { event.stopPropagation(); event.cancelBubble = true; }\r\n          return event;\r\n        })\r\n      );\r\n  }\r\n\r\n  private eventOptions(observable: Observable<KeyboardEvent>, option: ShortcutKeyOption): Observable<KeyboardEvent> {\r\n    return observable\r\n      .pipe(\r\n        map(event => {\r\n          if (option.preventDefault) { event.preventDefault(); }\r\n          if (option.stopPropagation) { event.stopPropagation(); event.cancelBubble = true; }\r\n          return event;\r\n        })\r\n      );\r\n  }\r\n\r\n  /**\r\n   * è§å¯æå®æä½\r\n   * @param operateType\r\n   */\r\n  specOprt(operateType: ShortcutKeyEventType): Observable<KeyboardEvent> {\r\n    if (!operateType) { return null; }\r\n    return this.dispatch(this.sKOpts[operateType]);\r\n  }\r\n\r\n  copyOprt(): Observable<KeyboardEvent> {\r\n    return this.dispatch(this.sKOpts['Copy']);\r\n  }\r\n\r\n  selectAllOprt(): Observable<KeyboardEvent> {\r\n    return this.dispatch(this.sKOpts['Select All']);\r\n  }\r\n\r\n  pasteOprt(): Observable<KeyboardEvent> {\r\n    return this.dispatch(this.sKOpts['Paste']);\r\n  }\r\n\r\n  cutOprt(): Observable<KeyboardEvent> {\r\n    return this.dispatch(this.sKOpts['Cut']);\r\n  }\r\n\r\n  undoOprt(): Observable<KeyboardEvent> {\r\n    return this.dispatch(this.sKOpts['Undo']);\r\n  }\r\n\r\n  redoOprt(): Observable<KeyboardEvent> {\r\n    return this.dispatch(this.sKOpts['Redo']);\r\n  }\r\n}\r\n\r\nexport interface ShortcutKeyOption {\r\n  operateType: 'Select All' | 'Copy' | 'Paste' | 'Cut' | 'Undo'  | 'Redo';\r\n  shortcutKey: {\r\n    shift?: boolean;\r\n    ctrl?: boolean;\r\n    alt?: boolean;\r\n    key: string;\r\n  };\r\n  preventDefault?: boolean;\r\n  stopPropagation?: boolean;\r\n  eventOptions?: EventListenerOptions;\r\n}\r\n","import {ShortcutKeyEvent} from './shortcutKeyEvent';\r\n\r\nexport class ShortcutKey {\r\n\r\n  private _el: HTMLInputElement;\r\n  private _sKEv: ShortcutKeyEvent;\r\n\r\n  constructor(el: Element\r\n  ) {\r\n    this._el = <HTMLInputElement> el;\r\n\r\n    this._sKEv = new ShortcutKeyEvent(this._el);\r\n    this._sKEv.copyOprt().subscribe(this.copy.bind(this));\r\n    this._sKEv.cutOprt().subscribe(this.cut.bind(this));\r\n  }\r\n\r\n  copy(ev: Event): void {\r\n    const selection = window.getSelection();\r\n    const range = selection.getRangeAt(0);\r\n    if (selection.isCollapsed) {\r\n      range.setStart(range.startContainer, 0);\r\n      range.setEnd(range.endContainer, range.endContainer.textContent.length);\r\n    }\r\n    document.execCommand('copy');\r\n  }\r\n\r\n  cut(ev: Event): void {\r\n    const selection = window.getSelection();\r\n    const range = selection.getRangeAt(0);\r\n    if (selection.isCollapsed) {\r\n      range.setStart(range.startContainer, 0);\r\n      range.setEnd(range.endContainer, range.endContainer.textContent.length);\r\n    }\r\n    document.execCommand('cut');\r\n  }\r\n}\r\n","import {Component, ElementRef, OnInit} from '@angular/core';\r\nimport {Observable, Subject} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged} from 'rxjs/operators';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {ShortcutKey} from '../core/shortcutKey/shortcutKey';\r\n\r\n@Component({\r\n  selector: 'nb-edit-box',\r\n  templateUrl: './edit-box.component.html',\r\n  styleUrls: ['./edit-box.component.css']\r\n})\r\nexport class EditBoxComponent implements OnInit {\r\n\r\n  private _el: HTMLElement;\r\n  private _editArea: HTMLElement;\r\n  private mdSubject: Subject<string> = new Subject<string>();\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService,\r\n              el: ElementRef\r\n  ) {\r\n    this._el = el.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._editArea = this._el.querySelector('#editArea');\r\n    this._editArea.focus();\r\n\r\n    const sk = new ShortcutKey(this._editArea);\r\n\r\n    this.markdownService.observerResetMarkdown()\r\n      .subscribe(md => {\r\n        this._editArea.innerText = md;\r\n      });\r\n    this.bindMdService();\r\n    this.bindMutationObserver();\r\n  }\r\n\r\n  /**\r\n   * è®¢éMarkdownServiceçä¸äºSubject/Observable\r\n   */\r\n  private bindMdService(): void {\r\n    this.markdownService.observerResetMarkdown()\r\n      .subscribe(md => {\r\n        this._editArea.textContent = md;\r\n      });\r\n\r\n    this.markdownService\r\n      .updateMarkdown(this.observeText(200));\r\n  }\r\n\r\n  private observeText(time?: number): Observable<string> {\r\n    if (!time) {\r\n      return this.mdSubject.asObservable();\r\n    }\r\n    return this.mdSubject\r\n      .pipe(\r\n        distinctUntilChanged(),\r\n        debounceTime(time)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * ç»å®å¹¶å¼å¯MutationObserver, è§¦åæ¶å°markdownææ¬åéå°`mdSubject`\r\n   */\r\n  private bindMutationObserver() {\r\n    const _observer = new MutationObserver((mutations: Array<MutationRecord>, observer: MutationObserver) => {\r\n      this.mdSubject.next(this.getText());\r\n    });\r\n\r\n    _observer.observe(this._editArea, {\r\n      subtree: true,\r\n      childList: true,\r\n      characterData: true,\r\n      characterDataOldValue: true\r\n    });\r\n  }\r\n\r\n  private getText(): string {\r\n    return this._editArea.innerText;\r\n  }\r\n}\r\n","import {concat, from, Observable, Subscriber} from 'rxjs';\r\nimport {mergeMap, scan} from 'rxjs/operators';\r\nimport {el} from '@angular/platform-browser/testing/src/browser_util';\r\n\r\n// @dynamic\r\nexport class IndexedDB {\r\n  static O_S_STRUCT = [\r\n    {\r\n      name: 'testStore',\r\n      optionalParameters: {\r\n        keyPath: 'id'\r\n      },\r\n      indexes: [\r\n        {\r\n          name: 'storeName',\r\n          keyPath: 'storeName',\r\n          options: {\r\n            unique: false\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  private _db: IDBDatabase;\r\n  private objectStoreStructs: Array<IndexedDBStruct>;\r\n\r\n  private constructor(dbName: string = 'testDB',\r\n                      objectStoreStructs: Array<IndexedDBStruct> = IndexedDB.O_S_STRUCT,\r\n                      subscriber: Subscriber<IndexedDB>\r\n  ) {\r\n    this.objectStoreStructs = objectStoreStructs;\r\n\r\n    const request = window.indexedDB.open(dbName);\r\n    request.onerror = (event: Event) => {\r\n      alert('Database error: ' + (<IDBOpenDBRequest> event.target).error);\r\n    };\r\n\r\n    request.onsuccess  = (event: Event): any => {\r\n      console.log(`IndexedDB open success`);\r\n      this._db = request.result;\r\n      subscriber.next(this);\r\n    };\r\n\r\n    /**\r\n     * use to initial database\r\n     * @param event\r\n     */\r\n    request.onupgradeneeded = (event: IDBVersionChangeEvent) => {\r\n      console.log(`IndexedDB upgrade need`);\r\n      this._db = request.result;\r\n\r\n      this.objectStoreStructs.forEach(store => {\r\n        const objectStore: IDBObjectStore = this._db.createObjectStore(store.name, store.optionalParameters);\r\n        if (store.indexes) {\r\n          store.indexes.forEach(index => {\r\n            objectStore.createIndex(\r\n              index.name,\r\n              index.keyPath || index.name,\r\n              index.options);\r\n          });\r\n        }\r\n      });\r\n    };\r\n  }\r\n\r\n  static instenceof(dbName: string = 'testDB',\r\n                    objectStoreStructs: Array<IndexedDBStruct> = IndexedDB.O_S_STRUCT\r\n  ): Observable<IndexedDB> {\r\n    return new Observable(subscriber => {\r\n      const indexedDB = new IndexedDB(dbName, objectStoreStructs, subscriber);\r\n    });\r\n  }\r\n  /**\r\n   * get object store specify name and mode\r\n   * @param storeName\r\n   * @param mode\r\n   */\r\n  getObjectStore(storeName: string, mode: IDBTransactionMode): IndexedDBStore {\r\n    return new IndexedDBStore(this._db.transaction(storeName, mode).objectStore(storeName));\r\n  }\r\n}\r\n\r\nexport class IndexedDBStore {\r\n  /**\r\n   * IndexedDB ObjectStore represent a object store (like table in sql database)\r\n   */\r\n  objectStore: IDBObjectStore;\r\n\r\n  constructor(objectStore: IDBObjectStore) {\r\n    this.objectStore = objectStore;\r\n  }\r\n\r\n  add<T>(data: T): Observable<IndexedDBEvent<IDBValidKey>> {\r\n    return new Observable<IndexedDBEvent<IDBValidKey>>((subscriber: Subscriber<IndexedDBEvent<IDBValidKey>>) => {\r\n      const request: IDBRequest<IDBValidKey> = this.objectStore.add(data);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * return Observable object send IndexedDBEvent multiple time\r\n   * @param data - add to store object array\r\n   */\r\n  addAll<T>(data: T[]): Observable<IndexedDBEvent<Array<IDBValidKey>>> {\r\n    const addObservables: Array<Observable<IndexedDBEvent<IDBValidKey>>> = data.map(\r\n      (item: T): Observable<IndexedDBEvent<IDBValidKey>> => this.add(item));\r\n    return this._concat_scan<IDBValidKey>(...addObservables);\r\n  }\r\n\r\n  /**\r\n   * return Observable object send IndexedDBEvent\r\n   * if IndexedDBEvent.type is IndexedDBEventType.SUCCESS then get data from IndexedDBEvent.data\r\n   * @param key\r\n   */\r\n  getById<T>(key: IDBValidKey): Observable<IndexedDBEvent<T>> {\r\n    return new Observable<IndexedDBEvent<T>>((subscriber: Subscriber<IndexedDBEvent<T>>) => {\r\n      const request: IDBRequest<T> = this.objectStore.get(key);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * å¼å®¹ie11-10, ie10ä¸æ¯æIndexedDB.getAll()æ¹æ³, ç¨openCursoræ¿ä»£\r\n   * [IndexedDB.IDBObjectStore]{@link https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore}\r\n   */\r\n  getAll<T>(): Observable<IndexedDBEvent<Array<T>>> {\r\n    const observable = new Observable<IndexedDBEvent<T>>((subscriber: Subscriber<IndexedDBEvent<T>>) => {\r\n      const request: IDBRequest<IDBCursorWithValue> = this.objectStore.openCursor();\r\n\r\n      request.onsuccess = (event: Event) => {\r\n        const cursor = request.result;\r\n        if (cursor) {\r\n          subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.COMPLETE, 1, 1, cursor.value));\r\n          cursor.continue();\r\n        } else {\r\n          subscriber.complete();\r\n        }\r\n      };\r\n      request.onerror = (event: Event) => {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.ERROR, 0, 0));\r\n        subscriber.complete();\r\n      };\r\n      // this.initRequest<Array<T>>(request, subscriber);\r\n    });\r\n    return this.getCount()\r\n      .pipe(\r\n        mergeMap((value: IndexedDBEvent<number>) => this._from_scan(observable, value.data))\r\n      );\r\n  }\r\n  /**\r\n   * return Observable object will send IndexedDBEvent multiple time\r\n   * will add T to IndexedDBEvent.data every time\r\n   * @param keys - ids\r\n   */\r\n  getAllById<T>(...keys: Array<IDBValidKey>): Observable<IndexedDBEvent<Array<T>>> {\r\n    const getObservables: Array<Observable<IndexedDBEvent<T>>> = keys.map(\r\n      (item: IDBValidKey): Observable<IndexedDBEvent<T>> => this.getById(item));\r\n    return this._concat_scan(...getObservables);\r\n  }\r\n\r\n  /**\r\n   * like getAllById but parameter type is IDBIndex\r\n   * @param indexName - index name\r\n   */\r\n  getAllByIndex<T>(indexName: string): Observable<IndexedDBEvent<Array<T>>> {\r\n    const index = this.objectStore.index(indexName);\r\n    const observable = new Observable<IndexedDBEvent<T>>((subscriber: Subscriber<IndexedDBEvent<T>>) => {\r\n      const request: IDBRequest<IDBCursorWithValue> = index.openCursor();\r\n      request.onsuccess = (event: Event) => {\r\n        const cursor: IDBCursorWithValue = request.result;\r\n        if (cursor) {\r\n          subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.COMPLETE, 1, 1, <T> cursor.value));\r\n          cursor.continue();\r\n        } else {\r\n          subscriber.complete();\r\n        }\r\n      };\r\n      request.onerror = (event: Event) => {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.ERROR, 0, 0));\r\n        subscriber.complete();\r\n      };\r\n    });\r\n\r\n    return this.getCount(index)\r\n      .pipe(\r\n        mergeMap((value: IndexedDBEvent<number>) => this._from_scan(observable, value.data))\r\n      );\r\n  }\r\n\r\n  /**\r\n   * return observable object send IndexedDBEvent\r\n   * if success IndexedDBEvent.data is updated object primary key\r\n   * @param data\r\n   */\r\n  update<T>(data: T): Observable<IndexedDBEvent<IDBValidKey>> {\r\n    return new Observable<IndexedDBEvent<IDBValidKey>>((subscriber: Subscriber<IndexedDBEvent<IDBValidKey>>) => {\r\n      const request: IDBRequest<IDBValidKey> = this.objectStore.put(data);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * return observable object send IndexedDBEvent multiple time\r\n   * every time will add success updated object primary key to IndexedDBEvent.data\r\n   * @param data\r\n   */\r\n  updateAll<T>(data: T[]): Observable<IndexedDBEvent<Array<IDBValidKey>>> {\r\n    const updateObservables: Array<Observable<IndexedDBEvent<IDBValidKey>>> = data.map(\r\n      (item: T): Observable<IndexedDBEvent<IDBValidKey>> => this.update(item));\r\n    return this._concat_scan<IDBValidKey>(...updateObservables);\r\n  }\r\n\r\n  /**\r\n   * delete\r\n   * if success return IndexedDBEvent.data type is undefined\r\n   * @param key\r\n   */\r\n  delete(key: IDBValidKey | IDBKeyRange): Observable<IndexedDBEvent<undefined>> {\r\n    return new Observable<IndexedDBEvent<undefined>>((subscriber: Subscriber<IndexedDBEvent<undefined>>) => {\r\n      const request: IDBRequest<undefined> = this.objectStore.delete(key);\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  deleteAll(...keys: (IDBValidKey | IDBKeyRange)[]): Observable<IndexedDBEvent<Array<IDBValidKey>>> {\r\n    const deleteObservables: Array<Observable<IndexedDBEvent<IDBValidKey>>> = keys.map(\r\n      (item: IDBValidKey | IDBKeyRange): Observable<IndexedDBEvent<IDBValidKey>> => this.delete(item));\r\n    return this._concat_scan<IDBValidKey>(...deleteObservables);\r\n  }\r\n\r\n  /**\r\n   * return observable object send IndexedDBEvent, IndexedDBEvent.data is IDBObjectStore or IDBIndex contain element's count\r\n   * @param object\r\n   * @param key\r\n   */\r\n  getCount(object?: IDBIndex, key?: IDBValidKey | IDBKeyRange): Observable<IndexedDBEvent<number>> {\r\n    return new Observable((subscriber: Subscriber<IndexedDBEvent<number>>) => {\r\n      const request: IDBRequest<number> = object === undefined ? this.objectStore.count() : object.count();\r\n      this.initRequest(request, subscriber);\r\n    });\r\n  }\r\n\r\n  private initRequest<T>(request: IDBRequest<T>, subscriber: Subscriber<IndexedDBEvent<T | DOMException>>): void {\r\n    request.onsuccess = () => {\r\n      if (request.result !== undefined) {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.COMPLETE, 1, 1, request.result));\r\n      } else {\r\n        subscriber.next(new IndexedDBEvent<T>(IndexedDBEventType.ERROR, 0, 0));\r\n      }\r\n      subscriber.complete();\r\n    };\r\n    // requeståºéè¿åéè¯¯ä¿¡æ¯\r\n    request.onerror = (event: Event) => {\r\n      subscriber.next(new IndexedDBEvent<DOMException>(IndexedDBEventType.ERROR, 0, 0, request.error));\r\n      subscriber.complete();\r\n    };\r\n  }\r\n\r\n  /**\r\n   * create observable use rxjs from function then use scan operator\r\n   * return custom event(IndexedDBEvent)\r\n   * @param observable\r\n   * @param total\r\n   */\r\n  private _from_scan<T>(observable: Observable<IndexedDBEvent<T>>, total: number): Observable<IndexedDBEvent<Array<T>>> {\r\n    return observable\r\n      .pipe(\r\n        scan<IndexedDBEvent<T>, IndexedDBEvent<Array<T>>>(\r\n          (acc: IndexedDBEvent<Array<T>>, value: IndexedDBEvent<T>): IndexedDBEvent<Array<T>> => {\r\n            if (value.type !== IndexedDBEventType.ERROR) {\r\n              acc.loaded++;\r\n              acc.data.push(value.data);\r\n              if (acc.loaded === acc.total) { acc.type = IndexedDBEventType.COMPLETE; }\r\n            } else {\r\n              acc.type = IndexedDBEventType.ERROR;\r\n              acc.loaded = 0;\r\n            }\r\n            return acc;\r\n          },\r\n          new IndexedDBEvent<Array<T>>(IndexedDBEventType.PENDING, 0, total, new Array<T>()))\r\n      );\r\n  }\r\n\r\n  /**\r\n   * connect observable use rxjs concat function(not Operator) then use scan operator\r\n   * return custom event(event: IndexedDBEvent)\r\n   * @param observables\r\n   */\r\n  private _concat_scan<T>(...observables: Array<Observable<IndexedDBEvent<T>>>): Observable<IndexedDBEvent<Array<T>>> {\r\n    const total = observables.length;\r\n    return concat(...observables)\r\n      .pipe(\r\n        scan<IndexedDBEvent<T>, IndexedDBEvent<Array<T>>>(\r\n          (acc: IndexedDBEvent<Array<T>>, value: IndexedDBEvent<T>): IndexedDBEvent<Array<T>> => {\r\n            if (value.type !== IndexedDBEventType.ERROR) {\r\n              acc.loaded++;\r\n              acc.data.push(value.data);\r\n              if (acc.loaded === acc.total) { acc.type = IndexedDBEventType.COMPLETE; }\r\n            } else {\r\n              acc.type = IndexedDBEventType.ERROR;\r\n              acc.loaded = 0;\r\n            }\r\n            return acc;\r\n          },\r\n          new IndexedDBEvent<Array<T>>(IndexedDBEventType.PENDING, 0, total, new Array<T>()))\r\n      );\r\n  }\r\n}\r\n\r\nexport interface IndexedDBStruct {\r\n  name: string;\r\n  optionalParameters: IDBObjectStoreParameters;\r\n  indexes: Array<{\r\n    name: string,\r\n    keyPath?: string,\r\n    options: IDBIndexParameters\r\n  }>;\r\n}\r\n/**\r\n * IndexedDB function return value\r\n * use to flag IndexedDB event status and loaded status\r\n */\r\nexport class IndexedDBEvent<T> {\r\n  type: IndexedDBEventType;\r\n  loaded: number;\r\n  total: number;\r\n  data: T;\r\n\r\n  constructor(type: IndexedDBEventType, loaded: number, total: number, data?: T) {\r\n    this.type = type;\r\n    this.loaded = loaded;\r\n    this.total = total;\r\n    this.data = data === undefined ? undefined : data;\r\n  }\r\n}\r\n\r\nexport enum IndexedDBEventType {\r\n  PENDING = 'Pending',\r\n  SUCCESS = 'Success',\r\n  ERROR = 'Error',\r\n  COMPLETE = 'Complete'\r\n}\r\n","import {Component, ElementRef, OnInit, Renderer2, ViewChild} from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\nimport {IndexedDB, IndexedDBStore, IndexedDBStruct} from '../core/indexedDB/indexedDB';\r\n\r\n@Component({\r\n  selector: 'nb-file-browser',\r\n  templateUrl: './file-browser.component.html',\r\n  styleUrls: [\r\n    './file-browser.component.css'\r\n  ]\r\n})\r\nexport class FileBrowserComponent implements OnInit {\r\n\r\n  @ViewChild('fileList', { read: ElementRef }) fileList: ElementRef;\r\n\r\n  private inputArea: HTMLElement;\r\n  private indexedDBStructs: Array<IndexedDBStruct> = [\r\n    {\r\n      name: 'markdown_article',\r\n      optionalParameters: {\r\n        keyPath: 'id',\r\n        autoIncrement: true\r\n      },\r\n      indexes: [\r\n        {\r\n          name: 'title',\r\n          keyPath: 'title',\r\n          options: {\r\n            unique: false\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n  private indexedDB: IndexedDB;\r\n  private selectedArticles: { [key: string]: {el: Element, data: Article} };\r\n  private fileListArea: Element;\r\n  private isConnect: boolean;\r\n  articles: Array<Article>;\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService,\r\n              private renderer: Renderer2\r\n  ) {\r\n    const inputAreaLi: HTMLElement = renderer.createElement('LI');\r\n    this.renderer.addClass(inputAreaLi, 'fb-li');\r\n    this.renderer.addClass(inputAreaLi, 'fb-li_create');\r\n    // inputAreaLi.classList.add('fb-li', 'fb-li_create');\r\n    const inputAreaI: HTMLElement = renderer.createElement('I');\r\n    this.renderer.addClass(inputAreaI, 'material-icons');\r\n    this.renderer.addClass(inputAreaI, 'md-18');\r\n    this.renderer.addClass(inputAreaI, 'md-dark');\r\n    // inputAreaI.classList.add('material-icons', 'md-18', 'md-dark');\r\n    this.renderer.appendChild(inputAreaI, this.renderer.createText('edit'));\r\n    const inputAreaInput: HTMLElement = renderer.createElement('INPUT');\r\n    this.renderer.addClass(inputAreaInput, 'fb-li_create-input');\r\n    // inputAreaDiv.classList.add('fb-li_create-input');\r\n    this.renderer.setAttribute(inputAreaInput, 'contenteditable', 'true');\r\n    this.renderer.appendChild(inputAreaLi, inputAreaI);\r\n    this.renderer.appendChild(inputAreaLi, inputAreaInput);\r\n\r\n    this.inputArea = inputAreaLi;\r\n    /*tslint:disable-next-line*/\r\n    this.isConnect = false;\r\n    this.selectedArticles = {};\r\n  }\r\n\r\n  ngOnInit() {\r\n    IndexedDB.instenceof('ngr2-markdown-db', this.indexedDBStructs)\r\n      .subscribe(db => {\r\n        this.indexedDB = db;\r\n        this.isConnect = true;\r\n\r\n        this.refreshArticles();\r\n      });\r\n    this.fileListArea = this.fileList.nativeElement;\r\n  }\r\n\r\n  createFile(): void {\r\n    const cloneEl = this.inputArea.cloneNode(true);\r\n    this.renderer.listen(cloneEl, 'keyup', (ev: KeyboardEvent) => {\r\n      switch (ev.code) {\r\n        case 'Enter':\r\n          this.indexedDB\r\n            .getObjectStore('markdown_article', 'readwrite')\r\n            .add(new Article('ce', (<HTMLInputElement> ev.target).value))\r\n            .subscribe(value => {\r\n              this.refreshArticles();\r\n              this.renderer.removeChild(this.fileListArea, cloneEl);\r\n            });\r\n      }\r\n    });\r\n    this.renderer.appendChild(this.fileListArea, cloneEl);\r\n  }\r\n\r\n  createFolder(): void {\r\n    console.log('createFolder');\r\n  }\r\n\r\n  rename(): void {\r\n    const cloneEl = this.inputArea.cloneNode(true);\r\n    const id = Object.getOwnPropertyNames(this.selectedArticles)[0];\r\n    const selected = this.selectedArticles[id];\r\n    this.renderer.listen(cloneEl, 'keyup', (ev: KeyboardEvent) => {\r\n      switch (ev.code) {\r\n        case 'Enter':\r\n          selected.data.title = (<HTMLInputElement> ev.target).value;\r\n          this.indexedDB\r\n            .getObjectStore('markdown_article', 'readwrite')\r\n            .update(selected.data)\r\n            .subscribe(value => {\r\n              this.refreshArticles();\r\n              this.renderer.removeChild(this.fileListArea, cloneEl);\r\n              this.selectedArticles[id] = null;\r\n            });\r\n      }\r\n    });\r\n    this.fileListArea.replaceChild(cloneEl, selected.el);\r\n    (<HTMLElement> cloneEl.lastChild).focus();\r\n  }\r\n\r\n  delete(): void {\r\n    this.indexedDB.getObjectStore('markdown_article', 'readwrite')\r\n      .deleteAll(\r\n        ...Object.getOwnPropertyNames(this.selectedArticles)\r\n          .map(value => this.selectedArticles[Number.parseInt(value, 10)].data.id)\r\n      )\r\n      .subscribe(value => this.refreshArticles());\r\n  }\r\n\r\n  close(): void {\r\n    console.log('close');\r\n  }\r\n\r\n  select(el: HTMLElement, article: Article): void {\r\n    console.log('select');\r\n    if (!this.selectedArticles[article.id.toString(10)]) {\r\n      this.selectedArticles[article.id.toString(10)] = {el, data: article};\r\n      el.classList.add('fb-li_selected');\r\n    } else {\r\n      this.selectedArticles[article.id.toString(10)] = null;\r\n      el.classList.remove('fb-li_selected');\r\n    }\r\n  }\r\n\r\n  open(el: HTMLElement, article: Article): void {\r\n    console.log('open');\r\n    this.markdownService.reinitialization(article.content);\r\n  }\r\n\r\n  private refreshArticles(): void {\r\n    this.indexedDB.getObjectStore('markdown_article', 'readwrite')\r\n      .getAll<Article>()\r\n      .subscribe(value => {\r\n        this.articles = value.data;\r\n      });\r\n  }\r\n}\r\n\r\nclass Article {\r\n  static AUTHOR   = 'Author';\r\n  static TITLE    = 'Default Title';\r\n  static CONTENT  = '# Default Title';\r\n\r\n  id: number;\r\n  author: string;\r\n  title: string;\r\n  content: string;\r\n  createTime: Date;\r\n  lastModifiedTime: Date;\r\n\r\n  constructor(author: string  = Article.AUTHOR,\r\n              title: string   = Article.TITLE,\r\n              content: string = Article.CONTENT\r\n  ) {\r\n    this.author           = author;\r\n    this.title            = title;\r\n    this.content          = content;\r\n    this.createTime       = new Date();\r\n    this.lastModifiedTime = this.createTime;\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {Ngr2MarkdownService} from '../service/ngr2-markdown.service';\r\n\r\n@Component({\r\n  selector: 'nb-status-bar',\r\n  templateUrl: './status-bar.component.html',\r\n  styleUrls: ['./status-bar.component.css']\r\n})\r\nexport class StatusBarComponent implements OnInit {\r\n\r\n  mdInfo;\r\n  htmlInfo;\r\n\r\n  constructor(private markdownService: Ngr2MarkdownService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markdownService.observeMarkdown()\r\n      .subscribe(allinfo => {\r\n        this.mdInfo   = allinfo.Markdown;\r\n        this.htmlInfo = allinfo.HTML;\r\n        console.log(allinfo);\r\n      });\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'nb-control-bar',\r\n  templateUrl: './control-bar.component.html',\r\n  styleUrls: ['./control-bar.component.css']\r\n})\r\nexport class ControlBarComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'nb-menu',\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.css']\r\n})\r\nexport class MenuComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import {fromEvent, merge, Observable} from 'rxjs';\r\nimport {filter, map, tap, throttleTime} from 'rxjs/operators';\r\n\r\nexport enum DragAndDropEventType {\r\n  DRAG_START = 'dragstart',\r\n  DRAG = 'drag',\r\n  DRAG_END = 'dragend',\r\n  DRAG_ENTER = 'dragenter',\r\n  DRAG_OVER = 'dragover',\r\n  DRAG_LEAVE = 'dragleave',\r\n  DROP = 'drop'\r\n}\r\n\r\nexport interface DragAndDropEventOptions {\r\n  eventType: DragAndDropEventType;\r\n  listener?: (event: DragEvent) => void | boolean;\r\n  preventDefault?: boolean;\r\n  stopPropagation?: boolean;\r\n  operatorOptions?: {\r\n    throttleTime?: number,\r\n    filter?: (event: DragEvent) => boolean\r\n  };\r\n  eventOptions?: EventListenerOptions;\r\n}\r\n\r\n// @dynamic\r\nexport class DragAndDropEvent {\r\n\r\n  /* tslint:disable */\r\n  static defaultFun = event => { console.group('on ' + event.type); console.groupEnd(); };\r\n  static ALL_OPTIONS: { [key: string]: DragAndDropEventOptions } = {\r\n    'dragstart': {\r\n      eventType: DragAndDropEventType.DRAG_START,\r\n      listener: DragAndDropEvent.defaultFun\r\n    },\r\n    'drag': {\r\n      eventType: DragAndDropEventType.DRAG,\r\n      listener: DragAndDropEvent.defaultFun,\r\n      operatorOptions: {\r\n        throttleTime: 1000\r\n      }\r\n    },\r\n    'dragend': {\r\n      eventType: DragAndDropEventType.DRAG_END,\r\n      listener: DragAndDropEvent.defaultFun,\r\n    },\r\n    'dragenter': {\r\n      eventType: DragAndDropEventType.DRAG_ENTER,\r\n      listener: DragAndDropEvent.defaultFun,\r\n      preventDefault: true\r\n    },\r\n    'dragover': {\r\n      eventType: DragAndDropEventType.DRAG_OVER,\r\n      listener: DragAndDropEvent.defaultFun,\r\n      operatorOptions: {\r\n        throttleTime: 100\r\n      },\r\n      preventDefault: true\r\n    },\r\n    'drop': {\r\n      eventType: DragAndDropEventType.DROP,\r\n      listener: DragAndDropEvent.defaultFun\r\n    }\r\n  };\r\n\r\n  el: Element;\r\n  observable: Observable<DragEvent>;\r\n  options: { [key: string]: DragAndDropEventOptions };\r\n  /*tslint:enable*/\r\n\r\n  // listeners: { [key: string]: (event: DragEvent) => void | boolean };\r\n  // ondragstart:  (event: DragEvent) => void | boolean;\r\n  // ondrag:       (event: DragEvent) => void | boolean;\r\n  // ondragend:    (event: DragEvent) => void | boolean;\r\n  // ondragenter:  (event: DragEvent) => void | boolean;\r\n  // ondragover:   (event: DragEvent) => void | boolean;\r\n  // ondragleave:  (event: DragEvent) => void | boolean;\r\n  // ondrop:       (event: DragEvent) => void | boolean;\r\n\r\n  constructor(el: Element,\r\n              eventOptions: { [key: string]: DragAndDropEventOptions } = DragAndDropEvent.ALL_OPTIONS,\r\n              interceptor?: (event: DragEvent) => boolean\r\n  ) {\r\n    this.el       = el;\r\n    this.options  = eventOptions;\r\n\r\n    this.observable = this.initEvent(interceptor);\r\n  }\r\n\r\n  private initEvent(interceptor?: (event: DragEvent) => boolean): Observable<DragEvent> {\r\n    const observables = Object.getOwnPropertyNames(this.options)\r\n      .reduce<Array<Observable<DragEvent>>>((previousValue, currentValue) => {\r\n        const option = this.options[currentValue];\r\n\r\n        let eventObservable = this.addEventListener(this.el, option);\r\n\r\n        eventObservable = this.addListenFunction(eventObservable, option);\r\n\r\n        previousValue.push(eventObservable);\r\n\r\n        return previousValue;\r\n      }, []);\r\n\r\n    return merge(...observables);\r\n  }\r\n\r\n  private addEventListener(el: Element,\r\n                           option: DragAndDropEventOptions,\r\n                           resultSelector: ((...args: any[]) => any) = (args => args)\r\n  ): Observable<DragEvent> {\r\n    let observable = fromEvent(el, option.eventType, option.eventOptions, resultSelector);\r\n\r\n    observable = this.eventOptions(observable, option);\r\n    observable = this.streamOperator(observable, option);\r\n\r\n    return observable;\r\n  }\r\n\r\n  private addListenFunction(observable: Observable<DragEvent>, option: DragAndDropEventOptions): Observable<DragEvent> {\r\n    if (!option.listener) {\r\n      return observable;\r\n    }\r\n    return observable.pipe(\r\n      tap(option.listener)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®optionè®¾ç½®Eventå¯¹è±¡ä¸çæ¹æ³æå±æ§\r\n   * @param observable\r\n   * @param option\r\n   */\r\n  private eventOptions(observable: Observable<DragEvent>, option: DragAndDropEventOptions): Observable<DragEvent> {\r\n    return observable\r\n      .pipe(\r\n        map((event: DragEvent) => {\r\n          if (option.preventDefault) { event.preventDefault(); }\r\n          if (option.stopPropagation) { event.stopPropagation(); event.cancelBubble = true; }\r\n          return event;\r\n        })\r\n      );\r\n  }\r\n\r\n  /**\r\n   * æ ¹æ®optionå¯¹äºä»¶æµè¿è¡optionä¸­è®¾ç½®æä½\r\n   * @param observable\r\n   * @param option\r\n   */\r\n  private streamOperator(observable: Observable<DragEvent>, option: DragAndDropEventOptions): Observable<DragEvent> {\r\n    if (!option.operatorOptions) { return observable; }\r\n    const operator = option.operatorOptions;\r\n\r\n    if (operator.throttleTime && operator.throttleTime > 0) {\r\n      observable = observable\r\n        .pipe(throttleTime(operator.throttleTime));\r\n    }\r\n    if (operator.filter) {\r\n      observable = observable\r\n        .pipe(filter(operator.filter));\r\n    }\r\n\r\n    return observable;\r\n  }\r\n}\r\n","import {DragAndDropContainer} from './dragAndDropContainer';\r\nimport {DragAndDropEvent, DragAndDropEventType} from './dragAndDropEvent';\r\n\r\nexport class DragAndDropElement {\r\n\r\n  static ELEMENT_STYLE: CSSStyle = {\r\n    // cursor: 'grab'\r\n  };\r\n  static DEMO_STYLE: CSSStyle = {\r\n    opacity: '0.5'\r\n  };\r\n\r\n  // å³ä¸, å·¦ä¸, å·¦ä¸, å³ä¸åå«å¯¹åºçè§åº¦å¼\r\n  diagonal: {\r\n    RT_ANGLE,\r\n    LT_ANGLE,\r\n    LB_ANGLE,\r\n    RB_ANGLE\r\n  } = {\r\n    RT_ANGLE: Math.PI / 4,\r\n    LT_ANGLE: Math.PI / 4 * 3,\r\n    LB_ANGLE: Math.PI / 4 * 3 * -1,\r\n    RB_ANGLE: Math.PI / 4 * -1\r\n  };\r\n\r\n  private _el: HTMLElement;\r\n  private _parent: HTMLElement;\r\n  private _dadEvent: DragAndDropEvent;\r\n  parentContainer: DragAndDropContainer;\r\n  status: DragAndDropStatus;\r\n  clone: HTMLElement;\r\n  centerPoint: Point;\r\n  get clientRect(): ClientRect | DOMRect {\r\n    return this._el.getBoundingClientRect();\r\n  }\r\n\r\n  constructor (element: HTMLElement,\r\n               parentContainer: DragAndDropContainer,\r\n               elementStyle: CSSStyle = DragAndDropElement.ELEMENT_STYLE,\r\n               demoStyle: CSSStyle = DragAndDropElement.DEMO_STYLE,\r\n  ) {\r\n    this._el =                element               || null;\r\n    this.parentContainer =    parentContainer       || null;\r\n\r\n    this._parent  = this._el && this._el.parentElement                          || null;\r\n    this.clone    = this._el && (<HTMLElement> this._el.cloneNode(true))  || null;\r\n    Object.getOwnPropertyNames(elementStyle)\r\n      .forEach(value => {\r\n        this._el.style[value] = elementStyle[value];\r\n      });\r\n    Object.getOwnPropertyNames(demoStyle)\r\n      .forEach(value => {\r\n        this.clone.style[value] = demoStyle[value];\r\n      });\r\n\r\n    // set draggable property\r\n    this._el.draggable = true;\r\n    // add drag and drop event handler\r\n    this._dadEvent = new DragAndDropEvent(this._el,\r\n      {\r\n        'dragstart': {\r\n          eventType: DragAndDropEventType.DRAG_START,\r\n          stopPropagation: true,\r\n          listener: this.ondragstart.bind(this)\r\n        },\r\n        'drag': {\r\n          eventType: DragAndDropEventType.DRAG,\r\n          stopPropagation: true,\r\n          listener: this.ondrag.bind(this),\r\n          operatorOptions: {\r\n            throttleTime: 1000\r\n          }\r\n        },\r\n        'dragend': {\r\n          eventType: DragAndDropEventType.DRAG_END,\r\n          stopPropagation: true,\r\n          listener: this.ondragend.bind(this),\r\n        },\r\n        'dragenter': {\r\n          eventType: DragAndDropEventType.DRAG_ENTER,\r\n          listener: this.ondragenter.bind(this),\r\n          preventDefault: true,\r\n          operatorOptions: {\r\n            filter: (event) => {\r\n              if (!this.parentContainer.equals(event)) {\r\n                return false;\r\n              }\r\n              return this._el !== this.parentContainer.getDragElement()._el && this._el === event.target;\r\n            }\r\n          }\r\n        },\r\n        'dragover': {\r\n          eventType: DragAndDropEventType.DRAG_OVER,\r\n          listener: this.ondragover.bind(this),\r\n          operatorOptions: {\r\n            throttleTime: 100,\r\n            filter: (event) => {\r\n              if (!this.parentContainer.equals(event)) {\r\n                return false;\r\n              }\r\n              return this._el !== this.parentContainer.getDragElement()._el;\r\n            }\r\n          },\r\n          preventDefault: true\r\n        },\r\n        'drop': {\r\n          eventType: DragAndDropEventType.DROP,\r\n          stopPropagation: true,\r\n          listener: this.ondrop.bind(this)\r\n        }\r\n      });\r\n    this._dadEvent.observable\r\n      .subscribe(value => {});\r\n\r\n    // initial\r\n    this.status = 'none';\r\n    const rect = this.clientRect;\r\n    this.centerPoint = new Point((rect.left + rect.width / 2),\r\n      (rect.top + rect.height / 2));\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   */\r\n  reset(): void {\r\n    this.transitDemonstrationFinish(this.parentContainer.getDragElement());\r\n  }\r\n\r\n  /**\r\n   * drag start\r\n   * ç¨æ·å¼å§æå¨æ¬åç´ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragstart(ev: DragEvent) {\r\n    console.group('on drop start');\r\n    this.status = 'drag';\r\n    this.parentContainer.setDragElement(this, ev);\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag\r\n   * ç¨æ·æ­£å¨æå¨æ¬åç´ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondrag(ev: DragEvent) {\r\n    console.group('on drag');\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag end\r\n   * ç¨æ·ç»ææå¨æ¬åç´ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragend(ev: DragEvent) {\r\n    console.group('on drag end');\r\n    this.status = 'none';\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag enter\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , è¿å¥æ¬åç´ çå®¹å¨èå´æ¶è§¦å\r\n   * [ç®æ æ¾ç½®è¯´æ]{@link https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#droptargets}\r\n   * @param ev - emit event\r\n   */\r\n  private ondragenter(ev: DragEvent) {\r\n    if (!(this.parentContainer.getDragElement()._parent === this._parent && this._el === ev.target)) { return; }\r\n    if (this._el === this.parentContainer.getDragElement()._el) { return; }\r\n    console.group('on drag enter');\r\n    this.status = 'drop';\r\n    this.parentContainer.setDropElement(this);\r\n    const rect = this.clientRect;\r\n    this.diagonal.RT_ANGLE = Math.atan2(rect.height / 2, rect.width / 2);\r\n    this.diagonal.LT_ANGLE = Math.PI - this.diagonal.RT_ANGLE;\r\n    this.diagonal.LB_ANGLE = -this.diagonal.LT_ANGLE;\r\n    this.diagonal.RB_ANGLE = -this.diagonal.RT_ANGLE;\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag over\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , å¨æ¬åç´ çå®¹å¨èå´åæ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragover(ev: DragEvent) {\r\n    console.group('on drag over');\r\n    this.transitDemonstration(this.parentContainer.getDragElement(), new Point(ev.clientX, ev.clientY));\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   * drag leave\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , ç¦»å¼æ¬åç´ çå®¹å¨èå´æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondragleave(ev: DragEvent) {\r\n    console.group('on drag leave');\r\n    this.status = 'none';\r\n    this.transitDemonstrationFinish(this.parentContainer.getDragElement());\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drag exit\r\n   * å½æ¬åç´ åå¾ä¸åå¯æå¨æ¶è§¦å\r\n   * @deprecated\r\n   * [æªè¢«ä»»ä½æµè§å¨å®ç°]{@link https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragexit_event}\r\n   * @param ev - emit event\r\n   */\r\n  private ondragexit(ev: DragEvent) {\r\n    console.group('on drag exit');\r\n    console.groupEnd();\r\n  }\r\n\r\n  /**\r\n   * drop\r\n   * å½å¦ä¸ä¸ªè¢«æå¨çåç´ , å¨æ¬åç´ çå®¹å¨èå´åéæ¾é¼ æ æ¶è§¦å\r\n   * @param ev - emit event\r\n   */\r\n  private ondrop(ev: DragEvent) {\r\n    console.group('on drop');\r\n    this.status = 'drop';\r\n    this.replaceElement(this.parentContainer.getDragElement()._el, this.parentContainer.getDragElement().clone);\r\n    console.groupEnd();\r\n  }\r\n\r\n  private insertBefore(el: Element): Element {\r\n    return this._parent.insertBefore(el, this._el);\r\n  }\r\n\r\n  /**\r\n   * `nextElementSibling`: ie8,ie9,safariä¸å¼å®¹\r\n   * è§: https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\r\n   * @param el - insert element\r\n   * @return - return inserted element\r\n   */\r\n  private insertAfter(el: Element): Element {\r\n    if (!this._el.nextElementSibling) {\r\n      return this._parent.appendChild(el);\r\n    }\r\n    return this._parent.insertBefore(el, this._el.nextElementSibling);\r\n  }\r\n\r\n  private computeDirection(point: Point): DragAndDropDirection {\r\n    this.centerPoint = new Point((this.clientRect.left + this.clientRect.width / 2),\r\n      (this.clientRect.top + this.clientRect.height / 2));\r\n    point.relaitiveTo(this.centerPoint);\r\n    const angle = Math.atan2(point.Y, point.X);\r\n    if (angle >= this.diagonal.RT_ANGLE && angle < this.diagonal.LT_ANGLE) {\r\n      return 'top';\r\n    } else if (angle >= this.diagonal.LT_ANGLE || angle < this.diagonal.LB_ANGLE) {\r\n      return 'left';\r\n    } else if (angle >= this.diagonal.LB_ANGLE && angle < this.diagonal.RB_ANGLE) {\r\n      return 'bottom';\r\n    } else {\r\n      return 'right';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¼ç¤ºé¼ æ æå¨åç´ éæ¾åçç¶æ\r\n   */\r\n  private transitDemonstration(draggedEl: DragAndDropElement, point: Point) {\r\n    const dir = this.computeDirection(point);\r\n    if ( dir === 'top' || dir === 'left') {\r\n      this.insertBefore(draggedEl._el);\r\n    } else if (dir === 'bottom' || dir === 'right') {\r\n      this.insertAfter(draggedEl._el);\r\n    }\r\n    console.log(dir);\r\n  }\r\n\r\n  /**\r\n   * æ¼ç¤ºç»æ, ç§»é¤åç´ \r\n   */\r\n  private transitDemonstrationFinish(dragElement: DragAndDropElement) {\r\n    this.removeElement(dragElement._el);\r\n  }\r\n\r\n  private removeElement(el: Element): Element {\r\n    for (let i = 0; i < this._parent.children.length; i++) {\r\n      if (this._parent.children[i] === el) {\r\n        this._parent.removeChild(el);\r\n        return el;\r\n      }\r\n    }\r\n  }\r\n\r\n  private replaceElement(newEl: Element, oldEl: Element): Element {\r\n    for (let i = 0; i < this._parent.children.length; i++) {\r\n      if (this._parent.children[i] === oldEl) {\r\n        this._parent.replaceChild(newEl, oldEl);\r\n        return oldEl;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass Point {\r\n  X: number;\r\n  Y: number;\r\n\r\n  constructor(X: number,\r\n              Y: number\r\n  ) {\r\n    this.X = X || null;\r\n    this.Y = Y || null;\r\n  }\r\n\r\n  relaitiveTo(relato: Point) {\r\n    this.X -= relato.X;\r\n    this.Y = relato.Y - this.Y;\r\n  }\r\n}\r\n\r\ntype DragAndDropStatus = 'none' | 'drag' | 'dragOver' | 'drop';\r\ntype DragAndDropDirection = 'top' | 'bottom' | 'left' | 'right' | 'center';\r\ntype CSSStyle = {\r\n  [P in keyof CSSStyleDeclaration]?: CSSStyleDeclaration[P];\r\n};\r\n","import {DragAndDropElement} from './dragAndDrop';\r\nimport {DragAndDropEvent, DragAndDropEventType} from './dragAndDropEvent';\r\nimport {assertNumber} from '@angular/core/src/render3/assert';\r\n\r\nexport class DragAndDropContainer {\r\n\r\n  private _el: HTMLElement;\r\n  private _children: HTMLCollection;\r\n  private _dragEl: DragAndDropElement;\r\n  private _dropEl: DragAndDropElement;\r\n  private _dadEvent: DragAndDropEvent;\r\n  private id: number;\r\n  DADChildren: Array<DragAndDropElement>;\r\n\r\n  constructor(element: HTMLElement\r\n  ) {\r\n    this._el =        element           || null;\r\n    this._children =  element.children  || null;\r\n\r\n    this.DADChildren = [];\r\n    for (let i = 0; i < this._children.length; i++) {\r\n      const el = new DragAndDropElement(\r\n        (<HTMLElement> this._children[i]),\r\n        this\r\n      );\r\n      this.DADChildren.push(el);\r\n    }\r\n  }\r\n\r\n  setDragElement(dragEl: DragAndDropElement, ev: DragEvent): void {\r\n    this._dragEl = dragEl;\r\n    this.id = new Date().getTime();\r\n    ev.dataTransfer.setData('text/containerid:' + this.id.toString(10), this.id.toString(10));\r\n  }\r\n\r\n  getDragElement(): DragAndDropElement {\r\n    return this._dragEl;\r\n  }\r\n\r\n  setDropElement(dropEl: DragAndDropElement): void {\r\n    this._dropEl = dropEl;\r\n  }\r\n\r\n  getDropElement(): DragAndDropElement {\r\n    return this._dropEl;\r\n  }\r\n\r\n  equals(ev: DragEvent): boolean {\r\n    let id = ev.dataTransfer.types[ev.dataTransfer.types.length - 1];\r\n\r\n    if (!id) { return false; }\r\n\r\n    id = id.split(':')[1];\r\n    return this.id === Number.parseInt(id, 10);\r\n  }\r\n}\r\n","import {AfterViewInit, Directive, ElementRef, OnInit} from '@angular/core';\r\nimport {DragAndDropContainer} from './core/dad/dragAndDropContainer';\r\n\r\n@Directive({\r\n  selector: '[nbDragAndDrop]'\r\n})\r\nexport class DragAndDropDirective implements OnInit, AfterViewInit {\r\n\r\n  private DADContainer: DragAndDropContainer;\r\n\r\n  constructor(\r\n    private el: ElementRef\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.DADContainer = new DragAndDropContainer(this.el.nativeElement);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Ngr2MarkdownComponent } from './ngr2-markdown.component';\r\nimport { SideTocComponent } from './side-toc/side-toc.component';\r\nimport { HTMLPipePipe } from './pipe/htmlpipe.pipe';\r\nimport {BrowserModule} from '@angular/platform-browser';\r\nimport { MdPipe } from './pipe/md.pipe';\r\nimport { ToolBarComponent } from './tool-bar/tool-bar.component';\r\nimport { EditBoxComponent } from './edit-box/edit-box.component';\r\nimport { FileBrowserComponent } from './file-browser/file-browser.component';\r\nimport { StatusBarComponent } from './status-bar/status-bar.component';\r\nimport { ControlBarComponent } from './control-bar/control-bar.component';\r\nimport { MenuComponent } from './menu/menu.component';\r\nimport { DragAndDropDirective } from './drag-and-drop.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Ngr2MarkdownComponent,\r\n    SideTocComponent,\r\n    HTMLPipePipe,\r\n    MdPipe,\r\n    ToolBarComponent,\r\n    EditBoxComponent,\r\n    FileBrowserComponent,\r\n    StatusBarComponent,\r\n    ControlBarComponent,\r\n    MenuComponent,\r\n    DragAndDropDirective\r\n  ],\r\n  imports: [\r\n    BrowserModule\r\n  ],\r\n  exports: [\r\n    Ngr2MarkdownComponent,\r\n    SideTocComponent,\r\n    MdPipe\r\n  ]\r\n})\r\nexport class Ngr2MarkdownModule { }\r\n"],"names":["hljs.getLanguage","hljs.highlight"],"mappings":"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"}
